var y=Object.defineProperty;var j=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var g=(s,t,a)=>t in s?y(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,b=(s,t)=>{for(var a in t||(t={}))S.call(t,a)&&g(s,a,t[a]);if(j)for(var a of j(t))w.call(t,a)&&g(s,a,t[a]);return s};import{f as _,j as e,L as $}from"./main-217.js";import{x as o}from"./bi.457.443.js";import{d as E,_ as c}from"./bi.519.0.js";import{g as V,a as v}from"./bi.415.926.js";import{a as k}from"./bi.920.3.js";import{T as R}from"./bi.530.724.js";const F=(s,t,a)=>{const l=b({},t);l.field_map.splice(s,0,{}),a(b({},l))},M=(s,t,a)=>{const l=b({},t);l.field_map.length>1&&l.field_map.splice(s,1),a(b({},l))},N=(s,t,a,l)=>{const r=b({},a);r.field_map[t][s.target.name]=s.target.value,s.target.value==="custom"&&(r.field_map[t].customValue=""),l(b({},r))},q=(s,t,a,l)=>{const r=b({},a);r.field_map[t].customValue=s.target.value,l(b({},r))};function I({i:s,formFields:t,field:a,demioConf:l,setDemioConf:r}){var i;const p=(l==null?void 0:l.demioFields)&&l.demioFields.filter(n=>n.required===!0)||[],m=(l==null?void 0:l.demioFields)&&l.demioFields.filter(n=>n.required===!1)||[],x=_(E),{isPro:d}=x;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:n=>N(n,s,l,r),children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),e.jsx("optgroup",{label:c("Form Fields","bit-integrations"),children:t==null?void 0:t.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`))}),e.jsx("option",{value:"custom",children:c("Custom...","bit-integrations")}),e.jsx("optgroup",{label:sprintf(c("General Smart Codes %s","bit-integrations"),d?"":`(${c("Pro","bit-integrations")})`),children:d&&((i=k)==null?void 0:i.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),a.formField==="custom"&&e.jsx(R,{onChange:n=>q(n,s,l,r),label:c("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue,placeholder:c("Custom Value","bit-integrations"),formFields:t}),e.jsxs("select",{className:"btcd-paper-inp",disabled:s<p.length,name:"demioFormField",value:s<p.length?p[s].key||"":a.demioFormField||"",onChange:n=>N(n,s,l,r),children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),s<p.length?e.jsx("option",{value:p[s].key,children:p[s].label},p[s].key):m.map(({key:n,label:h})=>e.jsx("option",{value:n,children:h},n))]})]}),s>=p.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(s,l,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>M(s,l,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function B({formFields:s,demioConf:t,setDemioConf:a,loading:l,setLoading:r,isLoading:p,setIsLoading:m,setSnackbar:x}){const d=(i,n)=>{n==="selectedEvent"&&i!==""&&v(t,a,i,r),a(h=>{const u=b({},h);return u[n]=i,n==="selectedEvent"&&(delete u.selectedSession,delete u.sessions),u})};return e.jsxs(e.Fragment,{children:[(p||l.event||l.session)&&e.jsx($,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.actionName&&!l.event&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:c("Select Event:","bit-integrations")}),e.jsx(o,{options:(t==null?void 0:t.events)&&t.events.map(i=>({label:i.name,value:`${i.id}`})),className:"msl-wrp-options dropdown-custom-width",defaultValue:t==null?void 0:t.selectedEvent,onChange:i=>d(i,"selectedEvent"),singleSelect:!0,closeOnSelect:!0}),e.jsx("button",{onClick:()=>V(t,a,r),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Events","bit-integrations")}'`},type:"button",disabled:l.event,children:"↻"})]})]}),t.actionName&&t.selectedEvent&&!l.session&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:c("Select Session:","bit-integrations")}),e.jsx(o,{options:(t==null?void 0:t.sessions)&&t.sessions.map(i=>({label:i.datetime,value:`${i.date_id}`})),className:"msl-wrp-options dropdown-custom-width",defaultValue:t==null?void 0:t.selectedSession,onChange:i=>d(i,"selectedSession"),singleSelect:!0,closeOnSelect:!0}),e.jsx("button",{onClick:()=>v(t,a,r),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Sessions","bit-integrations")}'`},type:"button",disabled:l.event,children:"↻"})]})]}),t.actionName&&!p&&e.jsxs("div",{children:[e.jsx("br",{}),e.jsxs("div",{className:"mt-5",children:[e.jsx("b",{className:"wdt-100",children:c("Field Map","bit-integrations")}),e.jsx("button",{className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh fields","bit-integrations")}'`},type:"button",children:"↻"})]}),e.jsx("br",{}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Demio Fields","bit-integrations")})})]}),t==null?void 0:t.field_map.map((i,n)=>e.jsx(I,{i:n,field:i,demioConf:t,formFields:s,setDemioConf:a,setSnackbar:x},`rp-m-${n+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>F(t.field_map.length,t,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]})]})}export{B as D};
