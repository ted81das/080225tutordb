var _=Object.defineProperty;var k=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(i,t,c)=>t in i?_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[t]=c,f=(i,t)=>{for(var c in t||(t={}))D.call(t,c)&&y(i,c,t[c]);if(k)for(var c of k(t))R.call(t,c)&&y(i,c,t[c]);return i};import{_ as s,c as u,V as m}from"./bi.519.0.js";import{u as p}from"./bi.457.443.js";const O=(i,t,c,a,d,l,o,e,r)=>{const n=f({},t);if(o){const g=f({},e);g[i.target.name]="",r(f({},g))}n[i.target.name]=i.target.value,c(f({},n))},F=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_campaign_list").then(e=>e&&e.success?(c(r=>{var g;const n=f({},r);return n.default||(n.default={}),(g=n.default)!=null&&g.campaignLists||(n.default.campaignLists={}),e.data.allCampaignLists&&(n.default.campaignLists=e.data.allCampaignLists),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),n}),a(!1),s("Campaign list refreshed","bit-integrations")):(a(!1),s("Campaign list refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Campaign list...")})},w=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_case_origin").then(e=>e&&e.success?(c(r=>p(r,n=>{n.caseOrigins=e.data})),a(!1),s("Case Origin refreshed","bit-integrations")):(a(!1),s("Case Origin refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Case Origin...")})},E=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_case_type").then(e=>e&&e.success?(c(r=>p(r,n=>{n.caseTypes=e.data})),a(!1),s("Type refreshed","bit-integrations")):(a(!1),s("Type refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading type...")})},$=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_case_reason").then(e=>e&&e.success?(c(r=>p(r,n=>{n.caseReasons=e.data})),a(!1),s("Reason refreshed","bit-integrations")):(a(!1),s("Reason refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Reason...")})},N=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_case_status").then(e=>e&&e.success?(c(r=>p(r,n=>{n.caseStatus=e.data})),a(!1),s("Status refreshed","bit-integrations")):(a(!1),s("Status refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Status...")})},v=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_case_priority").then(e=>e&&e.success?(c(r=>p(r,n=>{n.casePriority=e.data})),a(!1),s("Priority refreshed","bit-integrations")):(a(!1),s("Priority refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Priority...")})},V=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_case_potential_liability").then(e=>e&&e.success?(c(r=>p(r,n=>{n.casePotentialLiability=e.data})),a(!1),s("Potential Liability refreshed","bit-integrations")):(a(!1),s("Potential Liability refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Potential Liability...")})},z=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_case_sla_violation").then(e=>e&&e.success?(c(r=>p(r,n=>{n.caseSLAViolation=e.data})),a(!1),s("SLA Violation refreshed","bit-integrations")):(a(!1),s("SLA Violation refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading SLA Violation...")})},M=(i,t,c,a,d)=>{a(!0);const l={formID:i,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_get_lead_sources").then(e=>e&&e.success?(c(r=>p(r,n=>{n.leadSources=e.data})),a(!1),s("Lead Source refreshed","bit-integrations")):(a(!1),s("Lead Source refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Lead Source...")})},T=(i,t,c,a,d)=>{a(!0);const l={formID:i,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_get_lead_status").then(e=>e&&e.success?(c(r=>p(r,n=>{n.leadStatus=e.data})),a(!1),s("Lead Status refreshed","bit-integrations")):(a(!1),s("Lead Status refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Lead Status...")})},U=(i,t,c,a,d)=>{a(!0);const l={formID:i,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_get_lead_ratings").then(e=>e&&e.success?(c(r=>p(r,n=>{n.leadRatings=e.data})),a(!1),s("Lead Rating refreshed","bit-integrations")):(a(!1),s("Lead Rating refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Lead Rating...")})},j=(i,t,c,a,d)=>{a(!0);const l={formID:i,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_get_lead_industries").then(e=>e&&e.success?(c(r=>p(r,n=>{n.leadIndustries=e.data})),a(!1),s("Industry refreshed","bit-integrations")):(a(!1),s("Industry refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Industry...")})},x=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};u(l,"selesforce_lead_list").then(o=>o&&o.success?(c(e=>{var n;const r=f({},e);return r.default||(r.default={}),(n=r.default)!=null&&n.leadLists||(r.default.leadLists={}),o.data.leadLists&&(r.default.leadLists=o.data.leadLists),o.data.tokenDetails&&(r.tokenDetails=o.data.tokenDetails),r}),a(!1),s("Lead list refreshed","bit-integrations")):(a(!1),s("Lead list refresh failed. please try again","bit-integrations"))).catch(()=>a(!1))},H=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_contact_list").then(e=>e&&e.success?(c(r=>{var g;const n=f({},r);return n.default||(n.default={}),(g=n.default)!=null&&g.contactLists||(n.default.contactLists={}),e.data.contactLists&&(n.default.contactLists=e.data.contactLists),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),n}),a(!1),s("Contact list refresh successfully.","bit-integrations")):(a(!1),s("Contact list refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Contact list...")})},J=(i,t,c,a,d,l)=>{d(!0);const o={formID:i,actionName:t,clientId:c.clientId,clientSecret:c.clientSecret,tokenDetails:c.tokenDetails},e=u(o,"selesforce_custom_field").then(r=>{var g,b;if(!(r!=null&&r.success))return(g=r==null?void 0:r.data[0])!=null&&g.message?"Custom field: "+((b=r==null?void 0:r.data[0])==null?void 0:b.message):"Custom field refresh failed. please try again";const n=r&&r.success?r==null?void 0:r.data:[];return a(h=>{const S=h;return S.selesforceFields=n,S.field_map=P(S),S}),d(!1),"Custom field refresh successfully."});m.promise(e,{success:r=>r,error:s("Error Occurred","bit-integrations"),loading:s(`Loading ${t} list...`)})},K=(i,t,c,a)=>{const d={clientId:i.clientId,clientSecret:i.clientSecret,tokenDetails:i.tokenDetails};c(!0),u(d,"selesforce_custom_action").then(l=>{var o,e;c(!1),t(r=>p(r,n=>{l.success&&(n.selesforceActionModules=[...n.action_modules,...l==null?void 0:l.data])})),m.success(l&&l.success?"Custom Action refresh successfully.":(o=l==null?void 0:l.data[0])!=null&&o.message?"Custom Action: "+((e=l==null?void 0:l.data[0])==null?void 0:e.message):"Custom Action refresh failed. please try again")})},W=(i,t,c,a,d)=>{a(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=u(l,"selesforce_account_list").then(e=>e&&e.success?(c(r=>{var g;const n=f({},r);return n.default||(n.default={}),(g=n.default)!=null&&g.accountLists||(n.default.accountLists={}),e.data.accountLists&&(n.default.accountLists=e.data.accountLists),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),n}),a(!1),s("Account list refreshed","bit-integrations")):(a(!1),s("Account list refresh failed. please try again","bit-integrations")));m.promise(o,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Account list...")})},Z=i=>!((i!=null&&i.field_map?i.field_map.filter(c=>!c.formField||!c.selesforceField||!c.formField==="custom"&&!c.customValue):[]).length>0),P=(i,t)=>{const c=(i==null?void 0:i.selesforceFields)||[],a=(i==null?void 0:i.field_map)||[],d=a.reduce((o,e)=>{var n;const r=(n=e.selesforceField)!=null?n:e.selesforceField;return r&&o.push(r),o},[]),l=c.filter(o=>o.required===!0&&!d.includes(o.key));if(l.length>0){const o=l.map(e=>({formField:"",selesforceField:e.key}));a.push(...o)}else a.length===0&&a.push({formField:"",selesforceField:""});return a},B=(i,t,c,a,d,l)=>{if(!i.clientId||!i.clientSecret){c({clientId:i.clientId?"":s("Client Id can't be empty","bit-integrations"),clientSecret:i.clientSecret?"":s("Secret key can't be empty","bit-integrations")});return}d(!0);const o=`https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=${i.clientId}&prompt=login%20consent&redirect_uri=${encodeURIComponent(window.location.href)}/redirect`,e=window.open(o,"salesforce","width=400,height=609,toolbar=off"),r=setInterval(()=>{if(e.closed){clearInterval(r);let n={},g=!1;const b=localStorage.getItem("__salesforce");if(b&&(g=!0,n=JSON.parse(b),localStorage.removeItem("__salesforce")),!n.code||n.error||!n||!g){const h=n.error?`Cause: ${n.error}`:"";l({show:!0,msg:`${s("Authorization Failed","bit-integrations")} ${h}. ${s("please try again","bit-integrations")}`}),d(!1)}else{const h=f({},i);h.accountServer=n["accounts-server"],A(n,h,t,a,d,l)}}},500)},A=(i,t,c,a,d,l)=>{const o=f({},i);o.clientId=t.clientId,o.clientSecret=t.clientSecret,o.redirectURI=`${encodeURIComponent(window.location.href)}/redirect`,u(o,"selesforce_generate_token").then(e=>{if(e&&e.success){const r=f({},t);r.tokenDetails=e.data,c(r),a(!0),l({show:!0,msg:s("Authorized Successfully","bit-integrations")})}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?l({show:!0,msg:`${s("Authorization failed Cause:","bit-integrations")}${e.data.data||e.data}. ${s("please try again","bit-integrations")}`}):l({show:!0,msg:s("Authorization failed. please try again","bit-integrations")});d(!1)})};export{F as a,W as b,Z as c,H as d,N as e,w as f,K as g,O as h,v as i,V as j,z as k,E as l,$ as m,M as n,T as o,U as p,j as q,x as r,J as s,B as t};
