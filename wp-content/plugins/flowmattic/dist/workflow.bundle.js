/*! For license information please see workflow.bundle.js.LICENSE.txt */
(()=>{var e,t={421:e=>{var t;self,t=()=>(()=>{"use strict";var e={425:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(650),r=n.n(o),i=n(196),a=n.n(i)()(r());a.push([e.id,'.json-container{font-family:"Open Sans";font-size:16px;background-color:#fff;color:gray;box-sizing:border-box}.json-container .line{margin:4px 0;display:flex;justify-content:flex-start}.json-container .caret-icon{width:18px;text-align:center;cursor:pointer}.json-container .empty-icon{width:18px}.json-container .json-type{margin-right:4px;margin-left:4px}.json-container .json-key{color:#444;margin-right:4px;margin-left:4px}.json-container .json-index{margin-right:4px;margin-left:4px}.json-container .json-value{margin-left:8px}.json-container .json-number{color:#f9ae58}.json-container .json-boolean{color:#ec5f66}.json-container .json-string{color:#86b25c}.json-container .json-size{margin-right:4px;margin-left:4px}.json-container .hidden{display:none}.json-container .fas{display:inline-block;border-style:solid;width:0;height:0}.json-container .fa-caret-down{border-width:6px 5px 0 5px;border-color:gray rgba(0,0,0,0)}.json-container .fa-caret-right{border-width:5px 0 5px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) gray}',""]);const s=a},196:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);o&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},650:e=>{e.exports=function(e){return e[1]}},62:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},a=[],s=0;s<e.length;s++){var l=e[s],c=o.base?l[0]+o.base:l[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var p=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=r(f,o);o.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var l=o(e,r),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},566:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},911:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},107:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},552:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},227:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var o={};return(()=>{n.r(o),n.d(o,{collapse:()=>A,create:()=>k,default:()=>T,destroy:()=>I,expand:()=>R,render:()=>O,renderJSON:()=>_,toggleNode:()=>N,traverse:()=>C});var e=n(62),t=n.n(e),r=n(552),i=n.n(r),a=n(566),s=n.n(a),l=n(107),c=n.n(l),u=n(911),d=n.n(u),p=n(227),f=n.n(p),h=n(425),m={};function g(e){return Array.isArray(e)?"array":null===e?"null":typeof e}function v(e){return document.createElement(e)}m.styleTagTransform=f(),m.setAttributes=c(),m.insert=s().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=d(),t()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals;const y={HIDDEN:"hidden",CARET_ICON:"caret-icon",CARET_RIGHT:"fa-caret-right",CARET_DOWN:"fa-caret-down",ICON:"fas"};function x(e){e.children.forEach((e=>{e.el.classList.add(y.HIDDEN),e.isExpanded&&x(e)}))}function w(e){e.children.forEach((e=>{e.el.classList.remove(y.HIDDEN),e.isExpanded&&w(e)}))}function b(e){if(e.children.length>0){const t=e.el.querySelector("."+y.ICON);t&&t.classList.replace(y.CARET_RIGHT,y.CARET_DOWN)}}function S(e){if(e.children.length>0){const t=e.el.querySelector("."+y.ICON);t&&t.classList.replace(y.CARET_DOWN,y.CARET_RIGHT)}}function N(e){e.isExpanded?(e.isExpanded=!1,S(e),x(e)):(e.isExpanded=!0,b(e),w(e))}function C(e,t){t(e),e.children.length>0&&e.children.forEach((e=>{C(e,t)}))}function j(e={}){let t=e.hasOwnProperty("value")?e.value:null;return(e=>"object"===g(e)&&0===Object.keys(e).length)(t)&&(t="{}"),{key:e.key||null,parent:e.parent||null,value:t,isExpanded:e.isExpanded||!1,type:e.type||null,children:e.children||[],el:e.el||null,depth:e.depth||0,dispose:null}}function E(e,t){if("object"==typeof e)for(let n in e){const o=j({value:e[n],key:n,depth:t.depth+1,type:g(e[n]),parent:t});t.children.push(o),E(e[n],o)}}function M(e){return"string"==typeof e?JSON.parse(e):e}function k(e){const t=M(e),n=j({value:t,key:g(t),type:g(t)});return E(t,n),n}function _(e,t){const n=k(M(e));return O(n,t),n}function O(e,t){const n=function(){const e=v("div");return e.className="json-container",e}();C(e,(function(e){e.el=function(e){let t=v("div");const n=e=>{const t=e.children.length;return"array"===e.type?`[${t}]`:"object"===e.type?`{${t}}`:null};if(e.children.length>0){t.innerHTML=function(e={}){const{key:t,size:n}=e;return`\n    <div class="line">\n      <div class="caret-icon"><i class="fas fa-caret-right"></i></div>\n      <div class="json-key">${t}</div>\n      <div class="json-size">${n}</div>\n    </div>\n  `}({key:e.key,size:n(e)});const o=t.querySelector("."+y.CARET_ICON);e.dispose=function(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}(o,"click",(()=>N(e)))}else t.innerHTML=function(e={}){const{key:t,value:n,type:o}=e;return`\n    <div class="line">\n      <div class="empty-icon"></div>\n      <div class="json-key">${t}</div>\n      <div class="json-separator">:</div>\n      <div class="json-value json-${o}">${n}</div>\n    </div>\n  `}({key:e.key,value:e.value,type:"{}"===e.value?"object":typeof e.value});const o=t.children[0];return null!==e.parent&&o.classList.add(y.HIDDEN),o.style="margin-left: "+18*e.depth+"px;",o}(e),n.appendChild(e.el)})),t.appendChild(n)}function R(e){C(e,(function(e){e.el.classList.remove(y.HIDDEN),e.isExpanded=!0,b(e)}))}function A(e){C(e,(function(t){t.isExpanded=!1,t.depth>e.depth&&t.el.classList.add(y.HIDDEN),S(t)}))}function I(e){var t;C(e,(e=>{e.dispose&&e.dispose()})),(t=e.el.parentNode).parentNode.removeChild(t)}const T={toggleNode:N,render:O,create:k,renderJSON:_,expand:R,collapse:A,traverse:C,destroy:I}})(),o})(),e.exports=t()},53:(e,t,n)=>{"use strict";function o(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(r&&(r+=" "),r+=t);return r}n.r(t),n.d(t,{clsx:()=>r,default:()=>i});const i=r},792:(e,t,n)=>{var o;!function(){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(o=function(){return i}.call(t,n,t,e))||(e.exports=o)}()},694:(e,t,n)=>{"use strict";var o=n(925);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},27:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}(n(540)),r=p(n(556)),i=p(n(961)),a=p(n(53)),s=n(89),l=n(726),c=n(56),u=p(n(507)),d=p(n(696));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}function m(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends o.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:o}=t;return!n||o&&n.x===o.x&&n.y===o.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:o}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}constructor(e){super(e),m(this,"onDragStart",((e,t)=>{if((0,d.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),m(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const n=(0,l.createDraggableData)(this,t),o={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=o;o.x+=this.state.slackX,o.y+=this.state.slackY;const[r,i]=(0,l.getBoundPosition)(this,o.x,o.y);o.x=r,o.y=i,o.slackX=this.state.slackX+(e-o.x),o.slackY=this.state.slackY+(t-o.y),n.x=o.x,n.y=o.y,n.deltaX=o.x-this.state.x,n.deltaY=o.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(o)})),m(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const n={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:i.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:n,defaultPosition:r,defaultClassName:i,defaultClassNameDragging:c,defaultClassNameDragged:d,position:p,positionOffset:f,scale:m,...g}=this.props;let v={},y=null;const x=!Boolean(p)||this.state.dragging,w=p||r,b={x:(0,l.canDragX)(this)&&x?this.state.x:w.x,y:(0,l.canDragY)(this)&&x?this.state.y:w.y};this.state.isElementSVG?y=(0,s.createSVGTransform)(b,f):v=(0,s.createCSSTransform)(b,f);const S=(0,a.default)(n.props.className||"",i,{[c]:this.state.dragging,[d]:this.state.dragged});return o.createElement(u.default,h({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(n),{className:S,style:{...n.props.style,...v},transform:y}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...u.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),m(g,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}(n(540)),r=u(n(556)),i=u(n(961)),a=n(89),s=n(726),l=n(56),c=u(n(696));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={start:"touchstart",move:"touchmove",stop:"touchend"},h={start:"mousedown",move:"mousemove",stop:"mouseup"};let m=h;class g extends o.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const o=(0,a.getTouchIdentifier)(e);this.touchIdentifier=o;const r=(0,s.getControlPosition)(e,o,this);if(null==r)return;const{x:i,y:l}=r,u=(0,s.createCoreData)(this,i,l);(0,c.default)("DraggableCore: handleDragStart: %j",u),(0,c.default)("calling",this.props.onStart),!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(n),this.dragging=!0,this.lastX=i,this.lastY=l,(0,a.addEvent)(n,m.move,this.handleDrag),(0,a.addEvent)(n,m.stop,this.handleDragStop))})),p(this,"handleDrag",(e=>{const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:o}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=o-this.lastY;if([e,t]=(0,s.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,o=this.lastY+t}const r=(0,s.createCoreData)(this,n,o);if((0,c.default)("DraggableCore: handleDrag: %j",r),!1!==this.props.onDrag(e,r)&&!1!==this.mounted)this.lastX=n,this.lastY=o;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}})),p(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:o}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=o-this.lastY||0;[e,t]=(0,s.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,o=this.lastY+t}const r=(0,s.createCoreData)(this,n,o);if(!1===this.props.onStop(e,r)||!1===this.mounted)return!1;const i=this.findDOMNode();i&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(i.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,i&&((0,c.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(i.ownerDocument,m.move,this.handleDrag),(0,a.removeEvent)(i.ownerDocument,m.stop,this.handleDragStop))})),p(this,"onMouseDown",(e=>(m=h,this.handleDragStart(e)))),p(this,"onMouseUp",(e=>(m=h,this.handleDragStop(e)))),p(this,"onTouchStart",(e=>(m=f,this.handleDragStart(e)))),p(this,"onTouchEnd",(e=>(m=f,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,a.addEvent)(e,f.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,a.removeEvent)(t,h.move,this.handleDrag),(0,a.removeEvent)(t,f.move,this.handleDrag),(0,a.removeEvent)(t,h.stop,this.handleDragStop),(0,a.removeEvent)(t,f.stop,this.handleDragStop),(0,a.removeEvent)(e,f.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:i.default.findDOMNode(this)}render(){return o.cloneElement(o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=g,p(g,"displayName","DraggableCore"),p(g,"propTypes",{allowAnyClick:r.default.bool,children:r.default.node.isRequired,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},794:(e,t,n)=>{"use strict";const{default:o,DraggableCore:r}=n(27);e.exports=o,e.exports.default=o,e.exports.DraggableCore=r},89:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=c,t.addEvent=function(e,t,n,o){if(!e)return;const r={capture:!0,...o};e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&c(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const n=l(e,t,"px");return{[(0,r.browserPrefixToKey)("transform",r.default)]:n}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,o.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,o.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(n.paddingTop),t-=(0,o.int)(n.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(n.paddingLeft),t-=(0,o.int)(n.paddingRight),t},t.matchesSelector=s,t.matchesSelectorAndParentsTo=function(e,t,n){let o=e;do{if(s(o,t))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1},t.offsetXYFromParent=function(e,t,n){const o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-o.left)/n,y:(e.clientY+t.scrollTop-o.top)/n}},t.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(n.borderTopWidth),t+=(0,o.int)(n.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(n.borderLeftWidth),t+=(0,o.int)(n.borderRightWidth),t},t.removeClassName=u,t.removeEvent=function(e,t,n,o){if(!e)return;const r={capture:!0,...o};e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&u(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var o=n(56),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(514));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}let a="";function s(e,t){return a||(a=(0,o.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,o.isFunction)(e[t])}))),!!(0,o.isFunction)(e[a])&&e[a](t)}function l(e,t,n){let{x:o,y:r}=e,i="translate(".concat(o).concat(n,",").concat(r).concat(n,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+n),o="".concat("string"==typeof t.y?t.y:t.y+n);i="translate(".concat(e,", ").concat(o,")")+i}return i}function c(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=r,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=o;const n=["Moz","Webkit","O","ms"];function o(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const o=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!o)return"";if(t in o)return"";for(let e=0;e<n.length;e++)if(r(t,n[e])in o)return n[e];return""}function r(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let o=0;o<e.length;o++)n?(t+=e[o].toUpperCase(),n=!1):"-"===e[o]?n=!0:t+=e[o];return t}(e)):e}t.default=o()},696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){const r=!(0,o.isNum)(e.lastX),a=i(e);return r?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},t.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:a}=e.props;a="string"==typeof a?a:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(a);const s=i(e);if("string"==typeof a){const{ownerDocument:e}=s,t=e.defaultView;let n;if(n="parent"===a?s.parentNode:e.querySelector(a),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');const i=n,l=t.getComputedStyle(s),c=t.getComputedStyle(i);a={left:-s.offsetLeft+(0,o.int)(c.paddingLeft)+(0,o.int)(l.marginLeft),top:-s.offsetTop+(0,o.int)(c.paddingTop)+(0,o.int)(l.marginTop),right:(0,r.innerWidth)(i)-(0,r.outerWidth)(s)-s.offsetLeft+(0,o.int)(c.paddingRight)-(0,o.int)(l.marginRight),bottom:(0,r.innerHeight)(i)-(0,r.outerHeight)(s)-s.offsetTop+(0,o.int)(c.paddingBottom)-(0,o.int)(l.marginBottom)}}return(0,o.isNum)(a.right)&&(t=Math.min(t,a.right)),(0,o.isNum)(a.bottom)&&(n=Math.min(n,a.bottom)),(0,o.isNum)(a.left)&&(t=Math.max(t,a.left)),(0,o.isNum)(a.top)&&(n=Math.max(n,a.top)),[t,n]},t.getControlPosition=function(e,t,n){const o="number"==typeof t?(0,r.getTouch)(e,t):null;if("number"==typeof t&&!o)return null;const a=i(n),s=n.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,r.offsetXYFromParent)(o||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var o=n(56),r=n(89);function i(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},56:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let n=0,o=e.length;n<o;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},345:(e,t,n)=>{"use strict";function o(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function r(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function i(e,t){try{var n=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,o)}finally{this.props=n,this.state=o}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,c="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=o,t.componentWillReceiveProps=r),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,o)}}return e}n.r(t),n.d(t,{polyfill:()=>a}),o.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},720:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(540),a=h(i),s=h(n(961)),l=h(n(556)),c=h(n(90)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(462)),d=n(834),p=h(d),f=n(345);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=t.portalClassName="ReactModalPortal",v=t.bodyOpenClassName="ReactModal__Body--open",y=d.canUseDOM&&void 0!==s.default.createPortal,x=function(e){return document.createElement(e)},w=function(){return y?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function b(e){return e()}var S=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.removePortal=function(){!y&&s.default.unmountComponentAtNode(r.node);var e=b(r.props.parentSelector);e&&e.contains(r.node)?e.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(e){r.portal=e},r.renderPortal=function(e){var n=w()(r,a.default.createElement(c.default,o({defaultStyles:t.defaultStyles},e)),r.node);r.portalRef(n)},m(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){d.canUseDOM&&(y||(this.node=x("div")),this.node.className=this.props.portalClassName,b(this.props.parentSelector).appendChild(this.node),!y&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:b(e.parentSelector),nextParent:b(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(d.canUseDOM){var o=this.props,r=o.isOpen,i=o.portalClassName;e.portalClassName!==i&&(this.node.className=i);var a=n.prevParent,s=n.nextParent;s!==a&&(a.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||r)&&!y&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(d.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return d.canUseDOM&&y?(!this.node&&y&&(this.node=x("div")),w()(a.default.createElement(c.default,o({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){u.setElement(e)}}]),t}(i.Component);S.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.oneOfType([l.default.instanceOf(p.default),l.default.instanceOf(d.SafeHTMLCollection),l.default.instanceOf(d.SafeNodeList),l.default.arrayOf(l.default.instanceOf(p.default))]),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func},S.defaultProps={isOpen:!1,portalClassName:g,bodyOpenClassName:v,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return a.default.createElement("div",e,t)},contentElement:function(e,t){return a.default.createElement("div",e,t)}},S.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,f.polyfill)(S),t.default=S},90:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(540),s=g(n(556)),l=m(n(791)),c=g(n(67)),u=m(n(462)),d=m(n(838)),p=n(834),f=g(p),h=g(n(628));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}n(727);var v={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,o=e.ariaHideApp,r=e.htmlOpenClassName,i=e.bodyOpenClassName,a=e.parentSelector,s=a&&a().ownerDocument||document;i&&d.remove(s.body,i),r&&d.remove(s.getElementsByTagName("html")[0],r),o&&y>0&&0==(y-=1)&&u.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(l.returnFocus(n.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),h.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(l.setupScopedFocus(n.node),l.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,c.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var o="object"===(void 0===t?"undefined":r(t))?t:{base:v[e],afterOpen:v[e]+"--after-open",beforeClose:v[e]+"--before-close"},i=o.base;return n.state.afterOpen&&(i=i+" "+o.afterOpen),n.state.beforeClose&&(i=i+" "+o.beforeClose),"string"==typeof t&&t?i+" "+t:i},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,o){return n[e+"-"+o]=t[o],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,o=e.htmlOpenClassName,r=e.bodyOpenClassName,i=e.parentSelector,a=i&&i().ownerDocument||document;r&&d.add(a.body,r),o&&d.add(a.getElementsByTagName("html")[0],o),n&&(y+=1,u.hide(t)),h.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,r=e.overlayClassName,i=e.defaultStyles,a=e.children,s=n?{}:i.content,l=r?{}:i.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",r),style:o({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},u=o({id:t,ref:this.setContentRef,style:o({},s,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",o({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),d=this.props.contentElement(u,a);return this.props.overlayElement(c,d)}}]),t}(a.Component);x.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},x.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(f.default),s.default.instanceOf(p.SafeHTMLCollection),s.default.instanceOf(p.SafeNodeList),s.default.arrayOf(s.default.instanceOf(f.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=x,e.exports=t.default},462:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){a&&(a.removeAttribute?a.removeAttribute("aria-hidden"):null!=a.length?a.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(a).forEach((function(e){return e.removeAttribute("aria-hidden")}))),a=null},t.log=function(){},t.assertNodeList=s,t.setElement=function(e){var t=e;if("string"==typeof t&&i.canUseDOM){var n=document.querySelectorAll(t);s(n,t),t=n}return a=t||a},t.validateElement=l,t.hide=function(e){var t=!0,n=!1,o=void 0;try{for(var r,i=l(e)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value.setAttribute("aria-hidden","true")}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}},t.show=function(e){var t=!0,n=!1,o=void 0;try{for(var r,i=l(e)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value.removeAttribute("aria-hidden")}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}},t.documentNotReadyOrSSRTesting=function(){a=null};var o,r=(o=n(771))&&o.__esModule?o:{default:o},i=n(834),a=null;function s(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function l(e){var t=e||a;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,r.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[i,a],t=0;t<e.length;t++){var n=e[t];n&&n.parentNode&&n.parentNode.removeChild(n)}i=a=null,s=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(s.length);for(var e=[i,a],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var o,r=(o=n(628))&&o.__esModule?o:{default:o},i=void 0,a=void 0,s=[];function l(){0!==s.length&&s[s.length-1].focusContent()}r.default.subscribe((function(e,t){i||a||((i=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),i.style.position="absolute",i.style.opacity="0",i.setAttribute("tabindex","0"),i.addEventListener("focus",l),(a=i.cloneNode()).addEventListener("focus",l)),(s=t).length>0?(document.body.firstChild!==i&&document.body.insertBefore(i,document.body.firstChild),document.body.lastChild!==a&&document.body.appendChild(a)):(i.parentElement&&i.parentElement.removeChild(i),a.parentElement&&a.parentElement.removeChild(a))}))},838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)r(e,n[t]);var i=document.body;for(var a in o)r(i,o[a]);n={},o={}},t.log=function(){};var n={},o={};function r(e,t){e.classList.remove(t)}t.add=function(e,t){return r=e.classList,i="html"==e.nodeName.toLowerCase()?n:o,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(i,e),r.add(e)}));var r,i},t.remove=function(e,t){return r=e.classList,i="html"==e.nodeName.toLowerCase()?n:o,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(i,e),0===i[e]&&r.remove(e)}));var r,i}},791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){i=[]},t.log=function(){},t.handleBlur=l,t.handleFocus=c,t.markForFocusLater=function(){i.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==i.length&&(t=i.pop()).focus({preventScroll:e}))}catch(e){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){i.length>0&&i.pop()},t.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",l,!1),document.addEventListener("focus",c,!0)):(window.attachEvent("onBlur",l),document.attachEvent("onFocus",c))},t.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",l),document.removeEventListener("focus",c)):(window.detachEvent("onBlur",l),document.detachEvent("onFocus",c))};var o,r=(o=n(411))&&o.__esModule?o:{default:o},i=[],a=null,s=!1;function l(){s=!0}function c(){if(s){if(s=!1,!a)return;setTimeout((function(){a.contains(document.activeElement)||((0,r.default)(a)[0]||a).focus()}),0)}}},628:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(o.openInstances.length),o.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){o=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},o=new n;t.default=o},834:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var o,r=((o=n(792))&&o.__esModule?o:{default:o}).default,i=r.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=r.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=r.canUseDOM?window.NodeList:{},t.canUseDOM=r.canUseDOM,t.default=i},67:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.default)(e);if(n.length){var o=void 0,a=t.shiftKey,s=n[0],l=n[n.length-1],c=i();if(e===c){if(!a)return;o=l}if(l!==c||a||(o=s),s===c&&a&&(o=l),o)return t.preventDefault(),void o.focus();var u=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null!=u&&"Chrome"!=u[1]&&null==/\biPod\b|\biPad\b/g.exec(navigator.userAgent)){var d=n.indexOf(c);if(d>-1&&(d+=a?-1:1),void 0===(o=n[d]))return t.preventDefault(),void(o=a?l:s).focus();t.preventDefault(),o.focus()}}else t.preventDefault()};var o,r=(o=n(411))&&o.__esModule?o:{default:o};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?i(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]).filter(a)};var n="none",o="contents",r=/input|select|textarea|button|object|iframe/;function i(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var r=window.getComputedStyle(e),i=r.getPropertyValue("display");return t?i!==o&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,r):i===n}catch(e){return console.warn("Failed to inspect element style"),!1}}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&function(e,t){var n=e.nodeName.toLowerCase();return(r.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),i(t))return!1;t=t.parentNode}return!0}(e)}(e,!n)}e.exports=t.default},312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n(720))&&o.__esModule?o:{default:o};t.default=r.default,e.exports=t.default},630:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}(n(540)),r=n(794),i=n(30),a=n(329),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var h=function(e){var t,n;function a(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var l=a.prototype;return l.componentWillUnmount=function(){this.resetData()},l.resetData=function(){this.lastHandleRect=this.slack=null},l.runConstraints=function(e,t){var n=this.props,o=n.minConstraints,r=n.maxConstraints,i=n.lockAspectRatio;if(!o&&!r&&!i)return[e,t];if(i){var a=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*a)?t=e/a:e=t*a}var c=e,u=t,d=this.slack||[0,0],p=d[0],f=d[1];return e+=p,t+=f,o&&(e=Math.max(o[0],e),t=Math.max(o[1],t)),r&&(e=Math.min(r[0],e),t=Math.min(r[1],t)),this.slack=[p+(c-e),f+(u-t)],[e,t]},l.resizeHandler=function(e,t){var n=this;return function(o,r){var i=r.node,a=r.deltaX,s=r.deltaY;"onResizeStart"===e&&n.resetData();var l=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,c=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(l||c){var u=t[0],d=t[t.length-1],p=i.getBoundingClientRect();null!=n.lastHandleRect&&("w"===d&&(a+=p.left-n.lastHandleRect.left),"n"===u&&(s+=p.top-n.lastHandleRect.top)),n.lastHandleRect=p,"w"===d&&(a=-a),"n"===u&&(s=-s);var f=n.props.width+(l?a/n.props.transformScale:0),h=n.props.height+(c?s/n.props.transformScale:0),m=n.runConstraints(f,h);f=m[0],h=m[1];var g=f!==n.props.width||h!==n.props.height,v="function"==typeof n.props[e]?n.props[e]:null;v&&!("onResize"===e&&!g)&&(null==o.persist||o.persist(),v(o,{node:i,size:{width:f,height:h},handle:t})),"onResizeStop"===e&&n.resetData()}}},l.renderResizeHandle=function(e,t){var n=this.props.handle;if(!n)return o.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof n)return n(e,t);var r=d({ref:t},"string"==typeof n.type?{}:{handleAxis:e});return o.cloneElement(n,r)},l.render=function(){var e=this,t=this.props,n=t.children,a=t.className,l=t.draggableOpts,u=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),p=(t.transformScale,function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,s));return(0,i.cloneElement)(n,d(d({},p),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(n.props.children,u.map((function(t){var n,i=null!=(n=e.handleRefs[t])?n:e.handleRefs[t]=o.createRef();return o.createElement(r.DraggableCore,c({},l,{nodeRef:i,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,i))})))}))},a}(o.Component);t.default=h,h.propTypes=a.resizableProps,h.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},661:(e,t,n)=>{"use strict";t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}(n(540)),r=l(n(556)),i=l(n(630)),a=n(329),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var m=function(e){var t,n;function r(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,n){var o=n.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(o,(function(){return t.props.onResize&&t.props.onResize(e,n)}))):t.setState(o)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n),r.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},r.prototype.render=function(){var e=this.props,t=e.handle,n=e.handleSize,r=(e.onResize,e.onResizeStart),a=e.onResizeStop,l=e.draggableOpts,c=e.minConstraints,d=e.maxConstraints,f=e.lockAspectRatio,h=e.axis,m=(e.width,e.height,e.resizeHandles),g=e.style,v=e.transformScale,y=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,s);return o.createElement(i.default,{axis:h,draggableOpts:l,handle:t,handleSize:n,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:c,onResizeStart:r,onResize:this.onResize,onResizeStop:a,resizeHandles:m,transformScale:v,width:this.state.width},o.createElement("div",u({},y,{style:p(p({},g),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},r}(o.Component);t.default=m,m.propTypes=p(p({},a.resizableProps),{},{children:r.default.element})},329:(e,t,n)=>{"use strict";t.__esModule=!0,t.resizableProps=void 0;var o,r=(o=n(556))&&o.__esModule?o:{default:o};n(794);var i={axis:r.default.oneOf(["both","x","y","none"]),className:r.default.string,children:r.default.element.isRequired,draggableOpts:r.default.shape({allowAnyClick:r.default.bool,cancel:r.default.string,children:r.default.node,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:r.default.node,grid:r.default.arrayOf(r.default.number),handle:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o,i=t[0];return"both"===i.axis||"y"===i.axis?(o=r.default.number).isRequired.apply(o,t):r.default.number.apply(r.default,t)},handle:r.default.oneOfType([r.default.node,r.default.func]),handleSize:r.default.arrayOf(r.default.number),lockAspectRatio:r.default.bool,maxConstraints:r.default.arrayOf(r.default.number),minConstraints:r.default.arrayOf(r.default.number),onResizeStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,resizeHandles:r.default.arrayOf(r.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:r.default.number,width:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o,i=t[0];return"both"===i.axis||"x"===i.axis?(o=r.default.number).isRequired.apply(o,t):r.default.number.apply(r.default,t)}};t.resizableProps=i},30:(e,t,n)=>{"use strict";t.__esModule=!0,t.cloneElement=function(e,t){return t.style&&e.props.style&&(t.style=a(a({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),r.default.cloneElement(e,t)};var o,r=(o=n(540))&&o.__esModule?o:{default:o};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},36:(e,t,n)=>{"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=n(630).default,e.exports.ResizableBox=n(661).default},463:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var o=n-1>>>1,r=e[o];if(!(0<i(r,t)))break e;e[o]=t,e[n]=r,n=o}}function o(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var o=0,r=e.length,a=r>>>1;o<a;){var s=2*(o+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<r&&0>i(u,l)?(e[o]=u,e[c]=n,o=c):(e[o]=l,e[s]=n,o=s);else{if(!(c<r&&0>i(u,n)))break e;e[o]=u,e[c]=n,o=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,p=null,f=3,h=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=o(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=o(u)}}function b(e){if(g=!1,w(e),!m)if(null!==o(c))m=!0,I(S);else{var t=o(u);null!==t&&T(b,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(E),E=-1),h=!0;var i=f;try{for(w(n),p=o(c);null!==p&&(!(p.expirationTime>n)||e&&!_());){var a=p.callback;if("function"==typeof a){p.callback=null,f=p.priorityLevel;var s=a(p.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?p.callback=s:p===o(c)&&r(c),w(n)}else r(c);p=o(c)}if(null!==p)var l=!0;else{var d=o(u);null!==d&&T(b,d.startTime-n),l=!1}return l}finally{p=null,f=i,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,C=!1,j=null,E=-1,M=5,k=-1;function _(){return!(t.unstable_now()-k<M)}function O(){if(null!==j){var e=t.unstable_now();k=e;var n=!0;try{n=j(!0,e)}finally{n?N():(C=!1,j=null)}}else C=!1}if("function"==typeof x)N=function(){x(O)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=O,N=function(){A.postMessage(null)}}else N=function(){v(O,0)};function I(e){j=e,C||(C=!0,N())}function T(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return o(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,i){var a=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?a+i:a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===o(c)&&e===o(u)&&(g?(y(E),E=-1):g=!0,T(b,i-a))):(e.sortIndex=s,n(c,e),m||h||(m=!0,I(S))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},982:(e,t,n)=>{"use strict";e.exports=n(463)},127:(e,t,n)=>{"use strict";var o=n(848),r=n(540),i=n(338);function a(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=a(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var s={value:()=>{}};function l(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new c(o)}function c(e){this._=e}function u(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function d(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=s,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}c.prototype=l.prototype={constructor:c,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)r[n]=d(r[n],e.name,t);else if(null==t)for(n in r)r[n]=d(r[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=u(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new c(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};const p=l;function f(){}function h(e){return null==e?f:function(){return this.querySelector(e)}}function m(){return[]}function g(e){return null==e?m:function(){return this.querySelectorAll(e)}}function v(e){return function(){return this.matches(e)}}function y(e){return function(t){return t.matches(e)}}var x=Array.prototype.find;function w(){return this.firstElementChild}var b=Array.prototype.filter;function S(){return Array.from(this.children)}function N(e){return new Array(e.length)}function C(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function j(e,t,n,o,r,i){for(var a,s=0,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new C(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function E(e,t,n,o,r,i,a){var s,l,c,u=new Map,d=t.length,p=i.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?r[s]=l:u.set(c,l));for(s=0;s<p;++s)c=a.call(e,i[s],s,i)+"",(l=u.get(c))?(o[s]=l,l.__data__=i[s],u.delete(c)):n[s]=new C(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(f[s])===l&&(r[s]=l)}function M(e){return e.__data__}function k(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function _(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}C.prototype={constructor:C,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var O="http://www.w3.org/1999/xhtml";const R={svg:"http://www.w3.org/2000/svg",xhtml:O,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function A(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),R.hasOwnProperty(t)?{space:R[t],local:e}:e}function I(e){return function(){this.removeAttribute(e)}}function T(e){return function(){this.removeAttributeNS(e.space,e.local)}}function D(e,t){return function(){this.setAttribute(e,t)}}function P(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function L(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function z(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function B(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function H(e){return function(){this.style.removeProperty(e)}}function F(e,t,n){return function(){this.style.setProperty(e,t,n)}}function V(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Z(e,t){return e.style.getPropertyValue(t)||B(e).getComputedStyle(e,null).getPropertyValue(t)}function W(e){return function(){delete this[e]}}function q(e,t){return function(){this[e]=t}}function $(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Y(e){return e.trim().split(/^|\s+/)}function X(e){return e.classList||new U(e)}function U(e){this._node=e,this._names=Y(e.getAttribute("class")||"")}function K(e,t){for(var n=X(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function G(e,t){for(var n=X(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function J(e){return function(){K(this,e)}}function Q(e){return function(){G(this,e)}}function ee(e,t){return function(){(t.apply(this,arguments)?K:G)(this,e)}}function te(){this.textContent=""}function ne(e){return function(){this.textContent=e}}function oe(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function re(){this.innerHTML=""}function ie(e){return function(){this.innerHTML=e}}function ae(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function se(){this.nextSibling&&this.parentNode.appendChild(this)}function le(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ce(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===O&&t.documentElement.namespaceURI===O?t.createElement(e):t.createElementNS(n,e)}}function ue(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function de(e){var t=A(e);return(t.local?ue:ce)(t)}function pe(){return null}function fe(){var e=this.parentNode;e&&e.removeChild(this)}function he(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function me(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ge(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function ve(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ye(e,t,n){var o=B(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function xe(e,t){return function(){return ye(this,e,t)}}function we(e,t){return function(){return ye(this,e,t.apply(this,arguments))}}U.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var be=[null];function Se(e,t){this._groups=e,this._parents=t}function Ne(){return new Se([[document.documentElement]],be)}Se.prototype=Ne.prototype={constructor:Se,select:function(e){"function"!=typeof e&&(e=h(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,s=t[r],l=s.length,c=o[r]=new Array(l),u=0;u<l;++u)(i=s[u])&&(a=e.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),c[u]=a);return new Se(o,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):g(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,c=0;c<l;++c)(a=s[c])&&(o.push(e.call(a,a.__data__,c,s)),r.push(a));return new Se(o,r)},selectChild:function(e){return this.select(null==e?w:function(e){return function(){return x.call(this.children,e)}}("function"==typeof e?e:y(e)))},selectChildren:function(e){return this.selectAll(null==e?S:function(e){return function(){return b.call(this.children,e)}}("function"==typeof e?e:y(e)))},filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,l=o[r]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new Se(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,M);var n,o=t?E:j,r=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var d=r[u],p=i[u],f=p.length,h=k(e.call(d,d&&d.__data__,u,r)),m=h.length,g=l[u]=new Array(m),v=s[u]=new Array(m);o(d,p,g,v,c[u]=new Array(f),h,t);for(var y,x,w=0,b=0;w<m;++w)if(y=g[w]){for(w>=b&&(b=w+1);!(x=v[b])&&++b<m;);y._next=x||null}}return(s=new Se(s,r))._enter=l,s._exit=c,s},enter:function(){return new Se(this._enter||this._groups.map(N),this._parents)},exit:function(){return new Se(this._exit||this._groups.map(N),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var c,u=n[l],d=o[l],p=u.length,f=s[l]=new Array(p),h=0;h<p;++h)(c=u[h]||d[h])&&(f[h]=c);for(;l<r;++l)s[l]=n[l];return new Se(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=_);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,s=n[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new Se(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,s=i.length;a<s;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=A(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?T:I:"function"==typeof t?n.local?z:L:n.local?P:D)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?H:"function"==typeof t?V:F)(e,t,null==n?"":n)):Z(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?W:"function"==typeof t?$:q)(e,t)):this.node()[e]},classed:function(e,t){var n=Y(e+"");if(arguments.length<2){for(var o=X(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?ee:t?J:Q)(n,t))},text:function(e){return arguments.length?this.each(null==e?te:("function"==typeof e?oe:ne)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?re:("function"==typeof e?ae:ie)(e)):this.node().innerHTML},raise:function(){return this.each(se)},lower:function(){return this.each(le)},append:function(e){var t="function"==typeof e?e:de(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:de(e),o=null==t?pe:"function"==typeof t?t:h(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(fe)},clone:function(e){return this.select(e?me:he)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?ve:ge,o=0;o<a;++o)this.each(s(i[o],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(o=0,l=s[c];o<a;++o)if((r=i[o]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?we:xe)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const Ce=Ne;function je(e){return"string"==typeof e?new Se([[document.querySelector(e)]],[document.documentElement]):new Se([[e]],be)}function Ee(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Me={passive:!1},ke={capture:!0,passive:!1};function _e(e){e.stopImmediatePropagation()}function Oe(e){e.preventDefault(),e.stopImmediatePropagation()}function Re(e){var t=e.document.documentElement,n=je(e).on("dragstart.drag",Oe,ke);"onselectstart"in t?n.on("selectstart.drag",Oe,ke):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ae(e,t){var n=e.document.documentElement,o=je(e).on("dragstart.drag",null);t&&(o.on("click.drag",Oe,ke),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ie=e=>()=>e;function Te(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function De(e){return!e.ctrlKey&&!e.button}function Pe(){return this.parentNode}function Le(e,t){return null==t?{x:e.x,y:e.y}:t}function ze(){return navigator.maxTouchPoints||"ontouchstart"in this}function Be(){var e,t,n,o,r=De,i=Pe,a=Le,s=ze,l={},c=p("start","drag","end"),u=0,d=0;function f(e){e.on("mousedown.drag",h).filter(s).on("touchstart.drag",v).on("touchmove.drag",y,Me).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,s){if(!o&&r.call(this,a,s)){var l=w(this,i.call(this,a,s),a,s,"mouse");l&&(je(a.view).on("mousemove.drag",m,ke).on("mouseup.drag",g,ke),Re(a.view),_e(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function m(o){if(Oe(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}l.mouse("drag",o)}function g(e){je(e.view).on("mousemove.drag mouseup.drag",null),Ae(e.view,n),Oe(e),l.mouse("end",e)}function v(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,s=i.call(this,e,t),l=a.length;for(n=0;n<l;++n)(o=w(this,s,e,t,a[n].identifier,a[n]))&&(_e(e),o("start",e,a[n]))}}function y(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=l[o[t].identifier])&&(Oe(e),n("drag",e,o[t]))}function x(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=l[r[t].identifier])&&(_e(e),n("end",e,r[t]))}function w(e,t,n,o,r,i){var s,d,p,h=c.copy(),m=Ee(i||n,t);if(null!=(p=a.call(e,new Te("beforestart",{sourceEvent:n,target:f,identifier:r,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:h}),o)))return s=p.x-m[0]||0,d=p.y-m[1]||0,function n(i,a,c){var g,v=m;switch(i){case"start":l[r]=n,g=u++;break;case"end":delete l[r],--u;case"drag":m=Ee(c||a,t),g=u}h.call(i,e,new Te(i,{sourceEvent:a,subject:p,target:f,identifier:r,active:g,x:m[0]+s,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:h}),o)}}return f.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ie(!!e),f):r},f.container=function(e){return arguments.length?(i="function"==typeof e?e:Ie(e),f):i},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:Ie(e),f):a},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Ie(!!e),f):s},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function He(e){return((e=Math.exp(e))+1/e)/2}Te.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const Fe=function e(t,n,o){function r(e,r){var i,a,s=e[0],l=e[1],c=e[2],u=r[0],d=r[1],p=r[2],f=u-s,h=d-l,m=f*f+h*h;if(m<1e-12)a=Math.log(p/c)/t,i=function(e){return[s+e*f,l+e*h,c*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),v=(p*p-c*c+o*m)/(2*c*n*g),y=(p*p-c*c-o*m)/(2*p*n*g),x=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(y*y+1)-y);a=(w-x)/t,i=function(e){var o,r=e*a,i=He(x),u=c/(n*g)*(i*(o=t*r+x,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(x));return[s+u*f,l+u*h,c*i/He(t*r+x)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var Ve,Ze,We=0,qe=0,$e=0,Ye=1e3,Xe=0,Ue=0,Ke=0,Ge="object"==typeof performance&&performance.now?performance:Date,Je="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qe(){return Ue||(Je(et),Ue=Ge.now()+Ke)}function et(){Ue=0}function tt(){this._call=this._time=this._next=null}function nt(e,t,n){var o=new tt;return o.restart(e,t,n),o}function ot(){Ue=(Xe=Ge.now())+Ke,We=qe=0;try{!function(){Qe(),++We;for(var e,t=Ve;t;)(e=Ue-t._time)>=0&&t._call.call(void 0,e),t=t._next;--We}()}finally{We=0,function(){for(var e,t,n=Ve,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ve=t);Ze=e,it(o)}(),Ue=0}}function rt(){var e=Ge.now(),t=e-Xe;t>Ye&&(Ke-=t,Xe=e)}function it(e){We||(qe&&(qe=clearTimeout(qe)),e-Ue>24?(e<1/0&&(qe=setTimeout(ot,e-Ge.now()-Ke)),$e&&($e=clearInterval($e))):($e||(Xe=Ge.now(),$e=setInterval(rt,Ye)),We=1,Je(ot)))}function at(e,t,n){var o=new tt;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}tt.prototype=nt.prototype={constructor:tt,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Qe():+n)+(null==t?0:+t),this._next||Ze===this||(Ze?Ze._next=this:Ve=this,Ze=this),this._call=e,this._time=n,it()},stop:function(){this._call&&(this._call=null,this._time=1/0,it())}};var st=p("start","end","cancel","interrupt"),lt=[],ct=0,ut=2,dt=3,pt=5,ft=6;function ht(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(l){var c,u,d,p;if(1!==n.state)return s();for(c in r)if((p=r[c]).name===n.name){if(p.state===dt)return at(i);4===p.state?(p.state=ft,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=ft,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(at((function(){n.state===dt&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=ut,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ut){for(n.state=dt,o=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++u]=p);o.length=u+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=pt,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);n.state===pt&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var o in n.state=ft,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=nt((function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}),0,n.time)}(e,n,{name:t,index:o,group:r,on:st,tween:lt,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ct})}function mt(e,t){var n=vt(e,t);if(n.state>ct)throw new Error("too late; already scheduled");return n}function gt(e,t){var n=vt(e,t);if(n.state>dt)throw new Error("too late; already running");return n}function vt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yt(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>ut&&n.state<pt,n.state=ft,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function xt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var wt,bt=180/Math.PI,St={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nt(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*bt,skewX:Math.atan(l)*bt,scaleX:a,scaleY:s}}function Ct(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,o,r,i,a,s){if(e!==r||o!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:xt(e,r)},{i:l-2,x:xt(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:xt(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:xt(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,s,l),function(e,t,n,o,i,a){if(e!==n||t!==o){var s=i.push(r(i)+"scale(",null,",",null,")");a.push({i:s-4,x:xt(e,n)},{i:s-2,x:xt(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,o=l.length;++n<o;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var jt=Ct((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?St:Nt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Et=Ct((function(e){return null==e?St:(wt||(wt=document.createElementNS("http://www.w3.org/2000/svg","g")),wt.setAttribute("transform",e),(e=wt.transform.baseVal.consolidate())?Nt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):St)}),", ",")",")");function Mt(e,t){var n,o;return function(){var r=gt(this,e),i=r.tween;if(i!==n)for(var a=0,s=(o=n=i).length;a<s;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function kt(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=gt(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}i.tween=r}}function _t(e,t,n){var o=e._id;return e.each((function(){var e=gt(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return vt(e,o).value[t]}}function Ot(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rt(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function At(){}var It=.7,Tt=1/It,Dt="\\s*([+-]?\\d+)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zt=/^#([0-9a-f]{3,8})$/,Bt=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),Ht=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),Ft=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${Pt}\\)$`),Vt=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${Pt}\\)$`),Zt=new RegExp(`^hsl\\(${Pt},${Lt},${Lt}\\)$`),Wt=new RegExp(`^hsla\\(${Pt},${Lt},${Lt},${Pt}\\)$`),qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $t(){return this.rgb().formatHex()}function Yt(){return this.rgb().formatRgb()}function Xt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ut(t):3===n?new Jt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Kt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Kt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Bt.exec(e))?new Jt(t[1],t[2],t[3],1):(t=Ht.exec(e))?new Jt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ft.exec(e))?Kt(t[1],t[2],t[3],t[4]):(t=Vt.exec(e))?Kt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Zt.exec(e))?rn(t[1],t[2]/100,t[3]/100,1):(t=Wt.exec(e))?rn(t[1],t[2]/100,t[3]/100,t[4]):qt.hasOwnProperty(e)?Ut(qt[e]):"transparent"===e?new Jt(NaN,NaN,NaN,0):null}function Ut(e){return new Jt(e>>16&255,e>>8&255,255&e,1)}function Kt(e,t,n,o){return o<=0&&(e=t=n=NaN),new Jt(e,t,n,o)}function Gt(e,t,n,o){return 1===arguments.length?((r=e)instanceof At||(r=Xt(r)),r?new Jt((r=r.rgb()).r,r.g,r.b,r.opacity):new Jt):new Jt(e,t,n,null==o?1:o);var r}function Jt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function Qt(){return`#${on(this.r)}${on(this.g)}${on(this.b)}`}function en(){const e=tn(this.opacity);return`${1===e?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${1===e?")":`, ${e})`}`}function tn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function on(e){return((e=nn(e))<16?"0":"")+e.toString(16)}function rn(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new sn(e,t,n,o)}function an(e){if(e instanceof sn)return new sn(e.h,e.s,e.l,e.opacity);if(e instanceof At||(e=Xt(e)),!e)return new sn;if(e instanceof sn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(a=t===i?(n-o)/s+6*(n<o):n===i?(o-t)/s+2:(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new sn(a,s,l,e.opacity)}function sn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function ln(e){return(e=(e||0)%360)<0?e+360:e}function cn(e){return Math.max(0,Math.min(1,e||0))}function un(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function dn(e,t,n,o,r){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*o+a*r)/6}Ot(At,Xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$t,formatHex:$t,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return an(this).formatHsl()},formatRgb:Yt,toString:Yt}),Ot(Jt,Gt,Rt(At,{brighter(e){return e=null==e?Tt:Math.pow(Tt,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?It:Math.pow(It,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(nn(this.r),nn(this.g),nn(this.b),tn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qt,formatHex:Qt,formatHex8:function(){return`#${on(this.r)}${on(this.g)}${on(this.b)}${on(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:en,toString:en})),Ot(sn,(function(e,t,n,o){return 1===arguments.length?an(e):new sn(e,t,n,null==o?1:o)}),Rt(At,{brighter(e){return e=null==e?Tt:Math.pow(Tt,e),new sn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?It:Math.pow(It,e),new sn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Jt(un(e>=240?e-240:e+120,r,o),un(e,r,o),un(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new sn(ln(this.h),cn(this.s),cn(this.l),tn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tn(this.opacity);return`${1===e?"hsl(":"hsla("}${ln(this.h)}, ${100*cn(this.s)}%, ${100*cn(this.l)}%${1===e?")":`, ${e})`}`}}));const pn=e=>()=>e;function fn(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):pn(isNaN(e)?t:e)}const hn=function e(t){var n=function(e){return 1==(e=+e)?fn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):pn(isNaN(t)?n:t)}}(t);function o(e,t){var o=n((e=Gt(e)).r,(t=Gt(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=fn(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function mn(e){return function(t){var n,o,r=t.length,i=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)o=Gt(t[n]),i[n]=o.r||0,a[n]=o.g||0,s[n]=o.b||0;return i=e(i),a=e(a),s=e(s),o.opacity=1,function(e){return o.r=i(e),o.g=a(e),o.b=s(e),o+""}}}mn((function(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[o],i=e[o+1],a=o>0?e[o-1]:2*r-i,s=o<t-1?e[o+2]:2*i-r;return dn((n-o/t)*t,a,r,i,s)}})),mn((function(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),r=e[(o+t-1)%t],i=e[o%t],a=e[(o+1)%t],s=e[(o+2)%t];return dn((n-o/t)*t,r,i,a,s)}}));var gn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vn=new RegExp(gn.source,"g");function yn(e,t){var n,o,r,i=gn.lastIndex=vn.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=gn.exec(e))&&(o=vn.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:xt(n,o)})),i=vn.lastIndex;return i<t.length&&(r=t.slice(i),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,o=0;o<t;++o)s[(n=l[o]).i]=n.x(e);return s.join("")})}function xn(e,t){var n;return("number"==typeof t?xt:t instanceof Xt?hn:(n=Xt(t))?(t=n,hn):yn)(e,t)}function wn(e){return function(){this.removeAttribute(e)}}function bn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Nn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Cn(e,t,n){var o,r,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,l));this.removeAttribute(e)}}function jn(e,t,n){var o,r,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,l));this.removeAttributeNS(e.space,e.local)}}function En(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Mn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function kn(e,t){return function(){mt(this,e).delay=+t.apply(this,arguments)}}function _n(e,t){return t=+t,function(){mt(this,e).delay=t}}function On(e,t){return function(){gt(this,e).duration=+t.apply(this,arguments)}}function Rn(e,t){return t=+t,function(){gt(this,e).duration=t}}var An=Ce.prototype.constructor;function In(e){return function(){this.style.removeProperty(e)}}var Tn=0;function Dn(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Pn(){return++Tn}var Ln=Ce.prototype;Dn.prototype=function(e){return Ce().transition(e)}.prototype={constructor:Dn,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=h(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s,l,c=o[a],u=c.length,d=i[a]=new Array(u),p=0;p<u;++p)(s=c[p])&&(l=e.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),d[p]=l,ht(d[p],t,n,p,d,vt(s,n)));return new Dn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=g(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l,c=o[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var p,f=e.call(l,l.__data__,d,c),h=vt(l,n),m=0,v=f.length;m<v;++m)(p=f[m])&&ht(p,t,n,m,f,h);i.push(f),a.push(l)}return new Dn(i,a,t,n)},selectChild:Ln.selectChild,selectChildren:Ln.selectChildren,filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,l=o[r]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new Dn(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l,c=t[s],u=n[s],d=c.length,p=a[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<o;++s)a[s]=t[s];return new Dn(a,this._parents,this._name,this._id)},selection:function(){return new An(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Pn(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=vt(a,t);ht(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Dn(o,this._parents,e,n)},call:Ln.call,nodes:Ln.nodes,node:Ln.node,size:Ln.size,empty:Ln.empty,each:Ln.each,on:function(e,t){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?mt:gt;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=A(e),o="transform"===n?Et:xn;return this.attrTween(e,"function"==typeof t?(n.local?jn:Cn)(n,o,_t(this,"attr."+e,t)):null==t?(n.local?bn:wn)(n):(n.local?Nn:Sn)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=A(e);return this.tween(n,(o.local?En:Mn)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?jt:xn;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=Z(this,e),a=(this.style.removeProperty(e),Z(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,In(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=Z(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Z(this,e)),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}(e,o,_t(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,s="end."+a;return function(){var l=gt(this,e),c=l.on,u=null==l.value[a]?i||(i=In(t)):void 0;c===n&&r===u||(o=(n=c).copy()).on(s,r=u),l.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=Z(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(_t(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=vt(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?Mt:kt)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?kn:_n)(t,e)):vt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?On:Rn)(t,e)):vt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){gt(this,e).ease=t}}(t,e)):vt(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;gt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var s={value:a},l={value:function(){0==--r&&i()}};n.each((function(){var n=gt(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:Ln[Symbol.iterator]};var zn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Bn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Ce.prototype.interrupt=function(e){return this.each((function(){yt(this,e)}))},Ce.prototype.transition=function(e){var t,n;e instanceof Dn?(t=e._id,e=e._name):(t=Pn(),(n=zn).time=Qe(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],l=s.length,c=0;c<l;++c)(a=s[c])&&ht(a,e,t,c,s,n||Bn(a,t));return new Dn(o,this._parents,e,t)};const Hn=e=>()=>e;function Fn(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Vn(e,t,n){this.k=e,this.x=t,this.y=n}Vn.prototype={constructor:Vn,scale:function(e){return 1===e?this:new Vn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Vn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zn=new Vn(1,0,0);function Wn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Zn;return e.__zoom}function qn(e){e.stopImmediatePropagation()}function $n(e){e.preventDefault(),e.stopImmediatePropagation()}function Yn(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Xn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Un(){return this.__zoom||Zn}function Kn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Gn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jn(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Qn(){var e,t,n,o=Yn,r=Xn,i=Jn,a=Kn,s=Gn,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Fe,f=p("start","zoom","end"),h=500,m=150,g=0,v=10;function y(e){e.property("__zoom",Un).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",k).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Vn(t,e.x,e.y)}function w(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new Vn(e.k,o,r)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function S(e,t,n,o){e.on("start.zoom",(function(){N(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){N(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=N(e,i).event(o),s=r.apply(e,i),l=null==n?b(s):"function"==typeof n?n.apply(e,i):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,p="function"==typeof t?t.apply(e,i):t,f=d(u.invert(l).concat(c/u.k),p.invert(l).concat(c/p.k));return function(e){if(1===e)e=p;else{var t=f(e),n=c/t[2];e=new Vn(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function N(e,t,n){return!n&&e.__zooming||new C(e,t)}function C(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function j(e,...t){if(o.apply(this,arguments)){var n=N(this,t).event(e),r=this.__zoom,s=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,a.apply(this,arguments)))),u=Ee(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=r.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(r.k===s)return;n.mouse=[u,r.invert(u)],yt(this),n.start()}$n(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),m),n.zoom("mouse",i(w(x(r,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function E(e,...t){if(!n&&o.apply(this,arguments)){var r=e.currentTarget,a=N(this,t,!0).event(e),s=je(e.view).on("mousemove.zoom",(function(e){if($n(e),!a.moved){var t=e.clientX-u,n=e.clientY-d;a.moved=t*t+n*n>g}a.event(e).zoom("mouse",i(w(a.that.__zoom,a.mouse[0]=Ee(e,r),a.mouse[1]),a.extent,c))}),!0).on("mouseup.zoom",(function(e){s.on("mousemove.zoom mouseup.zoom",null),Ae(e.view,a.moved),$n(e),a.event(e).end()}),!0),l=Ee(e,r),u=e.clientX,d=e.clientY;Re(e.view),qn(e),a.mouse=[l,this.__zoom.invert(l)],yt(this),a.start()}}function M(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Ee(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),d=i(w(x(n,l),a,s),r.apply(this,t),c);$n(e),u>0?je(this).transition().duration(u).call(S,d,a,e):je(this).call(y.transform,d,a,e)}}function k(n,...r){if(o.apply(this,arguments)){var i,a,s,l,c=n.touches,u=c.length,d=N(this,r,n.changedTouches.length===u).event(n);for(qn(n),a=0;a<u;++a)l=[l=Ee(s=c[a],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),h)),yt(this),d.start())}}function _(e,...t){if(this.__zooming){var n,o,r,a,s=N(this,t).event(e),l=e.changedTouches,u=l.length;for($n(e),n=0;n<u;++n)r=Ee(o=l[n],this),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=r);if(o=s.that.__zoom,s.touch1){var d=s.touch0[0],p=s.touch0[1],f=s.touch1[0],h=s.touch1[1],m=(m=f[0]-d[0])*m+(m=f[1]-d[1])*m,g=(g=h[0]-p[0])*g+(g=h[1]-p[1])*g;o=x(o,Math.sqrt(m/g)),r=[(d[0]+f[0])/2,(d[1]+f[1])/2],a=[(p[0]+h[0])/2,(p[1]+h[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(w(o,r,a),s.extent,c))}}function O(e,...o){if(this.__zooming){var r,i,a=N(this,o).event(e),s=e.changedTouches,l=s.length;for(qn(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),h),r=0;r<l;++r)i=s[r],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Ee(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<v)){var c=je(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return y.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",Un),e!==r?S(e,t,n,o):r.interrupt().each((function(){N(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,o){y.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},y.scaleTo=function(e,t,n,o){y.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?b(e):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return i(w(x(o,l),a,s),e,c)}),n,o)},y.translateBy=function(e,t,n,o){y.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,o)},y.translateTo=function(e,t,n,o,a){y.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,s=null==o?b(e):"function"==typeof o?o.apply(this,arguments):o;return i(Zn.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),o,a)},C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=je(this.that).datum();f.call(e,this.that,new Fn(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:f}),t)}},y.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Hn(+e),y):a},y.filter=function(e){return arguments.length?(o="function"==typeof e?e:Hn(!!e),y):o},y.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Hn(!!e),y):s},y.extent=function(e){return arguments.length?(r="function"==typeof e?e:Hn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):r},y.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],y):[l[0],l[1]]},y.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],y):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},y.constrain=function(e){return arguments.length?(i=e,y):i},y.duration=function(e){return arguments.length?(u=+e,y):u},y.interpolate=function(e){return arguments.length?(d=e,y):d},y.on=function(){var e=f.on.apply(f,arguments);return e===f?y:e},y.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,y):Math.sqrt(g)},y.tapDistance=function(e){return arguments.length?(v=+e,y):v},y}Wn.prototype=Vn.prototype;const eo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},to=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],no=["Enter"," ","Escape"];var oo,ro,io;!function(e){e.Strict="strict",e.Loose="loose"}(oo||(oo={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(ro||(ro={})),function(e){e.Partial="partial",e.Full="full"}(io||(io={}));const ao={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var so,lo,co,uo;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(so||(so={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(lo||(lo={})),(uo=co||(co={})).Left="left",uo.Top="top",uo.Right="right",uo.Bottom="bottom";const po={[co.Left]:co.Right,[co.Right]:co.Left,[co.Top]:co.Bottom,[co.Bottom]:co.Top};function fo(e){return null===e?null:e?"valid":"invalid"}const ho=e=>"id"in e&&"source"in e&&"target"in e,mo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),go=(e,t,n)=>{if(!e.id)return[];const o=new Set;return n.forEach((t=>{t.source===e.id&&o.add(t.target)})),t.filter((e=>o.has(e.id)))},vo=(e,t,n)=>{if(!e.id)return[];const o=new Set;return n.forEach((t=>{t.target===e.id&&o.add(t.source)})),t.filter((e=>o.has(e.id)))},yo=(e,t=[0,0])=>{const{width:n,height:o}=qo(e),r=e.origin??t,i=n*r[0],a=o*r[1];return{x:e.position.x-i,y:e.position.y-a}},xo=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=Io(e);n=_o(n,t)}})),Ro(n)},wo=(e,t,[n,o,r]=[0,0,1],i=!1,a=!1)=>{const s={...Ho(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:o=!1}=t;if(a&&!n||o)continue;const r=e.width??t.width??t.initialWidth??null,c=e.height??t.height??t.initialHeight??null,u=Do(s,Ao(t)),d=(r??0)*(c??0),p=i&&u>0;(!t.internals.handleBounds||p||u>=d||t.dragging)&&l.push(t)}return l},bo=(e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))};function So(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!e.measured.width||!e.measured.height||!t?.includeHiddenNodes&&e.hidden||o&&!o.has(e.id)||n.set(e.id,e)})),n}async function No({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},a){if(0===e.size)return Promise.resolve(!1);const s=xo(e),l=Vo(s,t,n,a?.minZoom??r,a?.maxZoom??i,a?.padding??.1);return await o.setViewport(l,{duration:a?.duration}),Promise.resolve(!0)}function Co({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},u=a.origin??o;let d=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.measured?.width??0),t[1][1]-(e.measured?.height??0)]]:t}(a,a.extent||r);if("parent"!==a.extent||a.expandParent)s&&Wo(a.extent)&&(d=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);else if(s){const e=a.measured.width,t=a.measured.height,n=s.measured.width,o=s.measured.height;e&&t&&n&&o&&(d=[[l,c],[l+n-e,c+o-t]])}else i?.("005",eo.error005());const p=Wo(d)?Eo(t,d):t;return{position:{x:p.x-l+a.measured.width*u[0],y:p.y-c+a.measured.height*u[1]},positionAbsolute:p}}const jo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Eo=(e={x:0,y:0},t)=>({x:jo(e.x,t[0][0],t[1][0]),y:jo(e.y,t[0][1],t[1][1])}),Mo=(e,t,n)=>e<t?jo(Math.abs(e-t),1,t)/t:e>n?-jo(Math.abs(e-n),1,t)/t:0,ko=(e,t,n=15,o=40)=>[Mo(e.x,o,t.width-o)*n,Mo(e.y,o,t.height-o)*n],_o=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Oo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Ro=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Ao=(e,t=[0,0])=>{const{x:n,y:o}=mo(e)?e.internals.positionAbsolute:yo(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Io=(e,t=[0,0])=>{const{x:n,y:o}=mo(e)?e.internals.positionAbsolute:yo(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},To=(e,t)=>Ro(_o(Oo(e),Oo(t))),Do=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Po=e=>Lo(e.width)&&Lo(e.height)&&Lo(e.x)&&Lo(e.y),Lo=e=>!isNaN(e)&&isFinite(e),zo=(e,t)=>{},Bo=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ho=({x:e,y:t},[n,o,r],i=!1,a=[1,1])=>{const s={x:(e-n)/r,y:(t-o)/r};return i?Bo(s,a):s},Fo=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),Vo=(e,t,n,o,r,i)=>{const a=t/(e.width*(1+i)),s=n/(e.height*(1+i)),l=Math.min(a,s),c=jo(l,o,r);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},Zo=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function Wo(e){return void 0!==e&&"parent"!==e}function qo(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function $o(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function Yo(e,t={width:0,height:0},n,o,r){let i=n;const a={...e};for(;i;){const e=o.get(i);if(i=e?.parentId,e){const n=e.origin||r;a.x+=e.internals.positionAbsolute.x-(t.width??0)*n[0],a.y+=e.internals.positionAbsolute.y-(t.height??0)*n[1]}}return a}function Xo(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o}){const{x:r,y:i}=er(e),a=Ho({x:r,y:i},o),{x:s,y:l}=n?Bo(a,t):a;return{xSnapped:s,ySnapped:l,...a}}const Uo=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ko=e=>e.getRootNode?.()||window?.document,Go=["INPUT","SELECT","TEXTAREA"];function Jo(e){const t=e.composedPath?.()?.[0]||e.target;return Go.includes(t?.nodeName)||t?.hasAttribute("contenteditable")||!!t?.closest(".nokey")}const Qo=e=>"clientX"in e,er=(e,t)=>{const n=Qo(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},tr=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...Uo(t)}})):null};function nr({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=.125*e+.375*r+.375*a+.125*n,c=.125*t+.375*i+.375*s+.125*o;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function or(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function rr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case co.Left:return[t-or(t-o,i),n];case co.Right:return[t+or(o-t,i),n];case co.Top:return[t,n-or(n-r,i)];case co.Bottom:return[t,n+or(r-n,i)]}}function ir({sourceX:e,sourceY:t,sourcePosition:n=co.Bottom,targetX:o,targetY:r,targetPosition:i=co.Top,curvature:a=.25}){const[s,l]=rr({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[c,u]=rr({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[d,p,f,h]=nr({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${o},${r}`,d,p,f,h]}function ar({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2;return[i,o<t?o+a:o-a,r,a]}function sr({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=_o(Io(e),Io(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return Do(a,Ro(i))>0}const lr=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`;function cr({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,a,s]=ar({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,s]}const ur={[co.Left]:{x:-1,y:0},[co.Right]:{x:1,y:0},[co.Top]:{x:0,y:-1},[co.Bottom]:{x:0,y:1}},dr=({source:e,sourcePosition:t=co.Bottom,target:n})=>t===co.Left||t===co.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},pr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function fr({sourceX:e,sourceY:t,sourcePosition:n=co.Bottom,targetX:o,targetY:r,targetPosition:i=co.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[u,d,p,f,h]=function({source:e,sourcePosition:t=co.Bottom,target:n,targetPosition:o=co.Top,center:r,offset:i}){const a=ur[t],s=ur[o],l={x:e.x+a.x*i,y:e.y+a.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},u=dr({source:l,sourcePosition:t,target:c}),d=0!==u.x?"x":"y",p=u[d];let f,h,m=[];const g={x:0,y:0},v={x:0,y:0},[y,x,w,b]=ar({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]==-1){f=r.x??y,h=r.y??x;const e=[{x:f,y:l.y},{x:f,y:c.y}],t=[{x:l.x,y:h},{x:c.x,y:h}];m=a[d]===p?"x"===d?e:t:"x"===d?t:e}else{const r=[{x:l.x,y:c.y}],u=[{x:c.x,y:l.y}];if(m="x"===d?a.x===p?u:r:a.y===p?r:u,t===o){const t=Math.abs(e[d]-n[d]);if(t<=i){const o=Math.min(i-1,i-t);a[d]===p?g[d]=(l[d]>e[d]?-1:1)*o:v[d]=(c[d]>n[d]?-1:1)*o}}if(t!==o){const e="x"===d?"y":"x",t=a[d]===s[e],n=l[e]>c[e],o=l[e]<c[e];(1===a[d]&&(!t&&n||t&&o)||1!==a[d]&&(!t&&o||t&&n))&&(m="x"===d?r:u)}const y={x:l.x+g.x,y:l.y+g.y},x={x:c.x+v.x,y:c.y+v.y};Math.max(Math.abs(y.x-m[0].x),Math.abs(x.x-m[0].x))>=Math.max(Math.abs(y.y-m[0].y),Math.abs(x.y-m[0].y))?(f=(y.x+x.x)/2,h=m[0].y):(f=m[0].x,h=(y.y+x.y)/2)}return[[e,{x:l.x+g.x,y:l.y+g.y},...m,{x:c.x+v.x,y:c.y+v.y},n],f,h,w,b]}({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:s,y:l},offset:c});return[u.reduce(((e,t,n)=>{let o="";return o=n>0&&n<u.length-1?function(e,t,n,o){const r=Math.min(pr(e,t)/2,pr(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+r*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+r*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${i},${a+r*(e.y<n.y?-1:1)}Q ${i},${a} ${i+r*s},${a}`}(u[n-1],t,u[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+o}),""),d,p,f,h]}function hr(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function mr(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o);return{source:t,target:n}}function gr(e,t,n=co.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??qo(e);if(o)return{x:r+a/2,y:i+s/2};switch(t?.position??n){case co.Top:return{x:r+a/2,y:i};case co.Right:return{x:r+a,y:i+s/2};case co.Bottom:return{x:r+a/2,y:i+s};case co.Left:return{x:r,y:i+s/2}}}function vr(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function yr(e,t){return e?"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`:""}const xr={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}},wr={...xr,checkEquality:!0};function br(e,t,n,o){const r={...wr,...o},i=new Map(t);t.clear(),n.clear();const a=o?.elevateNodesOnSelect?1e3:0;for(const s of e){let e=i.get(s.id);r.checkEquality&&s===e?.internals.userNode||(e={...r.defaults,...s,measured:{width:s.measured?.width,height:s.measured?.height},internals:{positionAbsolute:yo(s,r.nodeOrigin),handleBounds:s.measured?e?.internals.handleBounds:void 0,z:Nr(s,a),userNode:s}}),t.set(s.id,e),s.parentId&&Sr(e,t,n,o)}}function Sr(e,t,n,o){const r={...xr,...o},i=e.parentId,a=t.get(i);if(!a)return void console.warn(`Parent node ${i} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);const s=n.get(i);s?s.set(e.id,e):n.set(i,new Map([[e.id,e]]));const l=o?.elevateNodesOnSelect?1e3:0,{x:c,y:u,z:d}=function(e,t,n,o){const r=yo(e,n),i=Nr(e,o),a=t.internals.z??0;return{x:t.internals.positionAbsolute.x+r.x,y:t.internals.positionAbsolute.y+r.y,z:a>i?a:i}}(e,a,r.nodeOrigin,l),p=e.internals.positionAbsolute,f=c!==p.x||u!==p.y;(f||d!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:f?{x:c,y:u}:p,z:d})}function Nr(e,t){return(Lo(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Cr(e,t,n,o=[0,0]){const r=[],i=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const o=i.get(n.parentId)?.expandedRect??Ao(e),r=To(o,n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach((({expandedRect:t,parent:i},a)=>{const s=i.internals.positionAbsolute,l=qo(i),c=i.origin??o,u=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,d=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,p=Math.max(l.width,Math.round(t.width)),f=Math.max(l.height,Math.round(t.height)),h=(p-l.width)*c[0],m=(f-l.height)*c[1];(u>0||d>0||h||m)&&(r.push({id:a,type:"position",position:{x:i.position.x-u+h,y:i.position.y-d+m}}),n.get(a)?.forEach((t=>{e.some((e=>e.id===t.id))||r.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+d}})}))),(l.width<t.width||l.height<t.height||u||d)&&r.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:p+(u?c[0]*u-h:0),height:f+(d?c[1]*d-m:0)}})})),r}function jr(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:a=null}=o,s=`${n}-source-${i}`,l=`${r}-target-${a}`,c=e.get(s)||new Map,u=e.get(l)||new Map,d={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:a};t.set(o.id,o),e.set(s,c.set(`${r}-${a}`,d)),e.set(l,u.set(`${n}-${i}`,d))}}function Er(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Er(n,t))}function Mr(e,t,n){let o=e;do{if(o?.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function kr({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[e,i]of t){const t=n.get(e)?.internals.userNode;t&&r.push({...t,position:i.position,dragging:o})}if(!e)return[r[0],r];const i=n.get(e).internals.userNode;return[{...i,position:t.get(e)?.position||i.position,dragging:o},r]}function _r(e,t,n,o,r=!1){const i=o.get(e);if(!i)return null;const a=i.internals.handleBounds?.[t],s=(n?a?.find((e=>e.id===n)):a?.[0])??null;return s&&r?{...s,...gr(i,s,s.position,!0)}:s}function Or(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const Rr=()=>!0;function Ar(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:c=Rr,nodeLookup:u}){const d="target"===i,p=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:f,y:h}=er(e),m=a.elementFromPoint(f,h),g=m?.classList.contains(`${s}-flow__handle`)?m:p,v={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const e=Or(void 0,g),t=g.getAttribute("data-nodeid"),i=g.getAttribute("data-handleid"),a=g.classList.contains("connectable"),s=g.classList.contains("connectableend");if(!t||!e)return v;const l={source:d?t:o,sourceHandle:d?i:r,target:d?o:t,targetHandle:d?r:i};v.connection=l;const p=a&&s&&(n===oo.Strict?d&&"source"===e||!d&&"target"===e:t!==o||i!==r);v.isValid=p&&c(l),v.toHandle=_r(t,e,i,u,!1)}return v}const Ir={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:d,panBy:p,cancelConnection:f,onConnectStart:h,onConnect:m,onConnectEnd:g,isValidConnection:v=Rr,onReconnectEnd:y,updateConnection:x,getTransform:w,getFromHandle:b,autoPanSpeed:S}){const N=Ko(e.target);let C,j=0;const{x:E,y:M}=er(e),k=N?.elementFromPoint(E,M),_=Or(i,k),O=s?.getBoundingClientRect();if(!O||!_)return;const R=_r(r,_,o,l);if(!R)return;let A=er(e,O),I=!1,T=null,D=!1,P=null;function L(){if(!u||!O)return;const[e,t]=ko(A,O,S);p({x:e,y:t}),j=requestAnimationFrame(L)}const z={...R,nodeId:r,type:_,position:R.position},B=l.get(r),H={inProgress:!0,isValid:null,from:gr(B,z,co.Left,!0),fromHandle:z,fromPosition:z.position,fromNode:B,to:A,toHandle:null,toPosition:po[z.position],toNode:null};x(H);let F=H;function V(e){if(!b()||!z)return void Z(e);const i=w();A=er(e,O),C=function(e,t,n,o){let r=[],i=1/0;const a=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())Do(r,Ao(e))>0&&o.push(e);return o}(e,n,t+250);for(const n of a){const a=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const s of a){if(o.nodeId===s.nodeId&&o.type===s.type&&o.id===s.id)continue;const{x:a,y:l}=gr(n,s,s.position,!0),c=Math.sqrt(Math.pow(a-e.x,2)+Math.pow(l-e.y,2));c>t||(c<i?(r=[{...s,x:a,y:l}],i=c):c===i&&r.push({...s,x:a,y:l}))}}if(!r.length)return null;if(r.length>1){const e="source"===o.type?"target":"source";return r.find((t=>t.type===e))??r[0]}return r[0]}(Ho(A,i,!1,[1,1]),n,l,z),I||(L(),I=!0);const s=Ar(e,{handle:C,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:a?"target":"source",isValidConnection:v,doc:N,lib:c,flowId:d,nodeLookup:l});P=s.handleDomNode,T=s.connection,D=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!C,s.isValid);const u={...F,isValid:D,to:C&&D?Fo({x:C.x,y:C.y},i):A,toHandle:s.toHandle,toPosition:D&&s.toHandle?s.toHandle.position:po[z.position],toNode:s.toHandle?l.get(s.toHandle.nodeId):null};D&&C&&F.toHandle&&u.toHandle&&F.toHandle.type===u.toHandle.type&&F.toHandle.nodeId===u.toHandle.nodeId&&F.toHandle.id===u.toHandle.id&&F.to.x===u.to.x&&F.to.y===u.to.y||(x(u),F=u)}function Z(e){(C||P)&&T&&D&&m?.(T);const{inProgress:t,...n}=F,o={...n,toPosition:F.toHandle?F.toPosition:null};g?.(e,o),i&&y?.(e,o),f(),cancelAnimationFrame(j),I=!1,D=!1,T=null,P=null,N.removeEventListener("mousemove",V),N.removeEventListener("mouseup",Z),N.removeEventListener("touchmove",V),N.removeEventListener("touchend",Z)}h?.(e,{nodeId:r,handleId:o,handleType:_}),N.addEventListener("mousemove",V),N.addEventListener("mouseup",Z),N.addEventListener("touchmove",V),N.addEventListener("touchend",Z)},isValid:Ar},Tr=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Dr=e=>({x:e.x,y:e.y,zoom:e.k}),Pr=({x:e,y:t,zoom:n})=>Zn.translate(e,t).scale(n),Lr=(e,t)=>e.target.closest(`.${t}`),zr=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Br=(e,t=0,n=()=>{})=>{const o="number"==typeof t&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Hr=e=>{const t=e.ctrlKey&&Zo()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function Fr({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onTransformChange:c,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),f=Qn().clickDistance(!Lo(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),h=je(e).call(f);x({x:i.x,y:i.y,zoom:jo(i.zoom,t,n)},[[0,0],[p.width,p.height]],r);const m=h.on("wheel.zoom"),g=h.on("dblclick.zoom");function v(e,t){return h?new Promise((n=>{f?.transform(Br(h,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function y(){f.on("zoom",null)}async function x(e,t,n){const o=Pr(e),r=f?.constrain()(o,t,n);return r&&await v(r),new Promise((e=>e(r)))}return f.wheelDelta(Hr),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:r,panOnDrag:i,panOnScrollMode:p,panOnScrollSpeed:v,preventScrolling:x,zoomOnPinch:w,zoomOnScroll:b,zoomOnDoubleClick:S,zoomActivationKeyPressed:N,lib:C}){o&&!d.isZoomingOrPanning&&y();const j=!r||N||o?function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){if(!t&&"wheel"===o.type&&!o.ctrlKey||Lr(o,e))return null;o.preventDefault(),n.call(this,o,r)}}({noWheelClassName:e,preventScrolling:x,d3ZoomHandler:m}):function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Lr(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&a){const e=Ee(u),t=Hr(u),r=d*Math.pow(2,t);return void o.scaleTo(n,r,e,u)}const p=1===u.deltaMode?20:1;let f=r===ro.Vertical?0:u.deltaX*p,h=r===ro.Horizontal?0:u.deltaY*p;!Zo()&&u.shiftKey&&r!==ro.Vertical&&(f=u.deltaY*p,h=0),o.translateBy(n,-f/d*i,-h/d*i,{internal:!0});const m=Dr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s?.(u,m)),e.isPanScrolling&&(l?.(u,m),e.panScrollTimeout=setTimeout((()=>{c?.(u,m),e.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:e,d3Selection:h,d3Zoom:f,panOnScrollMode:p,panOnScrollSpeed:v,zoomOnPinch:w,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l});if(h.on("wheel.zoom",j,{passive:!1}),!o){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=Dr(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,"mousedown"===o.sourceEvent?.type&&t(!0),n&&n?.(o.sourceEvent,r)}}({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:s});f.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!(!n||!zr(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,Dr(i.transform))}}({zoomPanValues:d,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:c});f.on("zoom",t);const o=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return a=>{if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&zr(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Tr(e.prevViewport,a.transform))){const t=Dr(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout((()=>{r?.(a.sourceEvent,t)}),n?150:0)}}}({zoomPanValues:d,panOnDrag:i,panOnScroll:r,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:u});f.on("end",o)}const E=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return u=>{const d=e||t,p=n&&u.ctrlKey;if(1===u.button&&"mousedown"===u.type&&(Lr(u,`${c}-flow__node`)||Lr(u,`${c}-flow__edge`)))return!0;if(!(o||d||r||i||n))return!1;if(a)return!1;if(Lr(u,s)&&"wheel"===u.type)return!1;if(Lr(u,l)&&("wheel"!==u.type||r&&"wheel"===u.type&&!e))return!1;if(!n&&u.ctrlKey&&"wheel"===u.type)return!1;if(!n&&"touchstart"===u.type&&u.touches?.length>1)return u.preventDefault(),!1;if(!d&&!r&&!p&&"wheel"===u.type)return!1;if(!o&&("mousedown"===u.type||"touchstart"===u.type))return!1;if(Array.isArray(o)&&!o.includes(u.button)&&"mousedown"===u.type)return!1;const f=Array.isArray(o)&&o.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||"wheel"===u.type)&&f}}({zoomActivationKeyPressed:N,panOnDrag:i,zoomOnScroll:b,panOnScroll:r,zoomOnDoubleClick:S,zoomOnPinch:w,userSelectionActive:o,noPanClassName:t,noWheelClassName:e,lib:C});f.filter(E),S?h.on("dblclick.zoom",g):h.on("dblclick.zoom",null)},destroy:y,setViewport:async function(e,t){const n=Pr(e);return await v(n,t),new Promise((e=>e(n)))},setViewportConstrained:x,getViewport:function(){const e=h?Wn(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise((n=>{f?.scaleTo(Br(h,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise((n=>{f?.scaleBy(Br(h,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(h){const t=Pr(e),n=h.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||f?.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Lo(e)||e<0?0:e;f?.clickDistance(t)}}}var Vr,Zr;function Wr(e,t){return Math.max(0,t-e)}function qr(e,t){return Math.max(0,e-t)}function $r(e,t,n){return Math.max(0,t-e,e-n)}function Yr(e,t){return e?!t:t}(Zr=Vr||(Vr={})).Line="line",Zr.Handle="handle";const Xr={width:0,height:0,x:0,y:0},Ur={...Xr,pointerX:0,pointerY:0,aspectRatio:1};function Kr(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,s=n[0]*i,l=n[1]*a;return[[o-s,r-l],[o+i-s,r+a-l]]}var Gr=n(242);const Jr=e=>{let t;const n=new Set,o=(e,o)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=o?o:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,i);return i},{useDebugValue:Qr}=r,{useSyncExternalStoreWithSelector:ei}=Gr,ti=e=>e;function ni(e,t=ti,n){const o=ei(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Qr(o),o}const oi=(e,t)=>{const n=(e=>e?Jr(e):Jr)(e),o=(e,o=t)=>ni(n,e,o);return Object.assign(o,n),o};function ri(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var ii=n(961);const ai=(0,r.createContext)(null),si=ai.Provider,li=eo.error001();function ci(e,t){const n=(0,r.useContext)(ai);if(null===n)throw new Error(li);return ni(n,e,t)}function ui(){const e=(0,r.useContext)(ai);if(null===e)throw new Error(li);return(0,r.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const di={display:"none"},pi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},fi="react-flow__node-desc",hi="react-flow__edge-desc",mi="react-flow__aria-live",gi=e=>e.ariaLiveMessage;function vi({rfId:e}){const t=ci(gi);return(0,o.jsx)("div",{id:`${mi}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:pi,children:t})}function yi({rfId:e,disableKeyboardA11y:t}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{id:`${fi}-${e}`,style:di,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,o.jsx)("div",{id:`${hi}-${e}`,style:di,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&(0,o.jsx)(vi,{rfId:e})]})}const xi=e=>e.userSelectionActive?"none":"all";function wi({position:e="top-left",children:t,className:n,style:r,...i}){const s=ci(xi),l=`${e}`.split("-");return(0,o.jsx)("div",{className:a(["react-flow__panel",n,...l]),style:{...r,pointerEvents:s},...i,children:t})}function bi({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,o.jsx)(wi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,o.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Si=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},Ni=e=>e.id;function Ci(e,t){return ri(e.selectedNodes.map(Ni),t.selectedNodes.map(Ni))&&ri(e.selectedEdges.map(Ni),t.selectedEdges.map(Ni))}function ji({onSelectionChange:e}){const t=ui(),{selectedNodes:n,selectedEdges:o}=ci(Si,Ci);return(0,r.useEffect)((()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChangeHandlers.forEach((e=>e(r)))}),[n,o,e]),null}const Ei=e=>!!e.onSelectionChangeHandlers;function Mi({onSelectionChange:e}){const t=ci(Ei);return e||t?(0,o.jsx)(ji,{onSelectionChange:e}):null}const ki=[0,0],_i={x:0,y:0,zoom:1},Oi=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],Ri=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Ai={translateExtent:to,nodeOrigin:ki,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Ii(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=ci(Ri,ri),d=ui();(0,r.useEffect)((()=>(c(e.defaultNodes,e.defaultEdges),()=>{p.current=Ai,l()})),[]);const p=(0,r.useRef)(Ai);return(0,r.useEffect)((()=>{for(const r of Oi){const l=e[r];l!==p.current[r]&&void 0!==e[r]&&("nodes"===r?t(l):"edges"===r?n(l):"minZoom"===r?o(l):"maxZoom"===r?i(l):"translateExtent"===r?a(l):"nodeExtent"===r?s(l):"paneClickDistance"===r?u(l):"fitView"===r?d.setState({fitViewOnInit:l}):"fitViewOptions"===r?d.setState({fitViewOnInitOptions:l}):d.setState({[r]:l}))}p.current=e}),Oi.map((t=>e[t]))),null}function Ti(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const Di="undefined"!=typeof document?document:null;function Pi(e=null,t={target:Di,actInsideInputWithModifier:!0}){const[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(!1),a=(0,r.useRef)(new Set([])),[s,l]=(0,r.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.split("+"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,r.useEffect)((()=>{const n=t?.target||Di;if(null!==e){const e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Jo(e))return!1;const n=zi(e.code,l);a.current.add(e[n]),Li(s,a.current,!1)&&(e.preventDefault(),o(!0))},r=e=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Jo(e))return!1;const n=zi(e.code,l);Li(s,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(e[n]),"Meta"===e.key&&a.current.clear(),i.current=!1},c=()=>{a.current.clear(),o(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",r),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",r),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}}),[e,o]),n}function Li(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function zi(e,t){return t.includes(e)?"code":"key"}const Bi=()=>{const e=ui();return(0,r.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,width:o,height:r,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),l=So(n,t);return s?No({nodes:l,width:o,height:r,minZoom:i,maxZoom:a,panZoom:s},t):Promise.resolve(!1)},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:a,panZoom:s}=e.getState(),l=void 0!==o?.zoom?o.zoom:a,c=r/2-t*l,u=i/2-n*l;return s?(await s.setViewport({x:c,y:u,zoom:l},{duration:o?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),l=Vo(t,o,r,i,a,n?.padding??.1);return s?(await s.setViewport(l,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),l={x:t.x-a,y:t.y-s};return Ho(l,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),a=Fo(t,n);return{x:a.x+r,y:a.y+i}}})),[])};function Hi(e,t){const n=[],o=new Map;for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{const e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}else n.push(t.item);for(const e of t){const t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const r={...e};for(const e of t)Fi(e,r);n.push(r)}return n}function Fi(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function Vi(e,t){return Hi(e,t)}function Zi(e,t){return{id:e,type:"select",selected:t}}function Wi(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(Zi(i.id,e)))}return o}function qi({items:e=[],lookup:t}){const n=[],o=new Map(e.map((e=>[e.id,e])));for(const o of e){const e=t.get(o.id),r=e?.internals?.userNode??e;void 0!==r&&r!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===r&&n.push({item:o,type:"add"})}for(const[e]of t)void 0===o.get(e)&&n.push({id:e,type:"remove"});return n}function $i(e){return{id:e.id,type:"remove"}}const Yi=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e),Xi=e=>ho(e);function Ui(e){return(0,r.forwardRef)(e)}const Ki="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function Gi(e){const[t,n]=(0,r.useState)(!1),[o]=(0,r.useState)((()=>function(){let e=[];return{get:()=>e,reset:()=>{e=[]},push:t=>{e.push(t),n(!0)}}}()));return Ki((()=>{if(!t)return void o.reset();const r=o.get();r.length&&(e(r),o.reset()),n(!1)}),[t]),o}const Ji=(0,r.createContext)(null);function Qi({children:e}){const t=ui(),n=Gi((0,r.useCallback)((e=>{const{nodes:n=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:a}=t.getState();let s=n;for(const t of e)s="function"==typeof t?t(s):t;r?o(s):i&&i(qi({items:s,lookup:a}))}),[])),i=(0,r.useCallback)((e=>{const{edges:n=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:a}=t.getState();let s=n;for(const t of e)s="function"==typeof t?t(s):t;r?o(s):i&&i(qi({items:s,lookup:a}))}),[]),a=Gi(i),s=(0,r.useMemo)((()=>({nodeQueue:n,edgeQueue:a})),[]);return(0,o.jsx)(Ji.Provider,{value:s,children:e})}const ea=e=>!!e.panZoom;function ta(){const e=Bi(),t=ui(),n=function(){const e=(0,r.useContext)(Ji);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=ci(ea),i=(0,r.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},i=e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState(),r=Yi(e)?e:n.get(e.id),i=r.parentId?Yo(r.position,r.measured,r.parentId,n,o):r.position,a={id:r.id,position:i,width:r.measured?.width??r.width,height:r.measured?.height??r.height,data:r.data};return Ao(a)},a=(e,t,n={replace:!1})=>{o((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&Yi(e)?e:{...o,...e}}return o}))))},s=(e,t,n={replace:!1})=>{r((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&Xi(e)?e:{...o,...e}}return o}))))};return{getNodes:()=>t.getState().nodes.map((e=>({...e}))),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,i,a]=o;return{nodes:e.map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:r,y:i,zoom:a}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:o,edges:r,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:u}=t.getState(),{nodes:d,edges:p}=await async function({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map((e=>e.id))),a=[];for(const e of n){if(!1===e.deletable)continue;const t=i.has(e.id),n=!t&&e.parentId&&a.find((t=>t.id===e.parentId));(t||n)&&a.push(e)}const s=new Set(t.map((e=>e.id))),l=o.filter((e=>!1!==e.deletable)),c=bo(a,l);for(const e of l)s.has(e.id)&&!c.find((t=>t.id===e.id))&&c.push(e);if(!r)return{edges:c,nodes:a};const u=await r({nodes:a,edges:c});return"boolean"==typeof u?u?{edges:c,nodes:a}:{edges:[],nodes:[]}:u}({nodesToRemove:e,edgesToRemove:n,nodes:o,edges:r,onBeforeDelete:u}),f=p.length>0,h=d.length>0;if(f){const e=p.map($i);a?.(p),l(e)}if(h){const e=d.map($i);i?.(d),s(e)}return(h||f)&&c?.({nodes:d,edges:p}),{deletedNodes:d,deletedEdges:p}},getIntersectingNodes:(e,n=!0,o)=>{const r=Po(e),a=r?e:i(e),s=void 0!==o;return a?(o||t.getState().nodes).filter((o=>{const i=t.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;const l=Ao(s?o:i),c=Do(l,a);return n&&c>0||c>=a.width*a.height})):[]},isNodeIntersecting:(e,t,n=!0)=>{const o=Po(e)?e:i(e);if(!o)return!1;const r=Do(o,t);return n&&r>0||r>=o.width*o.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)}}}),[]);return(0,r.useMemo)((()=>({...i,...e,viewportInitialized:o})),[o])}const na=e=>e.selected,oa={actInsideInputWithModifier:!1},ra="undefined"!=typeof window?window:void 0,ia={position:"absolute",width:"100%",height:"100%",top:0,left:0},aa=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function sa({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=ro.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:u,translateExtent:d,minZoom:p,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:m=!0,children:g,noWheelClassName:v,noPanClassName:y,onViewportChange:x,isControlledViewport:w,paneClickDistance:b}){const S=ui(),N=(0,r.useRef)(null),{userSelectionActive:C,lib:j}=ci(aa,ri),E=Pi(h),M=(0,r.useRef)();return function(e){const t=ui();(0,r.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=Uo(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",eo.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(N),(0,r.useEffect)((()=>{if(N.current){M.current=Fr({domNode:N.current,minZoom:p,maxZoom:f,translateExtent:d,viewport:u,paneClickDistance:b,onTransformChange:e=>{x?.({x:e[0],y:e[1],zoom:e[2]}),w||S.setState({transform:e})},onDraggingChange:e=>S.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:o}=S.getState();o?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:o}=S.getState();o?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:o}=S.getState();o?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=M.current.getViewport();return S.setState({panZoom:M.current,transform:[e,t,n],domNode:N.current.closest(".react-flow")}),()=>{M.current?.destroy()}}}),[]),(0,r.useEffect)((()=>{M.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:E,preventScrolling:m,noPanClassName:y,userSelectionActive:C,noWheelClassName:v,lib:j})}),[e,t,n,i,a,s,l,c,E,m,y,C,v,j]),(0,o.jsx)("div",{className:"react-flow__renderer",ref:N,style:ia,children:g})}const la=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ca(){const{userSelectionActive:e,userSelectionRect:t}=ci(la,ri);return e&&t?(0,o.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const ua=(e,t)=>n=>{n.target===t.current&&e?.(n)},da=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function pa({isSelecting:e,selectionKeyPressed:t,selectionMode:n=io.Full,panOnDrag:i,selectionOnDrag:s,onSelectionStart:l,onSelectionEnd:c,onPaneClick:u,onPaneContextMenu:d,onPaneScroll:p,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:m,children:g}){const v=(0,r.useRef)(null),y=ui(),x=(0,r.useRef)(0),w=(0,r.useRef)(0),b=(0,r.useRef)(),S=(0,r.useRef)(new Map),{userSelectionActive:N,elementsSelectable:C,dragging:j}=ci(da,ri),E=C&&(e||N),M=(0,r.useRef)(!1),k=(0,r.useRef)(!1),_=e=>{M.current?M.current=!1:(u?.(e),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1}))},O=p?e=>p(e):void 0,R=!0===i||Array.isArray(i)&&i.includes(0);return(0,o.jsxs)("div",{className:a(["react-flow__pane",{draggable:R,dragging:j,selection:e}]),onClick:E?void 0:ua(_,v),onContextMenu:ua((e=>{Array.isArray(i)&&i?.includes(2)?e.preventDefault():d?.(e)}),v),onWheel:ua(O,v),onPointerEnter:E?void 0:f,onPointerDown:E?t=>{const{resetSelectedElements:n,domNode:o,edgeLookup:r}=y.getState();if(b.current=o?.getBoundingClientRect(),!C||!e||0!==t.button||t.target!==v.current||!b.current)return;t.target?.setPointerCapture?.(t.pointerId),k.current=!0,M.current=!1,S.current=new Map;for(const[e,t]of r)S.current.set(t.source,S.current.get(t.source)?.add(e)||new Set([e])),S.current.set(t.target,S.current.get(t.target)?.add(e)||new Set([e]));const{x:i,y:a}=er(t.nativeEvent,b.current);n(),y.setState({userSelectionRect:{width:0,height:0,startX:i,startY:a,x:i,y:a}}),l?.(t)}:h,onPointerMove:E?e=>{const{userSelectionRect:t,edgeLookup:o,transform:r,nodeLookup:i,triggerNodeChanges:a,triggerEdgeChanges:s}=y.getState();if(!b.current||!t)return;M.current=!0;const{x:l,y:c}=er(e.nativeEvent,b.current),{startX:u,startY:d}=t,p={startX:u,startY:d,x:l<u?l:u,y:c<d?c:d,width:Math.abs(l-u),height:Math.abs(c-d)},f=wo(i,p,r,n===io.Partial,!0),h=new Set,m=new Set;for(const e of f){m.add(e.id);const t=S.current.get(e.id);if(t)for(const e of t)h.add(e)}x.current!==m.size&&(x.current=m.size,a(Wi(i,m,!0))),w.current!==h.size&&(w.current=h.size,s(Wi(o,h))),y.setState({userSelectionRect:p,userSelectionActive:!0,nodesSelectionActive:!1})}:h,onPointerUp:E?e=>{if(0!==e.button||!k.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:n}=y.getState();!N&&n&&e.target===v.current&&_?.(e),x.current>0&&y.setState({nodesSelectionActive:!0}),y.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,w.current=0,c?.(e),(t||s)&&(M.current=!1),k.current=!1}:void 0,onPointerLeave:m,ref:v,style:ia,children:[g,(0,o.jsx)(ca,{})]})}function fa({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(i({nodes:[c],edges:[]}),requestAnimationFrame((()=>o?.current?.blur()))):r([e])):l?.("012",eo.error012(e))}function ha({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:i,isSelectable:a,nodeClickDistance:s}){const l=ui(),[c,u]=(0,r.useState)(!1),d=(0,r.useRef)();return(0,r.useEffect)((()=>{d.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},u=null,d=!1,p=null,f=!1;return{update:function({noDragClassName:h,handleSelector:m,domNode:g,isSelectable:v,nodeId:y,nodeClickDistance:x=0}){function w({x:e,y:n},r){const{nodeLookup:a,nodeExtent:l,snapGrid:c,snapToGrid:u,nodeOrigin:d,onNodeDrag:p,onSelectionDrag:f,onError:h,updateNodePositions:m}=t();i={x:e,y:n};let g=!1,v={x:0,y:0,x2:0,y2:0};if(s.size>1&&l){const e=xo(s);v=Oo(e)}for(const[t,o]of s){let r={x:e-o.distance.x,y:n-o.distance.y};u&&(r=Bo(r,c));let i=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(s.size>1&&l&&!o.extent){const{positionAbsolute:e}=o.internals,t=e.x-v.x+l[0][0],n=e.x+o.measured.width-v.x2+l[1][0];i=[[t,e.y-v.y+l[0][1]],[n,e.y+o.measured.height-v.y2+l[1][1]]]}const{position:p,positionAbsolute:f}=Co({nodeId:t,nextPosition:r,nodeLookup:a,nodeExtent:i,nodeOrigin:d,onError:h});g=g||o.position.x!==p.x||o.position.y!==p.y,o.position=p,o.internals.positionAbsolute=f}if(g&&(m(s,!0),r&&(o||p||!y&&f))){const[e,t]=kr({nodeId:y,dragItems:s,nodeLookup:a});o?.(r,s,e,t),p?.(r,e,t),y||f?.(r,t)}}async function b(){if(!u)return;const{transform:e,panBy:n,autoPanSpeed:o}=t(),[r,s]=ko(c,u,o);0===r&&0===s||(i.x=(i.x??0)-r/e[2],i.y=(i.y??0)-s/e[2],await n({x:r,y:s})&&w(i,null)),a=requestAnimationFrame(b)}function S(o){const{nodeLookup:r,multiSelectionActive:a,nodesDraggable:l,transform:c,snapGrid:u,snapToGrid:p,selectNodesOnDrag:f,onNodeDragStart:h,onSelectionDragStart:m,unselectNodesAndEdges:g}=t();d=!0,f&&v||a||!y||r.get(y)?.selected||g(),v&&f&&y&&e?.(y);const x=Xo(o.sourceEvent,{transform:c,snapGrid:u,snapToGrid:p});if(i=x,s=function(e,t,n,o){const r=new Map;for(const[i,a]of e)if((a.selected||a.id===o)&&(!a.parentId||!Er(a,e))&&(a.draggable||t&&void 0===a.draggable)){const t=e.get(i);t&&r.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return r}(r,l,x,y),s.size>0&&(n||h||!y&&m)){const[e,t]=kr({nodeId:y,dragItems:s,nodeLookup:r});n?.(o.sourceEvent,s,e,t),h?.(o.sourceEvent,e,t),y||m?.(o.sourceEvent,t)}}p=je(g);const N=Be().clickDistance(x).on("start",(e=>{const{domNode:n,nodeDragThreshold:o,transform:r,snapGrid:a,snapToGrid:s}=t();f=!1,0===o&&S(e);const l=Xo(e.sourceEvent,{transform:r,snapGrid:a,snapToGrid:s});i=l,u=n?.getBoundingClientRect()||null,c=er(e.sourceEvent,u)})).on("drag",(e=>{const{autoPanOnNodeDrag:n,transform:o,snapGrid:r,snapToGrid:a,nodeDragThreshold:p}=t(),h=Xo(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:a});if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(f=!0),!f){if(!l&&n&&d&&(l=!0,b()),!d){const t=h.xSnapped-(i.x??0),n=h.ySnapped-(i.y??0);Math.sqrt(t*t+n*n)>p&&S(e)}(i.x!==h.xSnapped||i.y!==h.ySnapped)&&s&&d&&(c=er(e.sourceEvent,u),w(h,e.sourceEvent))}})).on("end",(e=>{if(d&&!f&&(l=!1,d=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:n,updateNodePositions:o,onNodeDragStop:i,onSelectionDragStop:a}=t();if(o(s,!1),r||i||!y&&a){const[t,o]=kr({nodeId:y,dragItems:s,nodeLookup:n,dragging:!1});r?.(e.sourceEvent,s,t,o),i?.(e.sourceEvent,t,o),y||a?.(e.sourceEvent,o)}}})).filter((e=>{const t=e.target;return!e.button&&(!h||!Mr(t,`.${h}`,g))&&(!m||Mr(t,m,g))}));p.call(N)},destroy:function(){p?.on(".drag",null)}}}({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{fa({id:t,store:l,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})}),[]),(0,r.useEffect)((()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{d.current?.destroy()}}),[n,o,t,a,e,i]),c}const ma=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function ga(){const e=ui();return(0,r.useCallback)((t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,d=ma(i),p=o?r[0]:5,f=o?r[1]:5,h=t.direction.x*p*t.factor,m=t.direction.y*f*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+h,y:e.internals.positionAbsolute.y+m};o&&(t=Bo(t,r));const{position:i,positionAbsolute:s}=Co({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:a});e.position=i,e.internals.positionAbsolute=s,u.set(e.id,e)}s(u)}),[])}const va=(0,r.createContext)(null),ya=va.Provider;va.Consumer;const xa=()=>(0,r.useContext)(va),wa=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),ba=(0,r.memo)(Ui((function({type:e="source",position:t=co.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:l,onConnect:c,children:u,className:d,onMouseDown:p,onTouchStart:f,...h},m){const g=l||null,v="target"===e,y=ui(),x=xa(),{connectOnClick:w,noPanClassName:b,rfId:S}=ci(wa,ri),{connectingFrom:N,connectingTo:C,clickConnecting:j,isPossibleEndHandle:E,connectionInProcess:M,valid:k}=ci(((e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:a}=o,{fromHandle:s,toHandle:l,isValid:c}=a,u=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:s?.nodeId===e&&s?.id===t&&s?.type===n,connectingTo:u,clickConnecting:r?.nodeId===e&&r?.id===t&&r?.type===n,isPossibleEndHandle:i===oo.Strict?s?.type!==n:e!==s?.nodeId||t!==s?.id,connectionInProcess:!!s,valid:u&&c}})(x,g,e),ri);x||y.getState().onError?.("010",eo.error010());const _=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=y.getState(),r={...t,...e};if(o){const{edges:e,setEdges:t}=y.getState();t(((e,t)=>{if(!e.source||!e.target)return eo.error006(),t;let n;return n=ho(e)?{...e}:{...e,id:lr(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))})(r,e))}n?.(r),c?.(r)},O=e=>{if(!x)return;const t=Qo(e.nativeEvent);if(i&&(t&&0===e.button||!t)){const t=y.getState();Ir.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:v,handleId:g,nodeId:x,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:_,isValidConnection:n||t.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?p?.(e):f?.(e)};return(0,o.jsx)("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${S}-${x}-${g}-${e}`,className:a(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,d,{source:!v,target:v,connectable:r,connectablestart:i,connectableend:s,clickconnecting:j,connectingfrom:N,connectingto:C,valid:k,connectionindicator:r&&(!M||E)&&(M?s:i)}]),onMouseDown:O,onTouchStart:O,onClick:w?t=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:a,connectionMode:s,isValidConnection:l,lib:c,rfId:u,nodeLookup:d,connection:p}=y.getState();if(!x||!a&&!i)return;if(!a)return o?.(t.nativeEvent,{nodeId:x,handleId:g,handleType:e}),void y.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});const f=Ko(t.target),h=n||l,{connection:m,isValid:v}=Ir.isValid(t.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:s,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:h,flowId:u,doc:f,lib:c,nodeLookup:d});v&&m&&_(m);const w=structuredClone(p);delete w.inProgress,w.toPosition=w.toHandle?w.toHandle.position:null,r?.(t,w),y.setState({connectionClickStartHandle:null})}:void 0,ref:m,...h,children:u})}))),Sa={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Na={input:function({data:e,isConnectable:t,sourcePosition:n=co.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[e?.label,(0,o.jsx)(ba,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=co.Top,sourcePosition:r=co.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ba,{type:"target",position:n,isConnectable:t}),e?.label,(0,o.jsx)(ba,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=co.Top}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ba,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},Ca=e=>{const{width:t,height:n,x:o,y:r}=xo(e.nodeLookup,{filter:e=>!!e.selected});return{width:Lo(t)?t:null,height:Lo(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function ja({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=ui(),{width:s,height:l,transformString:c,userSelectionActive:u}=ci(Ca,ri),d=ga(),p=(0,r.useRef)(null);if((0,r.useEffect)((()=>{n||p.current?.focus({preventScroll:!0})}),[n]),ha({nodeRef:p}),u||!s||!l)return null;const f=e?t=>{const n=i.getState().nodes.filter((e=>e.selected));e(t,n)}:void 0;return(0,o.jsx)("div",{className:a(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:(0,o.jsx)("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(Sa,e.key)&&d({direction:Sa[e.key],factor:e.shiftKey?4:1})},style:{width:s,height:l}})})}const Ea="undefined"!=typeof window?window:void 0,Ma=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ka({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:p,selectionMode:f,onSelectionStart:h,onSelectionEnd:m,multiSelectionKeyCode:g,panActivationKeyCode:v,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:b,panOnScroll:S,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:j,panOnDrag:E,defaultViewport:M,translateExtent:k,minZoom:_,maxZoom:O,preventScrolling:R,onSelectionContextMenu:A,noWheelClassName:I,noPanClassName:T,disableKeyboardA11y:D,onViewportChange:P,isControlledViewport:L}){const{nodesSelectionActive:z,userSelectionActive:B}=ci(Ma),H=Pi(d,{target:Ea}),F=Pi(v,{target:Ea}),V=F||E,Z=F||S,W=p&&!0!==V,q=H||B||W;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ui(),{deleteElements:o}=ta(),i=Pi(e,oa),a=Pi(t,{target:ra});(0,r.useEffect)((()=>{if(i){const{edges:e,nodes:t}=n.getState();o({nodes:t.filter(na),edges:e.filter(na)}),n.setState({nodesSelectionActive:!1})}}),[i]),(0,r.useEffect)((()=>{n.setState({multiSelectionActive:a})}),[a])}({deleteKeyCode:u,multiSelectionKeyCode:g}),(0,o.jsx)(sa,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:b,panOnScroll:Z,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:j,panOnDrag:!H&&V,defaultViewport:M,translateExtent:k,minZoom:_,maxZoom:O,zoomActivationKeyCode:y,preventScrolling:R,noWheelClassName:I,noPanClassName:T,onViewportChange:P,isControlledViewport:L,paneClickDistance:c,children:(0,o.jsxs)(pa,{onSelectionStart:h,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:V,isSelecting:!!q,selectionMode:f,selectionKeyPressed:H,selectionOnDrag:W,children:[e,z&&(0,o.jsx)(ja,{onSelectionContextMenu:A,noPanClassName:T,disableKeyboardA11y:D})]})})}ka.displayName="FlowRenderer";const _a=(0,r.memo)(ka),Oa=e=>e.updateNodeInternals;function Ra({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:s,onContextMenu:l,onDoubleClick:c,nodesDraggable:u,elementsSelectable:d,nodesConnectable:p,nodesFocusable:f,resizeObserver:h,noDragClassName:m,noPanClassName:g,disableKeyboardA11y:v,rfId:y,nodeTypes:x,nodeExtent:w,nodeClickDistance:b,onError:S}){const{node:N,internals:C,isParent:j}=ci((t=>{const n=t.nodeLookup.get(e),o=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:o}}),ri);let E=N.type||"default",M=x?.[E]||Na[E];void 0===M&&(S?.("003",eo.error003(E)),E="default",M=Na.default);const k=!!(N.draggable||u&&void 0===N.draggable),_=!!(N.selectable||d&&void 0===N.selectable),O=!!(N.connectable||p&&void 0===N.connectable),R=!!(N.focusable||f&&void 0===N.focusable),A=ui(),I=$o(N),T=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const i=ui(),a=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)(e.sourcePosition),c=(0,r.useRef)(e.targetPosition),u=(0,r.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,r.useEffect)((()=>{!a.current||e.hidden||d&&s.current===a.current||(s.current&&o?.unobserve(s.current),o?.observe(a.current),s.current=a.current)}),[d,e.hidden]),(0,r.useEffect)((()=>()=>{s.current&&(o?.unobserve(s.current),s.current=null)}),[]),(0,r.useEffect)((()=>{if(a.current){const n=u.current!==t,o=l.current!==e.sourcePosition,r=c.current!==e.targetPosition;(n||o||r)&&(u.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}}),[e.id,t,e.sourcePosition,e.targetPosition]),a}({node:N,nodeType:E,hasDimensions:I,resizeObserver:h}),D=ha({nodeRef:T,disabled:N.hidden||!k,noDragClassName:m,handleSelector:N.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:b}),P=ga();if(N.hidden)return null;const L=qo(N),z=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(N),B=w?Eo(C.positionAbsolute,w):C.positionAbsolute,H=_||k||t||n||i||s,F=n?e=>n(e,{...C.userNode}):void 0,V=i?e=>i(e,{...C.userNode}):void 0,Z=s?e=>s(e,{...C.userNode}):void 0,W=l?e=>l(e,{...C.userNode}):void 0,q=c?e=>c(e,{...C.userNode}):void 0;return(0,o.jsx)("div",{className:a(["react-flow__node",`react-flow__node-${E}`,{[g]:k},N.className,{selected:N.selected,selectable:_,parent:j,draggable:k,dragging:D}]),ref:T,style:{zIndex:C.z,transform:`translate(${B.x}px,${B.y}px)`,pointerEvents:H?"all":"none",visibility:I?"visible":"hidden",...N.style,...z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:F,onMouseMove:V,onMouseLeave:Z,onContextMenu:W,onClick:n=>{const{selectNodesOnDrag:o,nodeDragThreshold:r}=A.getState();_&&(!o||!k||r>0)&&fa({id:e,store:A,nodeRef:T}),t&&t(n,{...C.userNode})},onDoubleClick:q,onKeyDown:R?t=>{if(!Jo(t.nativeEvent)&&!v)if(no.includes(t.key)&&_){const n="Escape"===t.key;fa({id:e,store:A,unselect:n,nodeRef:T})}else k&&N.selected&&Object.prototype.hasOwnProperty.call(Sa,t.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~B.x}, y: ${~~B.y}`}),P({direction:Sa[t.key],factor:t.shiftKey?4:1}))}:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":v?void 0:`${fi}-${y}`,"aria-label":N.ariaLabel,children:(0,o.jsx)(ya,{value:e,children:(0,o.jsx)(M,{id:e,data:N.data,type:E,positionAbsoluteX:B.x,positionAbsoluteY:B.y,selected:N.selected,selectable:_,draggable:k,deletable:N.deletable??!0,isConnectable:O,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:D,dragHandle:N.dragHandle,zIndex:C.z,parentId:N.parentId,...L})})})}const Aa=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ia(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,onError:s}=ci(Aa,ri),l=(c=e.onlyRenderVisibleElements,ci((0,r.useCallback)((e=>t=>e?wo(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(c),[c]),ri));var c;const u=function(){const e=ci(Oa),[t]=(0,r.useState)((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,r.useEffect)((()=>()=>{t?.disconnect()}),[t]),t}();return(0,o.jsx)("div",{className:"react-flow__nodes",style:ia,children:l.map((r=>(0,o.jsx)(Ra,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},r)))})}Ia.displayName="NodeRenderer";const Ta=(0,r.memo)(Ia),Da={[lo.Arrow]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[lo.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Pa=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const u=function(e){const t=ui();return(0,r.useMemo)((()=>Object.prototype.hasOwnProperty.call(Da,e)?Da[e]:(t.getState().onError?.("009",eo.error009(e)),null)),[e])}(t);return u?(0,o.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0",children:(0,o.jsx)(u,{color:n,strokeWidth:l})}):null},La=({defaultColor:e,rfId:t})=>{const n=ci((e=>e.edges)),i=ci((e=>e.defaultEdgeOptions)),a=(0,r.useMemo)((()=>{const o=function(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce(((e,a)=>([a.markerStart||o,a.markerEnd||r].forEach((o=>{if(o&&"object"==typeof o){const r=yr(o,t);i.has(r)||(e.push({id:r,color:o.color||n,...o}),i.add(r))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(n,{id:t,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd});return o}),[n,i,t,e]);return a.length?(0,o.jsx)("svg",{className:"react-flow__marker",children:(0,o.jsx)("defs",{children:a.map((e=>(0,o.jsx)(Pa,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};La.displayName="MarkerDefinitions";var za=(0,r.memo)(La);function Ba({x:e,y:t,label:n,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:d,className:p,...f}){const[h,m]=(0,r.useState)({x:1,y:0,width:0,height:0}),g=a(["react-flow__edge-textwrapper",p]),v=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(v.current){const e=v.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),void 0!==n&&n?(0,o.jsxs)("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...f,children:[s&&(0,o.jsx)("rect",{width:h.width+2*c[0],x:-c[0],y:-c[1],height:h.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:u,ry:u}),(0,o.jsx)("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:v,style:i,children:n}),d]}):null}Ba.displayName="EdgeText";const Ha=(0,r.memo)(Ba);function Fa({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:h,className:m,interactionWidth:g=20}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{id:e,style:p,d:t,fill:"none",className:a(["react-flow__edge-path",m]),markerEnd:f,markerStart:h}),g&&(0,o.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),i&&Lo(n)&&Lo(r)?(0,o.jsx)(Ha,{x:n,y:r,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d}):null]})}function Va({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===co.Left||e===co.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Za({sourceX:e,sourceY:t,sourcePosition:n=co.Bottom,targetX:o,targetY:r,targetPosition:i=co.Top}){const[a,s]=Va({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=Va({pos:i,x1:o,y1:r,x2:e,y2:t}),[u,d,p,f]=nr({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${s} ${l},${c} ${o},${r}`,u,d,p,f]}function Wa(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=co.Bottom,targetPosition:l=co.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:v,interactionWidth:y})=>{const[x,w,b]=Za({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:l}),S=e.isInternal?void 0:t;return(0,o.jsx)(Fa,{id:S,path:x,labelX:w,labelY:b,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:v,interactionWidth:y})}))}const qa=Wa({isInternal:!1}),$a=Wa({isInternal:!0});function Ya(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:f,sourcePosition:h=co.Bottom,targetPosition:m=co.Top,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:x})=>{const[w,b,S]=fr({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:a,targetPosition:m,borderRadius:y?.borderRadius,offset:y?.offset}),N=e.isInternal?void 0:t;return(0,o.jsx)(Fa,{id:N,path:w,labelX:b,labelY:S,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:f,markerEnd:g,markerStart:v,interactionWidth:x})}))}qa.displayName="SimpleBezierEdge",$a.displayName="SimpleBezierEdgeInternal";const Xa=Ya({isInternal:!1}),Ua=Ya({isInternal:!0});function Ka(e){return(0,r.memo)((({id:t,...n})=>{const i=e.isInternal?void 0:t;return(0,o.jsx)(Xa,{...n,id:i,pathOptions:(0,r.useMemo)((()=>({borderRadius:0,offset:n.pathOptions?.offset})),[n.pathOptions?.offset])})}))}Xa.displayName="SmoothStepEdge",Ua.displayName="SmoothStepEdgeInternal";const Ga=Ka({isInternal:!1}),Ja=Ka({isInternal:!0});function Qa(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:f,markerEnd:h,markerStart:m,interactionWidth:g})=>{const[v,y,x]=cr({sourceX:n,sourceY:r,targetX:i,targetY:a}),w=e.isInternal?void 0:t;return(0,o.jsx)(Fa,{id:w,path:v,labelX:y,labelY:x,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:f,markerEnd:h,markerStart:m,interactionWidth:g})}))}Ga.displayName="StepEdge",Ja.displayName="StepEdgeInternal";const es=Qa({isInternal:!1}),ts=Qa({isInternal:!0});function ns(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=co.Bottom,targetPosition:l=co.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:x})=>{const[w,b,S]=ir({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:l,curvature:y?.curvature}),N=e.isInternal?void 0:t;return(0,o.jsx)(Fa,{id:N,path:w,labelX:b,labelY:S,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:v,interactionWidth:x})}))}es.displayName="StraightEdge",ts.displayName="StraightEdgeInternal";const os=ns({isInternal:!1}),rs=ns({isInternal:!0});os.displayName="BezierEdge",rs.displayName="BezierEdgeInternal";const is={default:rs,straight:ts,step:Ja,smoothstep:Ua,simplebezier:$a},as={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ss=(e,t,n)=>n===co.Left?e-t:n===co.Right?e+t:e,ls=(e,t,n)=>n===co.Top?e-t:n===co.Bottom?e+t:e,cs="react-flow__edgeupdater";function us({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:l,type:c}){return(0,o.jsx)("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:l,className:a([cs,`${cs}-${c}`]),cx:ss(t,r,e),cy:ls(n,r,e),r,stroke:"transparent",fill:"transparent"})}function ds({isReconnectable:e,reconnectRadius:t,edge:n,targetHandleId:r,sourceHandleId:i,sourceX:a,sourceY:s,targetX:l,targetY:c,sourcePosition:u,targetPosition:d,onReconnect:p,onReconnectStart:f,onReconnectEnd:h,setReconnecting:m,setUpdateHover:g}){const v=ui(),y=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:o,domNode:a,isValidConnection:s,connectionMode:l,connectionRadius:c,lib:u,onConnectStart:d,onConnectEnd:g,cancelConnection:y,nodeLookup:x,rfId:w,panBy:b,updateConnection:S}=v.getState(),N=t?n.target:n.source,C=(t?r:i)||null,j=t?"target":"source",E=t;m(!0),f?.(e,n,j),Ir.onPointerDown(e.nativeEvent,{autoPanOnConnect:o,connectionMode:l,connectionRadius:c,domNode:a,handleId:C,nodeId:N,nodeLookup:x,isTarget:E,edgeUpdaterType:j,lib:u,flowId:w,cancelConnection:y,panBy:b,isValidConnection:s,onConnect:e=>p?.(n,e),onConnectStart:d,onConnectEnd:g,onReconnectEnd:(e,t)=>{m(!1),h?.(e,n,j,t)},updateConnection:S,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle})},x=()=>g(!0),w=()=>g(!1);return(0,o.jsxs)(o.Fragment,{children:[("source"===e||!0===e)&&(0,o.jsx)(us,{position:u,centerX:a,centerY:s,radius:t,onMouseDown:e=>y(e,!0),onMouseEnter:x,onMouseOut:w,type:"source"}),("target"===e||!0===e)&&(0,o.jsx)(us,{position:d,centerX:l,centerY:c,radius:t,onMouseDown:e=>y(e,!1),onMouseEnter:x,onMouseOut:w,type:"target"})]})}function ps({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:s,onDoubleClick:l,onContextMenu:c,onMouseEnter:u,onMouseMove:d,onMouseLeave:p,reconnectRadius:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,rfId:v,edgeTypes:y,noPanClassName:x,onError:w,disableKeyboardA11y:b}){let S=ci((t=>t.edgeLookup.get(e)));const N=ci((e=>e.defaultEdgeOptions));S=N?{...N,...S}:S;let C=S.type||"default",j=y?.[C]||is[C];void 0===j&&(w?.("011",eo.error011(C)),C="default",j=is.default);const E=!!(S.focusable||t&&void 0===S.focusable),M=void 0!==h&&(S.reconnectable||n&&void 0===S.reconnectable),k=!!(S.selectable||i&&void 0===S.selectable),_=(0,r.useRef)(null),[O,R]=(0,r.useState)(!1),[A,I]=(0,r.useState)(!1),T=ui(),{zIndex:D,sourceX:P,sourceY:L,targetX:z,targetY:B,sourcePosition:H,targetPosition:F}=ci((0,r.useCallback)((t=>{const n=t.nodeLookup.get(S.source),o=t.nodeLookup.get(S.target);if(!n||!o)return{zIndex:S.zIndex,...as};const r=function(e){const{sourceNode:t,targetNode:n}=e;if(!hr(t)||!hr(n))return null;const o=t.internals.handleBounds||mr(t.handles),r=n.internals.handleBounds||mr(n.handles),i=vr(o?.source??[],e.sourceHandle),a=vr(e.connectionMode===oo.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!a)return e.onError?.("008",eo.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=i?.position||co.Bottom,l=a?.position||co.Top,c=gr(t,i,s),u=gr(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:l}}({id:e,sourceNode:n,targetNode:o,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:t.connectionMode,onError:w}),i=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?a:0)}({selected:S.selected,zIndex:S.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:t.elevateEdgesOnSelect});return{zIndex:i,...r||as}}),[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),ri),V=(0,r.useMemo)((()=>S.markerStart?`url('#${yr(S.markerStart,v)}')`:void 0),[S.markerStart,v]),Z=(0,r.useMemo)((()=>S.markerEnd?`url('#${yr(S.markerEnd,v)}')`:void 0),[S.markerEnd,v]);if(S.hidden||null===P||null===L||null===z||null===B)return null;const W=l?e=>{l(e,{...S})}:void 0,q=c?e=>{c(e,{...S})}:void 0,$=u?e=>{u(e,{...S})}:void 0,Y=d?e=>{d(e,{...S})}:void 0,X=p?e=>{p(e,{...S})}:void 0;return(0,o.jsx)("svg",{style:{zIndex:D},children:(0,o.jsxs)("g",{className:a(["react-flow__edge",`react-flow__edge-${C}`,S.className,x,{selected:S.selected,animated:S.animated,inactive:!k&&!s,updating:O,selectable:k}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:o,multiSelectionActive:r}=T.getState();k&&(T.setState({nodesSelectionActive:!1}),S.selected&&r?(o({nodes:[],edges:[S]}),_.current?.blur()):n([e])),s&&s(t,S)},onDoubleClick:W,onContextMenu:q,onMouseEnter:$,onMouseMove:Y,onMouseLeave:X,onKeyDown:E?t=>{if(!b&&no.includes(t.key)&&k){const{unselectNodesAndEdges:n,addSelectedEdges:o}=T.getState();"Escape"===t.key?(_.current?.blur(),n({edges:[S]})):o([e])}}:void 0,tabIndex:E?0:void 0,role:E?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===S.ariaLabel?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":E?`${hi}-${v}`:void 0,ref:_,children:[!A&&(0,o.jsx)(j,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:k,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:P,sourceY:L,targetX:z,targetY:B,sourcePosition:H,targetPosition:F,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:V,markerEnd:Z,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),M&&(0,o.jsx)(ds,{edge:S,isReconnectable:M,reconnectRadius:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,sourceX:P,sourceY:L,targetX:z,targetY:B,sourcePosition:H,targetPosition:F,setUpdateHover:R,setReconnecting:I,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle})]})})}const fs=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function hs({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:p,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:m,onReconnectEnd:g,disableKeyboardA11y:v}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,onError:b}=ci(fs,ri),S=(N=t,ci((0,r.useCallback)((e=>{if(!N)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&sr({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[N]),ri));var N;return(0,o.jsxs)("div",{className:"react-flow__edges",children:[(0,o.jsx)(za,{defaultColor:e,rfId:n}),S.map((e=>(0,o.jsx)(ps,{id:e,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,noPanClassName:a,onReconnect:s,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:p,reconnectRadius:f,onDoubleClick:h,onReconnectStart:m,onReconnectEnd:g,rfId:n,onError:b,edgeTypes:i,disableKeyboardA11y:v},e)))]})}hs.displayName="EdgeRenderer";const ms=(0,r.memo)(hs),gs=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function vs({children:e}){const t=ci(gs);return(0,o.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const ys=e=>e.panZoom?.syncViewport;function xs(e){return e.connection.inProgress?{...e.connection,to:Ho(e.connection.to,e.transform)}:{...e.connection}}const ws=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function bs({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:l,isValid:c,inProgress:u}=ci(ws,ri);return s&&i&&u?(0,o.jsx)("svg",{style:e,width:s,height:l,className:"react-flow__connectionline react-flow__container",children:(0,o.jsx)("g",{className:a(["react-flow__connection",fo(c)]),children:(0,o.jsx)(Ss,{style:t,type:n,CustomComponent:r,isValid:c})})}):null}const Ss=({style:e,type:t=so.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:l,fromPosition:c,to:u,toNode:d,toHandle:p,toPosition:f}=ci(function(e){return e?t=>{const n=xs(t);return e(n)}:xs}(h),ri);var h;if(!i)return;if(n)return(0,o.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:l,fromX:a.x,fromY:a.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:fo(r),toNode:d,toHandle:p});let m="";const g={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case so.Bezier:[m]=ir(g);break;case so.SimpleBezier:[m]=Za(g);break;case so.Step:[m]=fr({...g,borderRadius:0});break;case so.SmoothStep:[m]=fr(g);break;default:[m]=cr(g)}return(0,o.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};Ss.displayName="ConnectionLine";const Ns={};function Cs(e=Ns){(0,r.useRef)(e),ui(),(0,r.useEffect)((()=>{}),[e])}function js({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:m,connectionLineType:g,connectionLineStyle:v,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:w,selectionOnDrag:b,selectionMode:S,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:j,deleteKeyCode:E,onlyRenderVisibleElements:M,elementsSelectable:k,defaultViewport:_,translateExtent:O,minZoom:R,maxZoom:A,preventScrolling:I,defaultMarkerColor:T,zoomOnScroll:D,zoomOnPinch:P,panOnScroll:L,panOnScrollSpeed:z,panOnScrollMode:B,zoomOnDoubleClick:H,panOnDrag:F,onPaneClick:V,onPaneMouseEnter:Z,onPaneMouseMove:W,onPaneMouseLeave:q,onPaneScroll:$,onPaneContextMenu:Y,paneClickDistance:X,nodeClickDistance:U,onEdgeContextMenu:K,onEdgeMouseEnter:G,onEdgeMouseMove:J,onEdgeMouseLeave:Q,reconnectRadius:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:oe,noDragClassName:re,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,nodeExtent:le,rfId:ce,viewport:ue,onViewportChange:de}){return Cs(e),Cs(t),ui(),(0,r.useRef)(!1),(0,r.useEffect)((()=>{}),[]),function(e){const t=ta(),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(n),function(e){const t=ci(ys),n=ui();(0,r.useEffect)((()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(ue),(0,o.jsx)(_a,{onPaneClick:V,onPaneMouseEnter:Z,onPaneMouseMove:W,onPaneMouseLeave:q,onPaneContextMenu:Y,onPaneScroll:$,paneClickDistance:X,deleteKeyCode:E,selectionKeyCode:w,selectionOnDrag:b,selectionMode:S,onSelectionStart:h,onSelectionEnd:m,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:j,elementsSelectable:k,zoomOnScroll:D,zoomOnPinch:P,zoomOnDoubleClick:H,panOnScroll:L,panOnScrollSpeed:z,panOnScrollMode:B,panOnDrag:F,defaultViewport:_,translateExtent:O,minZoom:R,maxZoom:A,onSelectionContextMenu:f,preventScrolling:I,noDragClassName:re,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,onViewportChange:de,isControlledViewport:!!ue,children:(0,o.jsxs)(vs,{children:[(0,o.jsx)(ms,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:l,onReconnect:te,onReconnectStart:ne,onReconnectEnd:oe,onlyRenderVisibleElements:M,onEdgeContextMenu:K,onEdgeMouseEnter:G,onEdgeMouseMove:J,onEdgeMouseLeave:Q,reconnectRadius:ee,defaultMarkerColor:T,noPanClassName:ae,disableKeyboardA11y:se,rfId:ce}),(0,o.jsx)(bs,{style:v,type:g,component:y,containerStyle:x}),(0,o.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,o.jsx)(Ta,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,nodeClickDistance:U,onlyRenderVisibleElements:M,noPanClassName:ae,noDragClassName:re,disableKeyboardA11y:se,nodeExtent:le,rfId:ce}),(0,o.jsx)("div",{className:"react-flow__viewport-portal"})]})})}js.displayName="GraphView";const Es=(0,r.memo)(js),Ms=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s}={})=>{const l=new Map,c=new Map,u=new Map,d=new Map,p=o??t??[],f=n??e??[],h=s??[0,0];jr(u,d,p),br(f,l,c,{nodeOrigin:h,elevateNodesOnSelect:!1});let m=[0,0,1];if(a&&r&&i){const e=xo(l,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:o}=Vo(e,r,i,.5,2,.1);m=[t,n,o]}return{rfId:"1",width:0,height:0,transform:m,nodes:f,nodeLookup:l,parentLookup:c,edges:p,edgeLookup:d,connectionLookup:u,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:to,nodeExtent:to,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:oo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:h,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...ao},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:zo,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},ks=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s})=>{return l=(l,c)=>({...Ms({nodes:e,edges:t,width:r,height:i,fitView:a,nodeOrigin:s,defaultNodes:n,defaultEdges:o}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:o,elevateNodesOnSelect:r}=c();br(e,t,n,{nodeOrigin:o,elevateNodesOnSelect:r,checkEquality:!0}),l({nodes:e})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=c();jr(t,n,e),l({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=c();t(e),l({hasDefaultNodes:!0})}if(t){const{setEdges:e}=c();e(t),l({hasDefaultEdges:!0})}},updateNodeInternals:(e,t={triggerFitView:!0})=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,fitViewOnInit:i,fitViewDone:a,fitViewOnInitOptions:s,domNode:u,nodeOrigin:d,debug:p,fitViewSync:f}=c(),{changes:h,updatedInternals:m}=function(e,t,n,o,r){const i=o?.querySelector(".xyflow__viewport");let a=!1;if(!i)return{changes:[],updatedInternals:a};const s=[],l=window.getComputedStyle(i),{m22:c}=new window.DOMMatrixReadOnly(l.transform),u=[];for(const o of e.values()){const e=t.get(o.id);if(e)if(e.hidden)e.internals={...e.internals,handleBounds:void 0},a=!0;else{const i=Uo(o.nodeElement),l=e.measured.width!==i.width||e.measured.height!==i.height;if(i.width&&i.height&&(l||!e.internals.handleBounds||o.force)){const d=o.nodeElement.getBoundingClientRect();e.measured=i,e.internals={...e.internals,positionAbsolute:yo(e,r),handleBounds:{source:tr("source",o.nodeElement,d,c,e.id),target:tr("target",o.nodeElement,d,c,e.id)}},e.parentId&&Sr(e,t,n,{nodeOrigin:r}),a=!0,l&&(s.push({id:e.id,type:"dimensions",dimensions:i}),e.expandParent&&e.parentId&&u.push({id:e.id,parentId:e.parentId,rect:Ao(e,r)}))}}}if(u.length>0){const e=Cr(u,t,n,r);s.push(...e)}return{changes:s,updatedInternals:a}}(e,o,r,u,d);if(m){if(function(e,t,n){const o={...xr,...n};for(const n of e.values())n.parentId&&Sr(n,e,t,o)}(o,r,{nodeOrigin:d}),t.triggerFitView){let e=a;!a&&i&&(e=f({...s,nodes:s?.nodes})),l({fitViewDone:e})}else l({});h?.length>0&&(p&&console.log("React Flow: trigger node changes",h),n?.(h))}},updateNodePositions:(e,t=!1)=>{const n=[],o=[];for(const[r,i]of e){const e={id:r,type:"position",position:i.position,dragging:t};i?.expandParent&&i?.parentId&&e.position&&(n.push({id:r,parentId:i.parentId,rect:{...i.internals.positionAbsolute,width:i.measured.width,height:i.measured.height}}),e.position.x=Math.max(0,e.position.x),e.position.y=Math.max(0,e.position.y)),o.push(e)}if(n.length>0){const{nodeLookup:e,parentLookup:t,nodeOrigin:r}=c(),i=Cr(n,e,t,r);o.push(...i)}c().triggerNodeChanges(o)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:i}=c();e?.length&&(r&&n(Vi(e,o)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:i}=c();e?.length&&(r&&n(function(e,t){return Hi(e,t)}(e,o)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=c();t?r(e.map((e=>Zi(e,!0)))):(r(Wi(o,new Set([...e]),!0)),i(Wi(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=c();t?i(e.map((e=>Zi(e,!0)))):(i(Wi(n,new Set([...e]))),r(Wi(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:o,triggerNodeChanges:r,triggerEdgeChanges:i}=c(),a=t||n,s=(e||o).map((e=>(e.selected=!1,Zi(e.id,!1)))),l=a.map((e=>Zi(e.id,!1)));r(s),i(l)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=c();t?.setScaleExtent([e,n]),l({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=c();t?.setScaleExtent([n,e]),l({maxZoom:e})},setTranslateExtent:e=>{c().panZoom?.setTranslateExtent(e),l({translateExtent:e})},setPaneClickDistance:e=>{c().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o}=c(),r=t.reduce(((e,t)=>t.selected?[...e,Zi(t.id,!1)]:e),[]),i=e.reduce(((e,t)=>t.selected?[...e,Zi(t.id,!1)]:e),[]);n(r),o(i)},setNodeExtent:e=>{const{nodeLookup:t}=c();for(const[,n]of t){const o=Eo(n.internals.positionAbsolute,e);t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:o}})}l({nodeExtent:e})},panBy:e=>{const{transform:t,width:n,height:o,panZoom:r,translateExtent:i}=c();return async function({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}({delta:e,panZoom:r,transform:t,translateExtent:i,width:n,height:o})},fitView:e=>{const{panZoom:t,width:n,height:o,minZoom:r,maxZoom:i,nodeLookup:a}=c();return t?No({nodes:So(a,e),width:n,height:o,panZoom:t,minZoom:r,maxZoom:i},e):Promise.resolve(!1)},fitViewSync:e=>{const{panZoom:t,width:n,height:o,minZoom:r,maxZoom:i,nodeLookup:a}=c();if(!t)return!1;const s=So(a,e);return No({nodes:s,width:n,height:o,panZoom:t,minZoom:r,maxZoom:i},e),s.size>0},cancelConnection:()=>{l({connection:{...ao}})},updateConnection:e=>{l({connection:e})},reset:()=>l({...Ms()})}),c=Object.is,l?oi(l,c):oi;var l,c};function _s({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,fitView:l,nodeOrigin:c,children:u}){const[d]=(0,r.useState)((()=>ks({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:l,nodeOrigin:c})));return(0,o.jsx)(si,{value:d,children:(0,o.jsx)(Qi,{children:u})})}function Os({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:a,width:s,height:l,fitView:c,nodeOrigin:u}){return(0,r.useContext)(ai)?(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(_s,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:l,fitView:c,nodeOrigin:u,children:e})}const Rs={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var As,Is=Ui((function({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:s,nodeTypes:l,edgeTypes:c,onNodeClick:u,onEdgeClick:d,onInit:p,onMove:f,onMoveStart:h,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:w,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:N,onNodeContextMenu:C,onNodeDoubleClick:j,onNodeDragStart:E,onNodeDrag:M,onNodeDragStop:k,onNodesDelete:_,onEdgesDelete:O,onDelete:R,onSelectionChange:A,onSelectionDragStart:I,onSelectionDrag:T,onSelectionDragStop:D,onSelectionContextMenu:P,onSelectionStart:L,onSelectionEnd:z,onBeforeDelete:B,connectionMode:H,connectionLineType:F=so.Bezier,connectionLineStyle:V,connectionLineComponent:Z,connectionLineContainerStyle:W,deleteKeyCode:q="Backspace",selectionKeyCode:$="Shift",selectionOnDrag:Y=!1,selectionMode:X=io.Full,panActivationKeyCode:U="Space",multiSelectionKeyCode:K=(Zo()?"Meta":"Control"),zoomActivationKeyCode:G=(Zo()?"Meta":"Control"),snapToGrid:J,snapGrid:Q,onlyRenderVisibleElements:ee=!1,selectNodesOnDrag:te,nodesDraggable:ne,nodesConnectable:oe,nodesFocusable:re,nodeOrigin:ie=ki,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le=!0,defaultViewport:ce=_i,minZoom:ue=.5,maxZoom:de=2,translateExtent:pe=to,preventScrolling:fe=!0,nodeExtent:he,defaultMarkerColor:me="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:ve=!0,panOnScroll:ye=!1,panOnScrollSpeed:xe=.5,panOnScrollMode:we=ro.Free,zoomOnDoubleClick:be=!0,panOnDrag:Se=!0,onPaneClick:Ne,onPaneMouseEnter:Ce,onPaneMouseMove:je,onPaneMouseLeave:Ee,onPaneScroll:Me,onPaneContextMenu:ke,paneClickDistance:_e=0,nodeClickDistance:Oe=0,children:Re,onReconnect:Ae,onReconnectStart:Ie,onReconnectEnd:Te,onEdgeContextMenu:De,onEdgeDoubleClick:Pe,onEdgeMouseEnter:Le,onEdgeMouseMove:ze,onEdgeMouseLeave:Be,reconnectRadius:He=10,onNodesChange:Fe,onEdgesChange:Ve,noDragClassName:Ze="nodrag",noWheelClassName:We="nowheel",noPanClassName:qe="nopan",fitView:$e,fitViewOptions:Ye,connectOnClick:Xe,attributionPosition:Ue,proOptions:Ke,defaultEdgeOptions:Ge,elevateNodesOnSelect:Je,elevateEdgesOnSelect:Qe,disableKeyboardA11y:et=!1,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:ot,connectionRadius:rt,isValidConnection:it,onError:at,style:st,id:lt,nodeDragThreshold:ct,viewport:ut,onViewportChange:dt,width:pt,height:ft,colorMode:ht="light",debug:mt,...gt},vt){const yt=lt||"1",xt=function(e){const[t,n]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)((()=>{if("system"!==e)return void n(e);const t=Ti(),o=()=>n(t?.matches?"dark":"light");return o(),t?.addEventListener("change",o),()=>{t?.removeEventListener("change",o)}}),[e]),null!==t?t:Ti()?.matches?"dark":"light"}(ht);return(0,o.jsx)("div",{...gt,style:{...st,...Rs},ref:vt,className:a(["react-flow",s,xt]),"data-testid":"rf__wrapper",id:lt,children:(0,o.jsxs)(Os,{nodes:e,edges:t,width:pt,height:ft,fitView:$e,nodeOrigin:ie,children:[(0,o.jsx)(Es,{onInit:p,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:N,onNodeContextMenu:C,onNodeDoubleClick:j,nodeTypes:l,edgeTypes:c,connectionLineType:F,connectionLineStyle:V,connectionLineComponent:Z,connectionLineContainerStyle:W,selectionKeyCode:$,selectionOnDrag:Y,selectionMode:X,deleteKeyCode:q,multiSelectionKeyCode:K,panActivationKeyCode:U,zoomActivationKeyCode:G,onlyRenderVisibleElements:ee,defaultViewport:ce,translateExtent:pe,minZoom:ue,maxZoom:de,preventScrolling:fe,zoomOnScroll:ge,zoomOnPinch:ve,zoomOnDoubleClick:be,panOnScroll:ye,panOnScrollSpeed:xe,panOnScrollMode:we,panOnDrag:Se,onPaneClick:Ne,onPaneMouseEnter:Ce,onPaneMouseMove:je,onPaneMouseLeave:Ee,onPaneScroll:Me,onPaneContextMenu:ke,paneClickDistance:_e,nodeClickDistance:Oe,onSelectionContextMenu:P,onSelectionStart:L,onSelectionEnd:z,onReconnect:Ae,onReconnectStart:Ie,onReconnectEnd:Te,onEdgeContextMenu:De,onEdgeDoubleClick:Pe,onEdgeMouseEnter:Le,onEdgeMouseMove:ze,onEdgeMouseLeave:Be,reconnectRadius:He,defaultMarkerColor:me,noDragClassName:Ze,noWheelClassName:We,noPanClassName:qe,rfId:yt,disableKeyboardA11y:et,nodeExtent:he,viewport:ut,onViewportChange:dt}),(0,o.jsx)(Ii,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:g,onConnectStart:v,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:w,nodesDraggable:ne,nodesConnectable:oe,nodesFocusable:re,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le,elevateNodesOnSelect:Je,elevateEdgesOnSelect:Qe,minZoom:ue,maxZoom:de,nodeExtent:he,onNodesChange:Fe,onEdgesChange:Ve,snapToGrid:J,snapGrid:Q,connectionMode:H,translateExtent:pe,connectOnClick:Xe,defaultEdgeOptions:Ge,fitView:$e,fitViewOptions:Ye,onNodesDelete:_,onEdgesDelete:O,onDelete:R,onNodeDragStart:E,onNodeDrag:M,onNodeDragStop:k,onSelectionDrag:T,onSelectionDragStart:I,onSelectionDragStop:D,onMove:f,onMoveStart:h,onMoveEnd:m,noPanClassName:qe,nodeOrigin:ie,rfId:yt,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:ot,onError:at,connectionRadius:rt,isValidConnection:it,selectNodesOnDrag:te,nodeDragThreshold:ct,onBeforeDelete:B,paneClickDistance:_e,debug:mt}),(0,o.jsx)(Mi,{onSelectionChange:A}),Re,(0,o.jsx)(bi,{proOptions:Ke,position:Ue}),(0,o.jsx)(yi,{rfId:yt,disableKeyboardA11y:et})]})})}));function Ts(e){const[t,n]=(0,r.useState)(e),o=(0,r.useCallback)((e=>n((t=>Vi(e,t)))),[]);return[t,n,o]}function Ds({onStart:e,onChange:t,onEnd:n}){const o=ui();(0,r.useEffect)((()=>{o.setState({onViewportChangeStart:e})}),[e]),(0,r.useEffect)((()=>{o.setState({onViewportChange:t})}),[t]),(0,r.useEffect)((()=>{o.setState({onViewportChangeEnd:n})}),[n])}function Ps({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,o.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:a(["react-flow__background-pattern",n,r])})}function Ls({radius:e,className:t}){return(0,o.jsx)("circle",{cx:e,cy:e,r:e,className:a(["react-flow__background-pattern","dots",t])})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(As||(As={}));const zs={[As.Dots]:1,[As.Lines]:1,[As.Cross]:6},Bs=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Hs({id:e,variant:t=As.Dots,gap:n=20,size:i,lineWidth:s=1,offset:l=0,color:c,bgColor:u,style:d,className:p,patternClassName:f}){const h=(0,r.useRef)(null),{transform:m,patternId:g}=ci(Bs,ri),v=i||zs[t],y=t===As.Dots,x=t===As.Cross,w=Array.isArray(n)?n:[n,n],b=[w[0]*m[2]||1,w[1]*m[2]||1],S=v*m[2],N=Array.isArray(l)?l:[l,l],C=[N[0]*m[2]||1,N[1]*m[2]||1],j=x?[S,S]:b,E=`${g}${e||""}`;return(0,o.jsxs)("svg",{className:a(["react-flow__background",p]),style:{...d,...ia,"--xy-background-color-props":u,"--xy-background-pattern-color-props":c},ref:h,"data-testid":"rf__background",children:[(0,o.jsx)("pattern",{id:E,x:m[0]%b[0],y:m[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:y?(0,o.jsx)(Ls,{radius:S/2,className:f}):(0,o.jsx)(Ps,{dimensions:j,lineWidth:s,variant:t,className:f})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}Hs.displayName="Background";const Fs=(0,r.memo)(Hs);function Vs(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,o.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Zs(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,o.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function Ws(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,o.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function qs(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function $s(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ys({children:e,className:t,...n}){return(0,o.jsx)("button",{type:"button",className:a(["react-flow__controls-button",t]),...n,children:e})}const Xs=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Us({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:l,onFitView:c,onInteractiveChange:u,className:d,children:p,position:f="bottom-left",orientation:h="vertical","aria-label":m="React Flow controls"}){const g=ui(),{isInteractive:v,minZoomReached:y,maxZoomReached:x}=ci(Xs,ri),{zoomIn:w,zoomOut:b,fitView:S}=ta(),N="horizontal"===h?"horizontal":"vertical";return(0,o.jsxs)(wi,{className:a(["react-flow__controls",N,d]),position:f,style:e,"data-testid":"rf__controls","aria-label":m,children:[t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ys,{onClick:()=>{w(),s?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:(0,o.jsx)(Vs,{})}),(0,o.jsx)(Ys,{onClick:()=>{b(),l?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:(0,o.jsx)(Zs,{})})]}),n&&(0,o.jsx)(Ys,{className:"react-flow__controls-fitview",onClick:()=>{S(i),c?.()},title:"fit view","aria-label":"fit view",children:(0,o.jsx)(Ws,{})}),r&&(0,o.jsx)(Ys,{className:"react-flow__controls-interactive",onClick:()=>{g.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),u?.(!v)},title:"toggle interactivity","aria-label":"toggle interactivity",children:v?(0,o.jsx)($s,{}):(0,o.jsx)(qs,{})}),p]})}Us.displayName="Controls";const Ks=(0,r.memo)(Us),Gs=(0,r.memo)((function({id:e,x:t,y:n,width:r,height:i,style:s,color:l,strokeColor:c,strokeWidth:u,className:d,borderRadius:p,shapeRendering:f,selected:h,onClick:m}){const{background:g,backgroundColor:v}=s||{},y=l||g||v;return(0,o.jsx)("rect",{className:a(["react-flow__minimap-node",{selected:h},d]),x:t,y:n,rx:p,ry:p,width:r,height:i,style:{fill:y,stroke:c,strokeWidth:u},shapeRendering:f,onClick:m?t=>m(t,e):void 0})})),Js=e=>e.nodes.map((e=>e.id)),Qs=e=>e instanceof Function?e:()=>e,el=(0,r.memo)((function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:l,onClick:c}){const{node:u,x:d,y:p}=ci((t=>{const n=t.nodeLookup.get(e),{x:o,y:r}=n.internals.positionAbsolute;return{node:n,x:o,y:r}}),ri);if(!u||u.hidden||!$o(u))return null;const{width:f,height:h}=qo(u);return(0,o.jsx)(l,{x:d,y:p,width:f,height:h,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:a,shapeRendering:s,onClick:c,id:u.id})}));var tl=(0,r.memo)((function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=Gs,onClick:s}){const l=ci(Js,ri),c=Qs(t),u=Qs(e),d=Qs(n),p="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,o.jsx)(o.Fragment,{children:l.map((e=>(0,o.jsx)(el,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:p},e)))})}));const nl=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?To(xo(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function ol({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:s="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:u,bgColor:d,maskColor:p,maskStrokeColor:f,maskStrokeWidth:h,position:m="bottom-right",onClick:g,onNodeClick:v,pannable:y=!1,zoomable:x=!1,ariaLabel:w="React Flow mini map",inversePan:b,zoomStep:S=10,offsetScale:N=5}){const C=ui(),j=(0,r.useRef)(null),{boundingRect:E,viewBB:M,rfId:k,panZoom:_,translateExtent:O,flowWidth:R,flowHeight:A}=ci(nl,ri),I=e?.width??200,T=e?.height??150,D=E.width/I,P=E.height/T,L=Math.max(D,P),z=L*I,B=L*T,H=N*L,F=E.x-(z-E.width)/2-H,V=E.y-(B-E.height)/2-H,Z=z+2*H,W=B+2*H,q=`react-flow__minimap-desc-${k}`,$=(0,r.useRef)(0),Y=(0,r.useRef)();$.current=L,(0,r.useEffect)((()=>{if(j.current&&_)return Y.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=je(e);return{update:function({translateExtent:e,width:i,height:a,zoomStep:s=10,pannable:l=!0,zoomable:c=!0,inversePan:u=!1}){let d=[0,0];const p=Qn().on("start",(e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])})).on("zoom",l?r=>{const s=n();if("mousemove"!==r.sourceEvent.type&&"touchmove"!==r.sourceEvent.type||!t)return;const l=[r.sourceEvent.clientX??r.sourceEvent.touches[0].clientX,r.sourceEvent.clientY??r.sourceEvent.touches[0].clientY],c=[l[0]-d[0],l[1]-d[1]];d=l;const p=o()*Math.max(s[2],Math.log(s[2]))*(u?-1:1),f={x:s[0]-c[0]*p,y:s[1]-c[1]*p},h=[[0,0],[i,a]];t.setViewportConstrained({x:f.x,y:f.y,zoom:s[2]},h,e)}:null).on("zoom.wheel",c?e=>{const o=n();if("wheel"!==e.sourceEvent.type||!t)return;const r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,i=o[2]*Math.pow(2,r);t.scaleTo(i)}:null);r.call(p,{})},destroy:function(){r.on("zoom",null)},pointer:Ee}}({domNode:j.current,panZoom:_,getTransform:()=>C.getState().transform,getViewScale:()=>$.current}),()=>{Y.current?.destroy()}}),[_]),(0,r.useEffect)((()=>{Y.current?.update({translateExtent:O,width:R,height:A,inversePan:b,pannable:y,zoomStep:S,zoomable:x})}),[y,x,b,S,O,R,A]);const X=g?e=>{const[t,n]=Y.current?.pointer(e)||[0,0];g(e,{x:t,y:n})}:void 0,U=v?(0,r.useCallback)(((e,t)=>{const n=C.getState().nodeLookup.get(t);v(e,n)}),[]):void 0;return(0,o.jsx)(wi,{position:m,style:{...e,"--xy-minimap-background-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof p?p:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof f?f:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof h?h*L:void 0,"--xy-minimap-node-background-color-props":"string"==typeof i?i:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"string"==typeof c?c:void 0},className:a(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,o.jsxs)("svg",{width:I,height:T,viewBox:`${F} ${V} ${Z} ${W}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:j,onClick:X,children:[w&&(0,o.jsx)("title",{id:q,children:w}),(0,o.jsx)(tl,{onClick:U,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:s,nodeStrokeWidth:c,nodeComponent:u}),(0,o.jsx)("path",{className:"react-flow__minimap-mask",d:`M${F-H},${V-H}h${Z+2*H}v${W+2*H}h${-Z-2*H}z\n        M${M.x},${M.y}h${M.width}v${M.height}h${-M.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ol.displayName="MiniMap",(0,r.memo)(ol),(0,r.memo)((function({nodeId:e,position:t,variant:n=Vr.Handle,className:i,style:s={},children:l,color:c,minWidth:u=10,minHeight:d=10,maxWidth:p=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:m,onResizeStart:g,onResize:v,onResizeEnd:y}){const x=xa(),w="string"==typeof e?e:x,b=ui(),S=(0,r.useRef)(null),N=n===Vr.Line?"right":"bottom-right",C=t??N,j=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(S.current&&w)return j.current||(j.current=function({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=je(e);return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:s,onResizeStart:l,onResize:c,onResizeEnd:u,shouldResize:d}){let p={...Xr},f={...Ur};const h=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let m,g,v,y,x=[];const w=Be().on("start",(e=>{const{nodeLookup:o,transform:r,snapGrid:i,snapToGrid:a,nodeOrigin:s}=n();if(m=o.get(t),!m)return;const{xSnapped:c,ySnapped:u}=Xo(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:a});p={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},f={...p,pointerX:c,pointerY:u,aspectRatio:p.width/p.height},g=void 0,m.parentId&&("parent"===m.extent||m.expandParent)&&(g=o.get(m.parentId),v=g&&"parent"===m.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(g):void 0),x=[],y=void 0;for(const[e,n]of o)if(n.parentId===t&&(x.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=Kr(n,m,n.origin??s);y=y?[[Math.min(e[0][0],y[0][0]),Math.min(e[0][1],y[0][1])],[Math.max(e[1][0],y[1][0]),Math.max(e[1][1],y[1][1])]]:e}l?.(e,{...p})})).on("drag",(e=>{const{transform:t,snapGrid:r,snapToGrid:i,nodeOrigin:l}=n(),u=Xo(e.sourceEvent,{transform:t,snapGrid:r,snapToGrid:i}),w=[];if(!m)return;const{x:b,y:S,width:N,height:C}=p,j={},E=m.origin??l,{width:M,height:k,x:_,y:O}=function(e,t,n,o,r,i,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:d}=t,p=u&&d,{xSnapped:f,ySnapped:h}=n,{minWidth:m,maxWidth:g,minHeight:v,maxHeight:y}=o,{x,y:w,width:b,height:S,aspectRatio:N}=e;let C=Math.floor(u?f-e.pointerX:0),j=Math.floor(d?h-e.pointerY:0);const E=b+(l?-C:C),M=S+(c?-j:j),k=-i[0]*b,_=-i[1]*S;let O=$r(E,m,g),R=$r(M,v,y);if(a){let e=0,t=0;l&&C<0?e=Wr(x+C+k,a[0][0]):!l&&C>0&&(e=qr(x+E+k,a[1][0])),c&&j<0?t=Wr(w+j+_,a[0][1]):!c&&j>0&&(t=qr(w+M+_,a[1][1])),O=Math.max(O,e),R=Math.max(R,t)}if(s){let e=0,t=0;l&&C>0?e=qr(x+C,s[0][0]):!l&&C<0&&(e=Wr(x+E,s[1][0])),c&&j>0?t=qr(w+j,s[0][1]):!c&&j<0&&(t=Wr(w+M,s[1][1])),O=Math.max(O,e),R=Math.max(R,t)}if(r){if(u){const e=$r(E/N,v,y)*N;if(O=Math.max(O,e),a){let e=0;e=!l&&!c||l&&!c&&p?qr(w+_+E/N,a[1][1])*N:Wr(w+_+(l?C:-C)/N,a[0][1])*N,O=Math.max(O,e)}if(s){let e=0;e=!l&&!c||l&&!c&&p?Wr(w+E/N,s[1][1])*N:qr(w+(l?C:-C)/N,s[0][1])*N,O=Math.max(O,e)}}if(d){const e=$r(M*N,m,g)/N;if(R=Math.max(R,e),a){let e=0;e=!l&&!c||c&&!l&&p?qr(x+M*N+k,a[1][0])/N:Wr(x+(c?j:-j)*N+k,a[0][0])/N,R=Math.max(R,e)}if(s){let e=0;e=!l&&!c||c&&!l&&p?Wr(x+M*N,s[1][0])/N:qr(x+(c?j:-j)*N,s[0][0])/N,R=Math.max(R,e)}}}j+=j<0?R:-R,C+=C<0?O:-O,r&&(p?E>M*N?j=(Yr(l,c)?-C:C)/N:C=(Yr(l,c)?-j:j)*N:u?(j=C/N,c=l):(C=j*N,l=c));const A=l?x+C:x,I=c?w+j:w;return{width:b+(l?-C:C),height:S+(c?-j:j),x:i[0]*C*(l?-1:1)+A,y:i[1]*j*(c?-1:1)+I}}(f,h,u,a,s,E,v,y),R=M!==N,A=k!==C,I=_!==b&&R,T=O!==S&&A;if(!(I||T||R||A))return;if((I||T||1===E[0]||1===E[1])&&(j.x=I?_:p.x,j.y=T?O:p.y,p.x=j.x,p.y=j.y,x.length>0)){const e=_-b,t=O-S;for(const n of x)n.position={x:n.position.x-e+E[0]*(M-N),y:n.position.y-t+E[1]*(k-C)},w.push(n)}if((R||A)&&(j.width=R?M:p.width,j.height=A?k:p.height,p.width=j.width,p.height=j.height),g&&m.expandParent){const e=E[0]*(j.width??0);j.x&&j.x<e&&(p.x=e,f.x=f.x-(j.x-e));const t=E[1]*(j.height??0);j.y&&j.y<t&&(p.y=t,f.y=f.y-(j.y-t))}const D=function({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const a=e-t,s=n-o,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&r&&(l[0]=-1*l[0]),s&&i&&(l[1]=-1*l[1]),l}({width:p.width,prevWidth:N,height:p.height,prevHeight:C,affectsX:h.affectsX,affectsY:h.affectsY}),P={...p,direction:D},L=d?.(e,P);!1!==L&&(c?.(e,P),o(j,w))})).on("end",(e=>{u?.(e,{...p}),r?.()}));i.call(w)},destroy:function(){i.on(".drag",null)}}}({domNode:S.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r}=b.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:i}=b.getState(),a=[],s={x:e.x,y:e.y},l=o.get(w);if(l&&l.expandParent&&l.parentId){const t=l.origin??i,n=e.width??l.measured.width,c=e.height??l.measured.height,u=Cr([{id:l.id,parentId:l.parentId,rect:{width:n,height:c,...Yo({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:c},l.parentId,o,t)}}],o,r,i);a.push(...u),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:w,type:"position",position:{...s}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:w,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};a.push(t)}for(const e of t){const t={...e,type:"position"};a.push(t)}n(a)},onEnd:()=>{const e={id:w,type:"dimensions",resizing:!1};b.getState().triggerNodeChanges([e])}})),j.current.update({controlPosition:C,boundaries:{minWidth:u,minHeight:d,maxWidth:p,maxHeight:f},keepAspectRatio:h,onResizeStart:g,onResize:v,onResizeEnd:y,shouldResize:m}),()=>{j.current?.destroy()}}),[C,u,d,p,f,h,g,v,y,m]);const E=C.split("-"),M=n===Vr.Line?"borderColor":"backgroundColor",k=c?{...s,[M]:c}:s;return(0,o.jsx)("div",{className:a(["react-flow__resize-control","nodrag",...E,n,i]),ref:S,style:k,children:l})}));var rl={currentNodeId:null,lastRouteNumber:null,expandingRouteId:null,forceExpandCollapseRoute:null,actionMenuNodeId:null,clipboard:null,nodeUpdatedFlag:!1,forceLayoutUpdate:null,renamePopupRef:null,nodeInsertedIndex:null,nodeInsertedCount:null,nodeDeletedIndex:null,nodeDeletedCount:null,pastedNodeMapping:null,beforeShiftMapping:null};function il(e){var t=0,n=e.children,o=n&&n.length;if(o)for(;--o>=0;)t+=n[o].value;else t=1;e.value=t}function al(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=ll)):void 0===t&&(t=sl);for(var n,o,r,i,a,s=new dl(e),l=[s];n=l.pop();)if((r=t(n.data))&&(a=(r=Array.from(r)).length))for(n.children=r,i=a-1;i>=0;--i)l.push(o=r[i]=new dl(r[i])),o.parent=n,o.depth=n.depth+1;return s.eachBefore(ul)}function sl(e){return e.children}function ll(e){return Array.isArray(e)?e[1]:null}function cl(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function ul(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function dl(e){this.data=e,this.depth=this.height=0,this.parent=null}function pl(e,t){return e.parent===t.parent?1:2}function fl(e){var t=e.children;return t?t[0]:e.t}function hl(e){var t=e.children;return t?t[t.length-1]:e.t}function ml(e,t,n){var o=n/(t.i-e.i);t.c-=o,t.s+=n,e.c+=o,t.z+=n,t.m+=n}function gl(e,t,n){return e.a.parent===t.parent?e.a:n}function vl(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function yl(){var e=pl,t=1,n=1,o=null;function r(r){var l=function(e){for(var t,n,o,r,i,a=new vl(e,0),s=[a];t=s.pop();)if(o=t._.children)for(t.children=new Array(i=o.length),r=i-1;r>=0;--r)s.push(n=t.children[r]=new vl(o[r],r)),n.parent=t;return(a.parent=new vl(null,0)).children=[a],a}(r);if(l.eachAfter(i),l.parent.m=-l.z,l.eachBefore(a),o)r.eachBefore(s);else{var c=r,u=r,d=r;r.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)}));var p=c===u?1:e(c,u)/2,f=p-c.x,h=t/(u.x+p+f),m=n/(d.depth||1);r.eachBefore((function(e){e.x=(e.x+f)*h,e.y=e.depth*m}))}return r}function i(t){var n=t.children,o=t.parent.children,r=t.i?o[t.i-1]:null;if(n){!function(e){for(var t,n=0,o=0,r=e.children,i=r.length;--i>=0;)(t=r[i]).z+=n,t.m+=n,n+=t.s+(o+=t.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+e(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+e(t._,r._));t.parent.A=function(t,n,o){if(n){for(var r,i=t,a=t,s=n,l=i.parent.children[0],c=i.m,u=a.m,d=s.m,p=l.m;s=hl(s),i=fl(i),s&&i;)l=fl(l),(a=hl(a)).a=t,(r=s.z+d-i.z-c+e(s._,i._))>0&&(ml(gl(s,t,o),t,r),c+=r,u+=r),d+=s.m,c+=i.m,p+=l.m,u+=a.m;s&&!hl(a)&&(a.t=s,a.m+=d-u),i&&!fl(l)&&(l.t=i,l.m+=c-p,o=t)}return o}(t,r,t.parent.A||o[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return r.separation=function(t){return arguments.length?(e=t,r):e},r.size=function(e){return arguments.length?(o=!1,t=+e[0],n=+e[1],r):o?null:[t,n]},r.nodeSize=function(e){return arguments.length?(o=!0,t=+e[0],n=+e[1],r):o?[t,n]:null},r}function xl(e){return null==e?null:function(e){if("function"!=typeof e)throw new Error;return e}(e)}dl.prototype=al.prototype={constructor:dl,count:function(){return this.eachAfter(il)},each:function(e,t){let n=-1;for(const o of this)e.call(t,o,++n,this);return this},eachAfter:function(e,t){for(var n,o,r,i=this,a=[i],s=[],l=-1;i=a.pop();)if(s.push(i),n=i.children)for(o=0,r=n.length;o<r;++o)a.push(n[o]);for(;i=s.pop();)e.call(t,i,++l,this);return this},eachBefore:function(e,t){for(var n,o,r=this,i=[r],a=-1;r=i.pop();)if(e.call(t,r,++a,this),n=r.children)for(o=n.length-1;o>=0;--o)i.push(n[o]);return this},find:function(e,t){let n=-1;for(const o of this)if(e.call(t,o,++n,this))return o},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,o=t.children,r=o&&o.length;--r>=0;)n+=o[r].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),o=t.ancestors(),r=null;for(e=n.pop(),t=o.pop();e===t;)r=e,e=n.pop(),t=o.pop();return r}(t,e),o=[t];t!==n;)t=t.parent,o.push(t);for(var r=o.length;e!==n;)o.splice(r,0,e),e=e.parent;return o},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return al(this).eachBefore(cl)},[Symbol.iterator]:function*(){var e,t,n,o,r=this,i=[r];do{for(e=i.reverse(),i=[];r=e.pop();)if(yield r,t=r.children)for(n=0,o=t.length;n<o;++n)i.push(t[n])}while(i.length)}},vl.prototype=Object.create(dl.prototype);var wl={depth:-1},bl={},Sl={};function Nl(e){return e.id}function Cl(e){return e.parentId}function jl(){var e,t=Nl,n=Cl;function o(o){var r,i,a,s,l,c,u,d,p=Array.from(o),f=t,h=n,m=new Map;if(null!=e){const t=p.map(((t,n)=>function(e){let t=(e=`${e}`).length;return Ml(e,t-1)&&!Ml(e,t-2)&&(e=e.slice(0,-1)),"/"===e[0]?e:`/${e}`}(e(t,n,o)))),n=t.map(El),r=new Set(t).add("");for(const e of n)r.has(e)||(r.add(e),t.push(e),n.push(El(e)),p.push(Sl));f=(e,n)=>t[n],h=(e,t)=>n[t]}for(a=0,r=p.length;a<r;++a)i=p[a],c=p[a]=new dl(i),null!=(u=f(i,a,o))&&(u+="")&&(d=c.id=u,m.set(d,m.has(d)?bl:c)),null!=(u=h(i,a,o))&&(u+="")&&(c.parent=u);for(a=0;a<r;++a)if(u=(c=p[a]).parent){if(!(l=m.get(u)))throw new Error("missing: "+u);if(l===bl)throw new Error("ambiguous: "+u);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(null!=e){for(;s.data===Sl&&1===s.children.length;)s=s.children[0],--r;for(let e=p.length-1;e>=0&&(c=p[e]).data===Sl;--e)c.data=null}if(s.parent=wl,s.eachBefore((function(e){e.depth=e.parent.depth+1,--r})).eachBefore(ul),s.parent=null,r>0)throw new Error("cycle");return s}return o.id=function(e){return arguments.length?(t=xl(e),o):t},o.parentId=function(e){return arguments.length?(n=xl(e),o):n},o.path=function(t){return arguments.length?(e=xl(t),o):e},o}function El(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Ml(e,t););return e.slice(0,t)}function Ml(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if(!(1&n))return!0}return!1}var kl=function(){return kl=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},kl.apply(this,arguments)},_l=yl().nodeSize([350,150]).separation((function(){return 1.25}));function Ol(e,t){if(0===e.length)return[];var n=jl().id((function(e){return e.id})).parentId((function(e){var n;return null===(n=t.find((function(t){return t.target===e.id})))||void 0===n?void 0:n.source}))(e),o=_l(n).descendants();return o.forEach((function(e,t){"routerSwitch"===e.data.type&&(e.y-=50),"routerRoute"===e.data.type&&(e.y-=40),e.parent&&(e.y-e.parent.y>150&&(e.y-=e.y-e.parent.y-150),"routerSwitch"===e.parent.data.type&&(e.y-=60),"router"===e.parent.data.type&&e.y-e.parent.y>100&&(e.y-=50),"routerRoute"===e.parent.data.type&&"placeholder"!==e.data.type&&e.y-e.parent.y>50&&(e.y=e.parent.y+50),"routerRoute"===e.parent.data.type&&"placeholder"===e.data.type&&e.y-e.parent.y>70&&(e.y=e.parent.y+120))})),o.map((function(e){var t=e.data;return kl(kl({},t),{position:{x:e.x,y:e.y}})}))}var Rl=function(e){return e.nodeLookup.size},Al=function(e){return e.map((function(e){return kl(kl({},e),{data:kl({},e.data)})}))},Il=function(e,t){var n=new Map,o=new Map;e.forEach((function(e){n.set(e.id,e),e.data.stepNumber=null})),t.forEach((function(e){var t=e.source,n=e.target;o.has(t)||o.set(t,[]),o.get(t).push(n)}));var r=function(t,i){var a,s=n.get(t);if(s&&"placeholder"!==s.type){var l=null!==(a=s.data.stepNumber)&&void 0!==a?a:0;if("routerSwitch"!==s.type&&"routerRoute"!==s.type&&(i+=1,s.data.stepNumber=i),0!==l&&l!==i){var c=i-Number(l);e.forEach((function(e){e.data.stepNumber&&e.data.stepNumber>l&&(e.data.stepNumber=e.data.stepNumber+c)}))}for(var u=0,d=o.get(t)||[];u<d.length;u++){var p=d[u];i=r(p,i)}}return i},i=e.filter((function(e){return!t.some((function(t){return t.target===e.id}))})).map((function(e){return e.id})),a=0;return i.forEach((function(e){a=r(e,a)})),e},Tl=function(e){return e.forEach((function(e){e.children&&(e.children=Tl(e.children)),e.data.hidden=!0})),e},Dl=function(e){return e.forEach((function(e){e.children&&(e.children=Dl(e.children)),e.data.hidden=!1})),e};var Pl=n(942),Ll=n.n(Pl),zl=function(){return(new Date).getTime().toString(36)+Math.random().toString(36).slice(2)},Bl=function(e){for(var t="A".charCodeAt(0),n="Z".charCodeAt(0)-t+1,o="";e>=0;)o=String.fromCharCode(e%n+t)+o,e=Math.floor(e/n)-1;return o},Hl=function(e){return window.triggerApps[e]?window.triggerApps[e]:window.actionApps[e]},Fl=function(e){return window.triggerApps[e]?window.triggerApps[e]:window.actionApps[e]?window.actionApps[e]:window.otherTriggerApps[e]?window.otherTriggerApps[e]:window.otherActionApps[e]};const Vl="css-m_bc4KH",Zl="css-sCwx6vw",Wl="css-v4iyypc",ql="css-MPgSNbn",$l="css-iIDhdyB",Yl="css-ifJ2dIM",Xl="css-dxyOxLk",Ul="css-ZFAhvcH",Kl="css-zqidoJ6",Gl="css-taOl9tO",Jl="css-EUHXeDx",Ql="css-xKr4UCm",ec="css-wd5JPmo",tc="css-ufKKAJH",nc="css-HKbRkOT",oc="css-rgRfjae",rc="css-W3GUDFS",ic="css-RTjL358";var ac=function(){return ac=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ac.apply(this,arguments)};const sc=(0,r.memo)((function(e){var t=e.id,n=e.data,r=function(e){var t=ta(),n=t.getNode,o=t.getNodes,r=t.setNodes,i=t.getEdges,a=t.setEdges;return function(){var t=n(e);if(t){var s=zl(),l={id:s,position:{x:t.position.x,y:t.position.y+120}||{x:0,y:0},type:"placeholder",data:{label:"+"}},c={id:"".concat(t.id,"=>").concat(s),source:t.id,target:s,type:"placeholder"};r((function(t){return t.map((function(t,n){return t.id===e?ac(ac({},t),{type:"step",data:{label:"Action Step",stepIndex:n+1}}):t})).concat([l])})),a((function(t){return t.map((function(t){return t.target===e?ac(ac({},t),{type:"step"}):t})).concat([c])}));var u=o(),d=i(),p=u.find((function(t){var n=d.find((function(e){return e.source===t.id}));return(null==n?void 0:n.target)===e})),f=null==p?void 0:p.data.stepNumber;rl.nodeDeletedIndex=null,f&&(rl.nodeInsertedIndex="number"==typeof f?f+1:0)}}}(t),i=Ll()(Vl,"css-PAa6q0i"),a=Ll()(rc);return(0,o.jsxs)("div",{onClick:r,className:i,title:"Add Step",children:[(0,o.jsx)("div",{className:a,children:n.label}),(0,o.jsx)(ba,{className:ec,type:"target",position:co.Top,isConnectable:!1}),(0,o.jsx)(ba,{className:ec,type:"source",position:co.Bottom,isConnectable:!1})]},zl())})),lc={actionMenu:"css-IK8yINx",actionMenuList:"css-c7mZMXM",actionMenuItem:"css-NuZemgh",disabled:"css-AjIWN2E",deleteActionName:"css-pJu8GSS",actionMenuItemDelete:"css-wmCo4xU",actionMenuItemFocus:"css-OLGWbs6",actionMenuItemIcon:"css-FVOmlWZ",actionMenuItemIconDefault:"css-CNIFxDb",actionMenuItemIconHover:"css-zOessUp",nodeActionTooltip:"css-dAyJUb9",tooltipWrapper:"css-yWpv9ww",nodeActionTooltipContent:"css-CsCBmmN",animateSlideIn:"css-yZKbuUv"};var cc=function(){return cc=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},cc.apply(this,arguments)},uc=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};const dc=function(e){var t=e.onClose,n=e.onRenameNodeTitle,i=e.position,a=e.onManageNotes,s=(0,r.useRef)(null),l=ta(),c=l.getNode,u=l.getNodes,d=l.getEdges,p=l.setNodes,f=l.setEdges,h=l.updateNode;l.deleteElements,(0,r.useEffect)((function(){var e=function(e){s.current&&!s.current.contains(e.target)&&t()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),rl.nodeUpdatedFlag=!1;var m=u(),g=rl.actionMenuNodeId,v=m.find((function(e){return e.id===g})),y=v?m.indexOf(v):0,x=v?v.type:"",w=rl.clipboard,b=v&&"parentType"in v?v.parentType:"",S="Duplicate the current step",N="Paste the copied step below the current step",C="Replace the current step with the copied step",j="Copy the current step to clipboard",E=!1,M=!1,k=!1,_=!1;if(w&&"type"in w){var O=w.type,R="";switch("routerRoute"===O?R="Router Route":"router"===O?R="Router":"step"===O&&(R="Step","routerRoute"===w.parentType&&(R="Route Conditions")),x){case"router":S="There can only be one Router per flow, and it must always be the last step.",N="Cannot paste a ".concat(R," below a Router"),C="Cannot replace the Router with a ".concat(R),"router"===O?C="Replace the current Router with the copied Router. All the children of the current Router will be replaced.":M=!0,E=!0;break;case"routerRoute":S="Duplicate the current Router Route","routerRoute"!==O?(N="A Route step can only be placed after another Route step",C="A Route step must replace another Route step",E=!0,M=!0):(N="Insert the copied Router Route after the current Route",C="Replace the current Router Route with the copied Route. All the children of the current Route will be replaced.");break;case"step":switch(O){case"router":S="There can only be one Router per flow, and it must always be the last step.";var A=m[y+1],I=A?A.type:"";A&&"placeholder"===I?(N="Paste the copied Router below the current step","routerRoute"===b?(C="Cannot replace the current step with a Router",M=!0):C="Replace the current Router with the copied Router"):(N="Cannot paste a Router below a step",C="Cannot replace the current step with a Router",E=!0,M=!0);break;case"routerRoute":S="There can only be one conditional step per Route",N="Cannot paste a Router Route below a step",C="Cannot replace the current step with Router Route",E=!0,M=!0;break;case"step":S="Duplicate the current step",N="Paste the copied step below the current step",C="Replace the current step with the copied step","routerRoute"===b&&(S="There can only be one conditional step per Route",C="Cannot replace a Route Conditions step with a non-conditional step",M=!0),"routerRoute"===w.parentType&&(N="Cannot paste a Route Conditions step elsewhere",C="Cannot replace the current step with a Route Conditions step",E=!0,M=!0),"routerRoute"===b&&"routerRoute"===w.parentType&&(N="Cannot paste a Route Conditions step below another Route Conditions step",C="Replace the current Route Conditions step with the copied Route Conditions step",E=!0,M=!1),0===y&&"routerRoute"===w.parentType&&(C="Cannot replace the step with a Route Conditions step",N="Cannot paste a Route Conditions step below the Trigger step",E=!0,M=!0)}}}else N="Copy a step to use this action",C="Copy a step to use this action","router"===x&&(S="There can only be one Router per flow, and it must always be the last step."),"routerRoute"===b&&(S="There can only be one conditional step per Route"),"routerRoute"===x&&(S="Duplicate the current Router Route"),M=!0;function T(e){var t=[];return e.forEach((function(e){var n=e.id,o=c(n);if(o){var r=cc({},o);t.push(r)}if(e.children){var i=T(e.children);t.push.apply(t,i)}})),t}0===y&&(S="Only one Trigger step is allowed per Workflow, and it must always be the first step",C="Cannot replace the Trigger step, to change the app, edit the step settings"),"Action Step"!==(null==v?void 0:v.data.label)||(null==v?void 0:v.data.app)||(S="Cannot duplicate a placeholder",N="Cannot paste below a placeholder",C="Cannot replace a placeholder",j="Cannot copy a placeholder",E=!0,M=!0,k=!0,_=!0),"router"===x&&(_=!0,M=!0,E=!0,j="Cannot copy a Router"),"undefined"!=typeof Storage&&localStorage.getItem("FlowMatticStepSettings")&&(M=!1);var D=function(e){var t=e.currentTarget.previousElementSibling;if(t){var n=t.querySelector(".".concat(lc.tooltipWrapper));n&&n.setAttribute("data-show-tooltip","true")}},P=function(e){var t=e.currentTarget.previousElementSibling;if(t){var n=t.querySelector(".".concat(lc.tooltipWrapper));n&&n.setAttribute("data-show-tooltip","false")}};w&&(c(w.id)||(E=!0,M=!0,N="Copy a step to use this action",C="Copy a step to use this action"));var L=(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:Ll()(lc.animateSlideIn,lc.actionMenu),ref:s,style:{top:i.y,left:i.x},children:(0,o.jsxs)("ul",{className:lc.actionMenuList,"data-ref-id":rl.actionMenuNodeId,children:["routerRoute"!==b&&(0,o.jsxs)("li",{className:lc.actionMenuItem,onClick:function(e){n(e),t()},children:[(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconDefault),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionRename",children:(0,o.jsx)("path",{fill:"currentColor",d:"M16.59 8.5 6.09 19H4v-2.09L15.92 5l3.49 3.5 1.42-1.42-4.91-4.91L2 16.09V21h4.91L18 9.91 16.59 8.5ZM21.43 19.43c-.65.46-1.12.58-1.43.58-.4 0-.54-.12-.94-1.26-.35-1-.83-2.37-2.42-2.69-2.51-.5-4.51 1.59-7.63 4.94h2.74c1.79-1.89 3.26-3.23 4.49-2.98.43.09.61.49.93 1.39.36 1.04.91 2.6 2.83 2.6.91 0 1.85-.39 2.86-1.16l-1.43-1.42Z"})})}),(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconHover),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionRenameFill",children:(0,o.jsx)("path",{fill:"currentColor",d:"M13.09 5 2 16.09V21h4.91L18 9.91 13.09 5Zm7.74 2.08-4.91-4.91-1.42 1.42 4.91 4.91 1.42-1.42Zm.6 12.35A2.57 2.57 0 0 1 20 20c-.4 0-.54-.12-.94-1.26-.4-1.14-.83-2.36-2.42-2.69-2.56-.51-4.69 1.78-7.39 4.69L9 21h2.74c1.79-1.89 3.27-3.23 4.49-3 .43.09.62.49.93 1.39.31.9.92 2.61 2.84 2.61a4.77 4.77 0 0 0 2.86-1.15l-1.43-1.42Z"})})}),(0,o.jsx)("span",{children:"Rename"})]}),(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltip),children:(0,o.jsx)("div",{className:lc.tooltipWrapper,"data-show-tooltip":"false",children:(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltipContent),children:(0,o.jsx)("span",{className:lc.tooltipText,children:S})})})}),(0,o.jsxs)("li",{className:Ll()(lc.actionMenuItem,0===y||"routerRoute"===b||"router"===x||k?lc.disabled:""),onClick:function(e){!function(e){if(!e.currentTarget.classList.contains(lc.disabled)){var t=u(),n=d(),o=uc([],t,!0),i=uc([],n,!0),a=document.querySelector("[data-ref-id]"),s=a?a.getAttribute("data-ref-id"):"",l=t.find((function(e){return e.id===s})),h=l?l.data.stepNumber:1;rl.nodeDeletedIndex=null,rl.nodeDeletedCount=null,rl.nodeInsertedIndex=h,rl.nodeInsertedCount=1;var m=n.filter((function(e){return e.source===s})),g=zl();if(l)if("routerRoute"===l.type){var v=jl().id((function(e){return e.id})).parentId((function(e){var t;return null===(t=n.find((function(t){return t.target===e.id})))||void 0===t?void 0:t.source}))(t),y=[],w=[];v.descendants().forEach((function(e){if("routerRoute"===x&&e.id===s&&e.children){var a=zl(),u=rl.lastRouteNumber?rl.lastRouteNumber:1,d=u+1,h=Bl(d),m=c(s),g="routeLetter"in e.data?e.data.routeLetter:Bl(u),v="Route ".concat(h," ( Copy of ").concat(g," )");if(null==m?void 0:m.data.customLabel){var b=null==m?void 0:m.data.customLabel;v="Route ".concat(h," ( Copy of ").concat(b," )")}rl.lastRouteNumber=d,m&&(Object.assign(m,{id:a+"routerRoute_"+h,data:cc(cc({},m.data),{label:v,customLabel:v}),routeLetter:h}),(m=JSON.parse(JSON.stringify(m)))&&(y.push(m),o.push(m)));var S=vo(l,t,n),N=T(e.children),C=0,j={};N.forEach((function(e){var t,n;"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type&&(C++,(null===(t=e.data)||void 0===t?void 0:t.stepNumber)&&(null===(n=e.data)||void 0===n?void 0:n.app)&&e.data.app.fm_app&&(j[e.id]=e.data.stepNumber))}));var E={};N.forEach((function(e){var t=e.id;e.id=zl(),j[t]&&(E[e.id]=j[t]),y.push(e),o.push(e)})),rl.nodeInsertedCount=C,rl.pastedNodeMapping=Object.keys(E).length>0?E:null;var M={id:a+"routerRoute_"+h,source:S[0].id,target:a+"routerRoute_"+h,type:"router",routerEdge:!0};i.push(M);var k="";N.forEach((function(e,t){var n=y[t].id,o=0===t?"router":e.type;"routerSwitch"===e.type&&(k=e.id,o="router"),k&&"routerRoute"===e.type&&(n=k,o="router"),k&&"routerRoute"===e.parentType&&(o="router"),"router"===e.type&&(o="step");var r={id:zl(),source:n,target:e.id,type:o};w.push(r),i.push(r)}));var _=JSON.parse(JSON.stringify(o)),O=Al(_),R=Ol(Il(O,i),i);(0,r.startTransition)((function(){p(R),f(i)})),rl.forceLayoutUpdate=zl()}}))}else{var b=l.data.customLabel?"Copy: ".concat(l.data.customLabel):"Copy: ".concat(l.data.eventTitle),S=l?cc(cc({},l),{id:g,data:cc(cc({},l.data),{customLabel:b})}):null;S=JSON.parse(JSON.stringify(S));var N=o.indexOf(l);S&&o.splice(N+1,0,S),p(o);var C=S?cc(cc({},m[0]),{id:g,source:S.id}):null,j=i.indexOf(m[0]);if(C&&i.splice(j+1,0,C),t.find((function(e){return e.id===m[0].target}))&&S){var E=cc(cc({},m[0]),{target:S.id,type:"step"});i[j]=E}f(i),rl.forceLayoutUpdate=zl()}}}(e),t()},onMouseOver:function(e){return D(e)},onMouseOut:function(e){return P(e)},children:[(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconDefault),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionCopy",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M2 22h16V6H2v16ZM4 8h12v12H4V8Z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M6 2v2h14v14h2V2H6Z"})]})}),(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconHover),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionCopyFill",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M18 6H2v16h16V6Z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M6 2v2h14v14h2V2H6Z"})]})}),(0,o.jsx)("span",{children:"Duplicate"})]}),0!==y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltip),children:(0,o.jsx)("div",{className:lc.tooltipWrapper,"data-show-tooltip":"false",children:(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltipContent),children:(0,o.jsx)("span",{className:lc.tooltipText,children:j})})})}),(0,o.jsxs)("li",{className:Ll()(lc.actionMenuItem,_?lc.disabled:""),onClick:function(e){_||function(){var e=u(),t=(d(),document.querySelector("[data-ref-id]")),n=t?t.getAttribute("data-ref-id"):"",o=e.find((function(e){return e.id===n}));o&&(rl.clipboard=o)}(),t()},onMouseOver:function(e){return D(e)},onMouseOut:function(e){return P(e)},children:[(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconDefault),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionCopy",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M2 22h16V6H2v16ZM4 8h12v12H4V8Z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M6 2v2h14v14h2V2H6Z"})]})}),(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconHover),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionCopyFill",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M18 6H2v16h16V6Z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M6 2v2h14v14h2V2H6Z"})]})}),(0,o.jsx)("span",{children:"Copy"})]})]}),(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltip),children:(0,o.jsx)("div",{className:lc.tooltipWrapper,"data-show-tooltip":"false",children:(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltipContent),children:(0,o.jsx)("span",{className:lc.tooltipText,children:N})})})}),(0,o.jsxs)("li",{className:Ll()(lc.actionMenuItem,!rl.clipboard||E?lc.disabled:""),onClick:function(e){_||function(e){if(!e.currentTarget.classList.contains(lc.disabled)){var t=u(),n=d(),o=uc([],t,!0),i=uc([],n,!0),a=rl.clipboard,s=document.querySelector("[data-ref-id]"),l=s?s.getAttribute("data-ref-id"):"",h=t.find((function(e){return e.id===l})),m=h?h.data.stepNumber:1;rl.nodeDeletedIndex=null,rl.nodeDeletedCount=null,rl.nodeInsertedIndex=m,rl.nodeInsertedCount=1;var g=n.filter((function(e){return e.source===l})),v=zl();if(h)if("routerRoute"===h.type){var y=jl().id((function(e){return e.id})).parentId((function(e){var t;return null===(t=n.find((function(t){return t.target===e.id})))||void 0===t?void 0:t.source}))(t);y.descendants().forEach((function(e){if("routerRoute"===x&&e.id===a.id&&e.children){var r=zl(),s=rl.lastRouteNumber?rl.lastRouteNumber:1,l=s+1,u=Bl(l),d=c(a.id),p="routeLetter"in e.data?e.data.routeLetter:Bl(s),f="Route ".concat(u," ( Copy of ").concat(p," )");if(null==d?void 0:d.data.customLabel){var v=null==d?void 0:d.data.customLabel;f="Route ".concat(u," ( Copy of ").concat(v," )")}rl.lastRouteNumber=l;var y=o.indexOf(h);d&&(Object.assign(d,{id:r+"routerRoute_"+u,data:cc(cc({},d.data),{label:f,customLabel:f}),routeLetter:u}),o.splice(y+1,0,d));var w=vo(h,t,n),b=T(e.children),S=0,N={};b.forEach((function(e){var t,n;"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type&&(S++,(null===(t=e.data)||void 0===t?void 0:t.stepNumber)&&(null===(n=e.data)||void 0===n?void 0:n.app)&&e.data.app.fm_app&&(N[e.id]=e.data.stepNumber))}));var C={};t.forEach((function(e){var t,n;if((null===(t=e.data)||void 0===t?void 0:t.stepNumber)&&(null===(n=e.data)||void 0===n?void 0:n.app)&&"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type){var o=e.data.stepNumber;o>m&&(C[e.id]=o)}})),rl.nodeInsertedCount=S,rl.pastedNodeMapping=S>0?N:null,rl.beforeShiftMapping=Object.keys(C).length>0?C:null;var j={};b.forEach((function(e,t){var n=e.id;e.id=zl(),N[n]&&(j[e.id]=N[n]),o.splice(y+1+t,0,e)})),rl.pastedNodeMapping=Object.keys(j).length>0?j:null;var E=i.indexOf(g[0]),M={id:r+"routerRoute_"+u,source:w[0].id,target:r+"routerRoute_"+u,type:"router",routerEdge:!0};i.splice(E+1,0,M);var k="";b.forEach((function(e,t){var n=0===t?r+"routerRoute_"+u:b[t-1].id,o=e.type;"routerSwitch"===e.type&&(k=e.id,o="router"),k&&"routerRoute"===e.type&&(n=k,o="router"),"routerRoute"===e.parentType&&(o="router"),"router"===e.type&&(o="step");var a=i.indexOf(g[0]),s={id:zl(),source:n,target:e.id,type:o};i.splice(a+1+t,0,s)}))}}));var w=JSON.parse(JSON.stringify(o)),b=Al(w),S=Ol(Il(b,i),i);(0,r.startTransition)((function(){p(S),f(i)})),rl.forceLayoutUpdate=zl()}else if("router"===a.type)y=jl().id((function(e){return e.id})).parentId((function(e){var t;return null===(t=n.find((function(t){return t.target===e.id})))||void 0===t?void 0:t.source}))(t),y.descendants().forEach((function(e){if(e.id===a.id&&e.children){var r=zl(),s=(rl.lastRouteNumber?rl.lastRouteNumber:1)+1,l=c(a.id);rl.lastRouteNumber=s;var u=go(h,t,n)[0],d=o.indexOf(u),m=o.indexOf(h),v=d||m;l&&(Object.assign(l,{id:r}),o.splice(v,1,l));var y=T(e.children);y.forEach((function(e,t){e.id=zl(),o.splice(v+1+t,0,e)}));var x=i.indexOf(g[0]),w={id:r,source:h.id,target:r,type:"step",routerEdge:!0};i.splice(x,1,w);var b="";y.forEach((function(e,t){var n=0===t?r:y[t-1].id,o=e.type;"routerSwitch"===e.type&&(b=e.id,o="router"),b&&"routerRoute"===e.type&&(n=b,o="router"),"routerRoute"===e.parentType&&(o="router"),"router"===e.type&&(o="step");var a=i.indexOf(g[0]),s={id:zl(),source:n,target:e.id,type:o};i.splice(a+1,0,s)}));var S=JSON.parse(JSON.stringify(o));p(S),f(i)}}));else{var N=h?cc(cc({},a),{id:v}):null,C=o.indexOf(h);N&&o.splice(C+1,0,N);var j=N?cc(cc({},g[0]),{id:v,source:N.id}):null,E=i.indexOf(g[0]);if(j&&i.splice(E+1,0,j),t.find((function(e){return e.id===g[0].target}))&&N){var M=cc(cc({},g[0]),{target:N.id,type:"step"});i[E]=M}w=JSON.parse(JSON.stringify(o));var k=Al(w),_=Ol(Il(k,i),i);(0,r.startTransition)((function(){p(_),f(i)}))}}}(e),t()},onMouseOver:function(e){return D(e)},onMouseOut:function(e){return P(e)},children:[(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconDefault),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionAttachment",children:(0,o.jsx)("path",{fill:"currentColor",d:"M7.01 21c1.28 0 2.56-.49 3.54-1.46L21.12 8.96a3 3 0 0 0 0-4.24 3 3 0 0 0-4.24 0L6.31 15.29l1.41 1.41L18.3 6.13a.996.996 0 1 1 1.41 1.41L9.13 18.12a3 3 0 0 1-4.24 0 3 3 0 0 1 0-4.24l8.49-8.48-1.41-1.41-8.49 8.48a5.003 5.003 0 0 0 0 7.07c.97.97 2.25 1.46 3.53 1.46Z"})})}),(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconHover),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionAttachment",children:(0,o.jsx)("path",{fill:"currentColor",d:"M7.01 21c1.28 0 2.56-.49 3.54-1.46L21.12 8.96a3 3 0 0 0 0-4.24 3 3 0 0 0-4.24 0L6.31 15.29l1.41 1.41L18.3 6.13a.996.996 0 1 1 1.41 1.41L9.13 18.12a3 3 0 0 1-4.24 0 3 3 0 0 1 0-4.24l8.49-8.48-1.41-1.41-8.49 8.48a5.003 5.003 0 0 0 0 7.07c.97.97 2.25 1.46 3.53 1.46Z"})})}),(0,o.jsx)("span",{children:"Paste below"})]}),0!==y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltip),children:(0,o.jsx)("div",{className:lc.tooltipWrapper,"data-show-tooltip":"false",children:(0,o.jsx)("div",{className:Ll()(lc.nodeActionTooltipContent),children:(0,o.jsx)("span",{className:lc.tooltipText,children:C})})})}),(0,o.jsxs)("li",{className:Ll()(lc.actionMenuItem,M?lc.disabled:""),onClick:function(e){_||function(e){if(!e.currentTarget.classList.contains(lc.disabled)){var t=document.querySelector("[data-ref-id]"),n=t?t.getAttribute("data-ref-id"):"",o=m.find((function(e){return e.id===n})),i=rl.clipboard;if(!i){var a=localStorage.getItem("FlowMatticStepSettings");if(a){var s=JSON.parse(a||""),l=s.actionAppArgs?cc({},s.actionAppArgs):{},u=cc({},s),g=cc(cc({},l),u);if(delete g.capturedData,delete g.applicationEvents,delete g.application,delete g.type,delete g.stepID,delete g.stepIndex,delete g.newAction,delete g.insertAfter,delete g.routerRoute,delete g.customJSON,delete g.applicationAction,delete g.contentType,delete g.authType,delete g.connectID,delete g.endpointURL,delete g.stepTitle,delete g.eid,delete g.actionAppArgs,delete g.action,delete s.capturedData.fm_raw_response,s.actionAppArgs=g,o){var v=cc(cc({},o),{data:cc(cc({},o.data),{app:Fl(s.application),eventSlug:s.action}),actionAppArgs:s.actionAppArgs,application:s.application,action:s.action,captureResponse:s.capturedData});i=v}}}var y=cc({},i);if(rl.nodeUpdatedFlag=!1,n&&o)if("routerRoute"===o.type){var w=d(),b=uc([],m,!0),S=uc([],w,!0),N=w.filter((function(e){return e.source===n})),C=jl().id((function(e){return e.id})).parentId((function(e){var t;return null===(t=w.find((function(t){return t.target===e.id})))||void 0===t?void 0:t.source}))(m),j=[];C.descendants().forEach((function(e){"routerRoute"===x&&e.id===i.id&&e.children&&T(e.children).forEach((function(e,t){e.id=zl(),j.push(e)}))})),C.descendants().forEach((function(e){var t,r;if("routerRoute"===x&&e.id===n&&e.children){var a=zl(),s=rl.lastRouteNumber?rl.lastRouteNumber:1,l=s+1,u=Bl(l),d=c(i.id),p="routeLetter"in e.data?e.data.routeLetter:Bl(s),f="Route ".concat(u," ( Copy of ").concat(p," )");if(null==d?void 0:d.data.customLabel){var h=null==d?void 0:d.data.customLabel;f="Route ".concat(u," ( Copy of ").concat(h," )")}rl.lastRouteNumber=l;var g=b.indexOf(o);d&&(Object.assign(d,{id:a+"routerRoute_"+u,position:e.data.position,data:cc(cc({},d.data),{label:f,customLabel:f}),routeLetter:u}),b.splice(g,1,d));var v=vo(o,m,w),y=T(e.children),C=y.filter((function(e){return"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type})).length,E=j.filter((function(e){return"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type})).length-C>0,M={};j.forEach((function(e){var t,n;"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type&&(null===(t=e.data)||void 0===t?void 0:t.stepNumber)&&(null===(n=e.data)||void 0===n?void 0:n.app)&&e.data.app.fm_app&&(M[e.id]=e.data.stepNumber)}));var k={};if(E){var _=null===(r=null===(t=y.find((function(e){return"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type})))||void 0===t?void 0:t.data)||void 0===r?void 0:r.stepNumber;if(_){var O=_+C;b.forEach((function(e){var t,n;if((null===(t=e.data)||void 0===t?void 0:t.stepNumber)&&(null===(n=e.data)||void 0===n?void 0:n.app)&&"routerSwitch"!==e.type&&"routerRoute"!==e.type&&"router"!==e.type&&"placeholder"!==e.type){var o=e.data.stepNumber;o>=O&&(k[e.id]=o)}}))}}y.forEach((function(e,t){var n=e.id,o=b.findIndex((function(e){return e.id===n}));b.splice(o,1)})),j.forEach((function(e,t){b.splice(g+1+t,0,e)})),rl.nodeDeletedIndex=null,rl.nodeDeletedCount=null,rl.nodeInsertedIndex=null,rl.nodeInsertedCount=null,rl.pastedNodeMapping=Object.keys(M).length>0?M:null,rl.beforeShiftMapping=Object.keys(k).length>0?k:null;var R=S.indexOf(N[0]),A={id:a+"routerRoute_"+u,source:v[0].id,target:a+"routerRoute_"+u,type:"router",routerEdge:!0};S.splice(R,1,A);var I="";y.forEach((function(e,t){var n=S.find((function(t){return t.target===e.id}));if(n){var o=S.indexOf(n);S.splice(o,1)}})),j.forEach((function(e,t){var n=0===t?a+"routerRoute_"+u:j[t-1].id,o=e.type;"routerSwitch"===e.type&&(I=e.id,o="router"),I&&"routerRoute"===e.type&&(n=I,o="router"),"parentType"in e&&"routerRoute"===e.parentType&&(o="router"),"router"===e.type&&(o="step");var r=S.indexOf(N[0]),i={id:zl(),source:n,target:e.id,type:o};S.splice(r+t,0,i)}))}}));var E=JSON.parse(JSON.stringify(b)),M=Al(E),k=Ol(Il(M,S),S);(0,r.startTransition)((function(){p(k),f(S)})),rl.forceLayoutUpdate=zl()}else if("router"===i.type){var _=d(),O=uc([],m,!0),R=uc([],_,!0),A=_.filter((function(e){return e.source===n}));C=jl().id((function(e){return e.id})).parentId((function(e){var t;return null===(t=_.find((function(t){return t.target===e.id})))||void 0===t?void 0:t.source}))(m),C.descendants().forEach((function(e){e.id===o.id&&e.children&&T(e.children).forEach((function(e){var t=O.findIndex((function(t){return t.id===e.id})),n=R.find((function(t){return t.target===e.id}));if(n){var o=R.indexOf(n);R.splice(o,1)}O.splice(t,1)}))})),C.descendants().forEach((function(e){if(e.id===i.id&&e.children){var t=zl(),n=(rl.lastRouteNumber?rl.lastRouteNumber:1)+1,r=c(i.id);rl.lastRouteNumber=n;var a=vo(o,m,_),s=O.indexOf(o);r&&(Object.assign(r,{id:t}),O.splice(s,1,r));var l=T(e.children);l.forEach((function(e,t){e.id=zl(),O.splice(s+1+t,0,e)}));var u=R.indexOf(A[0]),d={id:t,source:a[0].id,target:t,type:"step",routerEdge:!0};R.splice(u,0,d);var h="";l.forEach((function(e,n){var o=0===n?t:l[n-1].id,r=e.type;"routerSwitch"===e.type&&(h=e.id,r="router"),h&&"routerRoute"===e.type&&(o=h,r="router"),"routerRoute"===e.parentType&&(r="router"),"router"===e.type&&(r="step");var i=R.indexOf(A[0]),a={id:zl(),source:o,target:e.id,type:r};R.splice(i+1,0,a)}));var g=JSON.parse(JSON.stringify(O));p(g),f(R)}}))}else{var I=c(n),D=I?I.data.stepNumber:2,P=I?I.position:{x:0,y:0};v=y?cc(cc({},y),{id:n,position:P,data:cc(cc({},y.data),{stepNumber:D})}):I,E=JSON.parse(JSON.stringify(v)),v&&h(n,E),rl.forceLayoutUpdate=zl()}}}(e),t()},onMouseOver:function(e){return D(e)},onMouseOut:function(e){return P(e)},children:[(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconDefault),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionAttachment",children:(0,o.jsx)("path",{fill:"currentColor",d:"M7.01 21c1.28 0 2.56-.49 3.54-1.46L21.12 8.96a3 3 0 0 0 0-4.24 3 3 0 0 0-4.24 0L6.31 15.29l1.41 1.41L18.3 6.13a.996.996 0 1 1 1.41 1.41L9.13 18.12a3 3 0 0 1-4.24 0 3 3 0 0 1 0-4.24l8.49-8.48-1.41-1.41-8.49 8.48a5.003 5.003 0 0 0 0 7.07c.97.97 2.25 1.46 3.53 1.46Z"})})}),(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconHover),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionAttachment",children:(0,o.jsx)("path",{fill:"currentColor",d:"M7.01 21c1.28 0 2.56-.49 3.54-1.46L21.12 8.96a3 3 0 0 0 0-4.24 3 3 0 0 0-4.24 0L6.31 15.29l1.41 1.41L18.3 6.13a.996.996 0 1 1 1.41 1.41L9.13 18.12a3 3 0 0 1-4.24 0 3 3 0 0 1 0-4.24l8.49-8.48-1.41-1.41-8.49 8.48a5.003 5.003 0 0 0 0 7.07c.97.97 2.25 1.46 3.53 1.46Z"})})}),(0,o.jsx)("span",{children:"Paste to replace"})]})]}),(0,o.jsxs)("li",{className:lc.actionMenuItem,onClick:function(e){t(),a&&a(e)},children:[(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconDefault),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"commentBlank",children:(0,o.jsx)("path",{fill:"currentColor",d:"M10 16H4V4h16v12h-5.47L9.5 22h2.61l3.36-4H22V2H2v16h8v-2Z"})})}),(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconHover),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"commentBlankFill",children:(0,o.jsx)("path",{fill:"currentColor",d:"M10 22h2.11l3.36-4H22V2H2v16h8v4Z"})})}),(0,o.jsx)("span",{children:"Manage Notes"})]}),y>0&&"routerRoute"!==b&&(0,o.jsxs)("li",{className:Ll()(lc.actionMenuItem,lc.actionMenuItemDelete),onClick:function(e){!function(e){var n=document.querySelector(".css-pJu8GSS"),o=e.currentTarget;n.textContent="Really delete?",o.classList.add(lc.actionMenuItemFocus),setTimeout((function(){n.textContent="Delete",o.classList.remove(lc.actionMenuItemFocus)}),5e3),o.addEventListener("click",(function(){if("Delete"!==n.textContent){t();var e=u(),o=d(),r=uc([],e,!0),i=uc([],o,!0),a=document.querySelector("[data-ref-id]"),s=a?a.getAttribute("data-ref-id"):"",l=e.find((function(e){return e.id===s})),c=l?l.type:"";if(l){var h=vo(l,e,o),m=go(l,e,o),g=bo([l],o),v=h[0],y=m[0];rl.nodeInsertedIndex=null,rl.nodeInsertedCount=null,rl.nodeDeletedIndex=v.data.stepNumber,rl.nodeDeletedCount=1;var x=v?v.id:"",w=y?y.id:"",b=g.filter((function(e){return e.source===x})),S=g.filter((function(e){return e.target===w}));if("router"!==c&&"routerRoute"!==c){var N=r.indexOf(l);r.splice(N,1),p(r);var C=i.indexOf(b[0]),j=i.indexOf(S[0]);i[j].source=x,i.splice(C,1),f(i),rl.forceLayoutUpdate=zl()}else{var E=yl().nodeSize([350,150]).separation((function(){return 1.25})),M=void 0,k=void 0,_=0,O=jl().id((function(e){return e.id})).parentId((function(e){var t;return null===(t=o.find((function(t){return t.target===e.id})))||void 0===t?void 0:t.source}))(e);O.descendants().forEach((function(e){var t,n;if("routerRoute"===c&&"router"===e.data.type&&e.children){var o=null===(t=e.children[0].children)||void 0===t?void 0:t.findIndex((function(e){return e.id===s}));e.children&&e.children[0].children&&void 0!==o&&s===(null===(n=e.children[0].children[o])||void 0===n?void 0:n.id)&&1===e.children[0].children.length&&(M=!0,k=e.id,delete e.children)}if(e.id===s&&e.children){var r=function(e){var t=0;return"routerSwitch"!==e.data.type&&"routerRoute"!==e.data.type&&"router"!==e.data.type&&"placeholder"!==e.data.type&&(t=1),e.children&&e.children.forEach((function(e){t+=r(e)})),t};e.children.forEach((function(e){_+=r(e)})),delete e.children}}));var R=E(O).descendants().map((function(e){return e.id!==s?M&&k&&e.id===k?null:cc(cc({},e.data),{position:{x:e.x,y:e.y}}):null})).filter((function(e){return null!==e&&"data"in e&&"label"in e.data&&"stepNumber"in e.data})),A=o.filter((function(e){return!R.find((function(t){return e.source===t.id}))})),I={id:"".concat(s),position:{x:v?v.position.x:0,y:v?v.position.y+150:0},type:"placeholder",data:{label:"+"}};if("routerRoute"!==c){var T=R.findIndex((function(e){return e.id===x}));R.splice(T+1,0,I)}if(M){var D=r.findIndex((function(e){return e.id===k}));R.splice(D+1,0,I)}p(R),A.forEach((function(e){var t=i.indexOf(e);delete i[t]}));var P=i.filter((function(e){return null!==e}));if(C=P.indexOf(b[0]),M){var L=i.filter((function(e){return e.target===k})),z=P.indexOf(L[0]);P[z].target=s||"",P[z].type="placeholder"}else P[C].type="placeholder",P[C].source=x;"routerRoute"!==c||M||P.splice(C,1),f(P),_>0&&(rl.nodeDeletedCount=_),rl.forceLayoutUpdate=zl()}}}}),{once:!0})}(e)},children:[(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconDefault),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionTrash",children:(0,o.jsx)("path",{fill:"currentColor",d:"M15.98 20H8.02L7.19 9h-2l.97 13h11.68l.97-13h-2l-.83 11ZM20.41 4.55l-.34-1.97-5.12.89-1-.84-4.86.86-.65 1.13-5.12.89.35 1.98 16.74-2.94Z"})})}),(0,o.jsx)("span",{className:Ll()(lc.actionMenuItemIcon,lc.actionMenuItemIconHover),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"actionTrashFill",children:(0,o.jsx)("path",{fill:"currentColor",d:"M6.17 22h11.67l.98-13H5.19l.98 13ZM20.42 4.55l-.35-1.97-5.12.89-.99-.84-4.86.86-.66 1.13-5.11.89.34 1.98 16.75-2.94Z"})})}),(0,o.jsx)("span",{className:lc.deleteActionName,children:"Delete"})]})]})})});return ii.createPortal(L,document.body)},pc="css-jvQMwRR",fc=function(e){var t,n=e.initialName,i=e.onRename,a=e.onCancel,s=e.position,l=e.setEventLabel,c=e.currentNodeId,u=(0,r.useState)(n),d=u[0],p=u[1],f=(0,r.useRef)(null),h=(0,r.useRef)(null),m=(0,r.useState)(""),g=m[0],v=m[1],y=(0,r.useState)(!0),x=y[0],w=y[1];(0,r.useEffect)((function(){h.current&&h.current.focus()}),[h,c]),(0,r.useEffect)((function(){l&&p(l)}),[l]),(0,r.useEffect)((function(){p(d)}),[d]);var b=function(){a(),rl.renamePopupRef=null};return(0,r.useEffect)((function(){rl.renamePopupRef&&rl.renamePopupRef!==c&&b()}),[rl.renamePopupRef,c]),(0,r.useEffect)((function(){function e(e){f.current&&!f.current.contains(e.target)&&b()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,o.jsxs)("div",{ref:f,className:Ll()("css-dsCwBgP",g),style:{top:s.y,left:s.x},children:[(0,o.jsx)("input",{type:"text",value:d,onChange:function(e){0===e.target.value.length?(v("css-tmWeXUq"),w(!1)):(v(pc),w(!0)),p(e.target.value)},className:"css-j2f5cme",ref:h,onFocus:function(){return v(pc)},onBlur:function(){return v("")}}),(0,o.jsx)("button",{onClick:function(){i(d),rl.renamePopupRef=null},className:Ll()("css-hVHhuh1",(t={},t["css-taJN0kV"]=!x,t)),disabled:!x,children:"Rename"}),(0,o.jsx)("button",{onClick:b,className:"css-oh3thm7",children:"Cancel"})]})};var hc=n(312),mc=n.n(hc);mc().setAppElement("#workflow-builder-root");const gc=function(e){var t=e.isOpen,n=e.onClose,i=e.onSave,a=e.currentNotes,s=(0,r.useState)(a),l=s[0],c=s[1],u=(0,r.useRef)(null);(0,r.useEffect)((function(){var e;null===(e=u.current)||void 0===e||e.focus()}),[t]);var d=function(){u.current&&(u.current.style.height="auto",u.current.style.height=u.current.scrollHeight+"px")};return(0,r.useEffect)((function(){d()}),[l]),(0,o.jsx)(mc(),{isOpen:t,onRequestClose:function(){return!1},onAfterOpen:function(){d(),u.current&&u.current.focus()},contentLabel:"Notes Modal",style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"none",zIndex:7},content:{padding:"0px",borderRadius:"10px",width:"500px",height:"fit-content",margin:"auto",overflow:"visible",border:"none",background:"transparent"}},children:(0,o.jsx)("div",{className:"w-100",children:(0,o.jsx)("div",{className:"modal-dialog w-100 m-0",children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h5",{className:"modal-title",children:"Custom Notes"}),(0,o.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:n})]}),(0,o.jsx)("div",{className:"modal-body",children:(0,o.jsx)("textarea",{ref:u,className:"border-light",value:l,onChange:function(e){c(e.target.value)},style:{width:"100%",minHeight:"150px",padding:"8px",resize:"none",overflow:"hidden"}})}),(0,o.jsx)("div",{className:"modal-footer",children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,o.jsx)("button",{className:"btn btn-outline-secondary btn-sm",onClick:n,children:"Close"}),(0,o.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){i(l),n()},children:"Save"})]})})]})})})})},vc=(0,r.memo)((function(e){var t,n,i,a,s,l,c,u=e.id,d=e.data;if(d.app){var p=Fl(d.app.fm_app);d.app=p}var f=ta(),h=f.getNodes,m=(f.setEdges,f.getNode),g=f.updateNode,v=Ts(h()),y=(v[0],v[1],v[2],d.app&&d.app.name?d.app.name:1===d.stepNumber?"Trigger":"Action"),x=(d.stepNumber,(null===(t=d.app)||void 0===t?void 0:t.name)?Yl:Ul),w=d.eventSlug,b=m(u),S=(0,r.useState)(!1),N=S[0],C=S[1],j=d.app,E=(0,r.useState)(!1),M=E[0],k=E[1],_=(0,r.useState)(!1),O=_[0],R=_[1],A=(0,r.useState)({x:0,y:0}),I=A[0],T=A[1];if(b&&b.skip_execution){var D=b.skip_execution;"Yes"!==D&&"on"!==D||N?"No"===D&&N&&C(!1):C(!0)}Ds({onStart:function(){return R(!1)}});var P=H(d.app,w)?H(j,w):"Choose an event",L=(0,r.useState)(d.customLabel||P),z=L[0],B=L[1];function H(e,t){if(e){var n=e.actions,o=e.triggers,r="Choose an event",i=1===d.stepNumber?o:n;if(i&&t){if(i[w]&&"title"in i[w])return i[t].title;for(var a in i){var s=i[a];if(s[0]&&"object"==typeof s[0]&&w in s[0]&&s[0][w]){r=s[0][w].title;break}}return r}}}d.customLabel&&(P=d.customLabel),(0,r.useEffect)((function(){B(P)}),[P]);var F=(0,r.useState)(!1),V=F[0],Z=F[1],W=(0,r.useState)({x:0,y:0}),q=W[0],$=W[1];return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:Ll()(Vl,x,N?"css-zJVHHS6":""),title:"Click to edit settings","data-stepnumber":d.stepNumber,children:(0,o.jsxs)("div",{className:Ll()(Wl),children:[(0,o.jsx)("div",{className:Ll()(Zl),children:(0,o.jsxs)("div",{className:"step-icon",children:[(null===(n=d.app)||void 0===n?void 0:n.icon)&&(0,o.jsx)("img",{src:(null===(i=d.app)||void 0===i?void 0:i.icon)||"",alt:(null===(a=d.app)||void 0===a?void 0:a.name)||"Action Step",style:{width:"34px",height:"34px"}}),!(null===(s=d.app)||void 0===s?void 0:s.icon)&&(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"34",width:"34",color:"neutral700",name:"miscBolt",children:(0,o.jsx)("path",{fill:"currentColor",d:"M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Zm4.87-11L11 18v-5H7.13L13 6v5h3.87Z"})})]})}),(0,o.jsxs)("div",{className:Xl,children:[(0,o.jsx)("div",{className:ic,children:(0,o.jsx)("div",{style:{margin:0,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:14,fontFamily:"Inter",textAlign:"left"},children:(0,o.jsx)("span",{className:ql,children:y})})}),(0,o.jsx)("div",{className:ic,children:(0,o.jsxs)("div",{className:"step-index me-2",children:[(0,o.jsxs)("strong",{children:[d.stepNumber,"."]})," ",(0,o.jsx)("span",{className:$l,children:z})]})})]}),(0,o.jsx)("div",{className:Kl,children:(0,o.jsx)("div",{className:Ll()(Gl,Jl),children:(0,o.jsx)("button",{type:"button",className:Ql,onClick:function(e){e.preventDefault(),rl.actionMenuNodeId=null,R(!1);var t=e.target.getBoundingClientRect();T({x:t.left+40,y:t.bottom-35}),setTimeout((function(){rl.actionMenuNodeId=u,R(!0)}),5)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"20",width:"20",color:"currentColor",name:"navMoreVert",children:(0,o.jsx)("path",{fill:"currentColor",d:"M12 14.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM12 21.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM12 7.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z"})})})})})]})},zl()),O&&rl.actionMenuNodeId===u&&(0,o.jsx)(dc,{onClose:function(){R(!1)},onRenameNodeTitle:function(e){var t=rl.actionMenuNodeId;t&&$({x:0,y:-62}),rl.renamePopupRef=t,Z(!0)},position:I,onManageNotes:function(){k(!0)}}),V&&rl.actionMenuNodeId&&(0,o.jsx)(fc,{initialName:null!==(c=null===(l=m(rl.actionMenuNodeId))||void 0===l?void 0:l.data.customLabel)&&void 0!==c?c:z,onRename:function(e){var t=rl.actionMenuNodeId;if(t){var n=m(t);n&&(n.data.customLabel=e,B(e))}Z(!1)},onCancel:function(){rl.renamePopupRef=null,Z(!1)},position:q,setEventLabel:z,currentNodeId:rl.actionMenuNodeId}),M&&(0,o.jsx)(gc,{isOpen:M,onClose:function(){return k(!1)},onSave:function(e){b&&(b.data.customNotes=e,g(b.id,b))},currentNotes:(null==b?void 0:b.data.customNotes)||""}),(0,o.jsx)(ba,{className:ec,type:"target",position:co.Top,isConnectable:!1}),(0,o.jsx)(ba,{className:ec,type:"source",position:co.Bottom,isConnectable:!1})]})})),yc=(0,r.memo)((function(e){var t,n,i,a,s,l,c,u=e.id,d=e.data,p=(0,r.useState)(Kl),f=p[0],h=p[1],m=ta(),g=(m.getNodes,m.setEdges,m.getNode),v=m.updateNode,y=(0,r.useState)(!1),x=y[0],w=y[1],b=(0,r.useState)({x:0,y:0}),S=b[0],N=b[1],C=(0,r.useState)(!1),j=C[0],E=C[1],M=g(u),k=d.label?d.label:"Action Step",_=(null===(t=d.app)||void 0===t?void 0:t.name)?Yl:Ul,O=(0,r.useState)(void 0),R=O[0],A=O[1];Ds({onStart:function(){return w(!1)}});var I="Split tasks by conditions";d.customLabel&&(I=d.customLabel),(0,r.useEffect)((function(){I&&A(I)}),[I]);var T=(0,r.useState)(!1),D=T[0],P=T[1],L=(0,r.useState)({x:0,y:0}),z=L[0],B=L[1];return(0,o.jsxs)("div",{className:Ll()(Vl,_),title:"Click to edit settings",children:[(0,o.jsxs)("div",{className:Ll()(Wl),children:[(0,o.jsx)("div",{className:Ll()(Zl),children:(0,o.jsxs)("div",{className:"step-icon",children:[(null===(n=d.app)||void 0===n?void 0:n.icon)&&(0,o.jsx)("img",{src:(null===(i=d.app)||void 0===i?void 0:i.icon)||"",alt:(null===(a=d.app)||void 0===a?void 0:a.name)||"Action Step",style:{width:"34px",height:"34px"}}),!(null===(s=d.app)||void 0===s?void 0:s.icon)&&(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"34",width:"34",color:"neutral700",name:"miscBolt",children:(0,o.jsx)("path",{fill:"currentColor",d:"M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Zm4.87-11L11 18v-5H7.13L13 6v5h3.87Z"})})]})}),(0,o.jsxs)("div",{className:Xl,children:[(0,o.jsx)("div",{className:ic,children:(0,o.jsx)("div",{style:{margin:0,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:14,fontFamily:"Inter",textAlign:"left"},children:(0,o.jsx)("span",{className:ql,children:k})})}),(0,o.jsx)("div",{className:ic,children:(0,o.jsxs)("div",{className:"step-index me-2",children:[(0,o.jsxs)("strong",{children:[d.stepNumber,"."]})," ",(0,o.jsx)("span",{className:$l,children:R})]})})]}),(0,o.jsxs)("div",{className:f,children:[(0,o.jsx)("div",{className:Ll()(Gl,Jl),children:(0,o.jsx)("button",{type:"button",className:Ql,onClick:function(e){e.preventDefault(),rl.actionMenuNodeId=u;var t=e.target.getBoundingClientRect();N({x:t.left+40,y:t.bottom-35}),w(!0)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"20",width:"20",color:"currentColor",name:"navMoreVert",children:(0,o.jsx)("path",{fill:"currentColor",d:"M12 14.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM12 21.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM12 7.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z"})})})}),(0,o.jsx)("div",{className:Ll()(Gl,nc),onClick:function(){d.collapsed=!d.expanded,function(e,t){rl.forceExpandCollapseRoute=(new Date).getTime().toString(36),rl.expandingRouteId=e,t.collapsed?h(Ll()(Kl,oc)):h(Ll()(Kl))}(u,d)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"24",width:"24",name:"arrowSmallDown",children:(0,o.jsx)("path",{fill:"currentColor",d:"m12 17.3 7-5.86V8.82l-7 5.88-7-5.88v2.62l7 5.86Z"})})})]})]}),x&&rl.actionMenuNodeId===u&&(0,o.jsx)(dc,{onClose:function(){w(!1)},onRenameNodeTitle:function(e){var t=rl.actionMenuNodeId;t&&B({x:0,y:-62}),rl.renamePopupRef=t,P(!0)},position:S,onManageNotes:function(){E(!0)}}),D&&rl.actionMenuNodeId&&(0,o.jsx)(fc,{initialName:null!==(c=null===(l=g(rl.actionMenuNodeId))||void 0===l?void 0:l.data.customLabel)&&void 0!==c?c:R,onRename:function(e){var t=rl.actionMenuNodeId;if(t){var n=g(t);n&&(n.data.customLabel=e,A(e))}P(!1)},onCancel:function(){P(!1)},position:z,setEventLabel:R,currentNodeId:rl.actionMenuNodeId}),j&&(0,o.jsx)(gc,{isOpen:j,onClose:function(){return E(!1)},onSave:function(e){M&&(M.data.customNotes=e,v(M.id,M))},currentNotes:(null==M?void 0:M.data.customNotes)||""}),(0,o.jsx)(ba,{className:ec,type:"target",position:co.Top,isConnectable:!1}),(0,o.jsx)(ba,{className:ec,type:"source",position:co.Bottom,isConnectable:!1})]})}));var xc=function(e){return e.nodeLookup.size};const wc=(0,r.memo)((function(e){var t=e.id,n=e.data,i=function(e){var t=ta(),n=t.getNode,o=t.setNodes,i=t.setEdges,a=t.getEdges,s=ta().setCenter,l=ta().getNodes,c=ci(xc);return function(){var t=n(e);if(t){var u=zl(),d=rl.lastRouteNumber,p=d?d+1:0,f=Bl(p);rl.lastRouteNumber=p;var h=l(),m=a(),g=h[c-1],v={id:"".concat(u,"-routerRoute_")+f,position:{x:g.position.x+270,y:g.position.y},type:"routerRoute",data:{label:"Route "+f},routerRoute:!0,routeLetter:f,routeIndex:p},y={id:u,position:{x:t.position.x,y:t.position.y},type:"step",data:{label:"Conditional Filter",app:Hl("filter"),eventSlug:"continue_if",eventTitle:"Route Conditions",customLabel:"Route Conditions"},parentType:"routerRoute"},x={id:"".concat(u,"-routerRoute_")+f,source:t.id,target:"".concat(u,"-routerRoute_")+f,type:"router",routerEdge:!0},w={id:"".concat(t.id,"=>").concat(u),source:"".concat(u,"-routerRoute_")+f,target:u,type:"router"},b=zl(),S={id:b,position:{x:0,y:0},type:"placeholder",data:{label:"+"}},N={id:"".concat(y.id,"=>").concat(b),source:y.id,target:b,type:"placeholder"},C=h.concat([v,y,S]),j=m.concat([x,w,N]),E=Al(C),M=Ol(Il(E,j),j);(0,r.startTransition)((function(){o(M),i(j)})),setTimeout((function(){var e=n(u);if(e){var t=e.position,o=t.x,r=t.y;s(o+270,r,{zoom:1,duration:800})}}),100)}}}(t),a=Ll()(Vl,"css-CJcW4iI"),s=Ll()(rc);return(0,o.jsxs)("div",{onClick:i,className:a,title:"Add Route",children:[(0,o.jsx)("div",{className:s,children:n.label}),(0,o.jsx)(ba,{className:ec,type:"target",position:co.Top,isConnectable:!1}),(0,o.jsx)(ba,{className:ec,type:"source",position:co.Bottom,isConnectable:!1})]})})),bc=(0,r.memo)((function(e){var t,n,i=e.id,a=e.data,s=a.collapsed?Ll()(tc,oc):tc,l=(0,r.useState)(s),c=l[0],u=l[1],d=ta(),p=(d.getNodes,d.setEdges,d.getNode),f=d.updateNode,h=(0,r.useState)(!1),m=h[0],g=h[1],v=(0,r.useState)({x:0,y:0}),y=v[0],x=v[1],w=(0,r.useState)("Route "),b=w[0],S=w[1],N=(0,r.useState)(!1),C=N[0],j=N[1],E=p(i),M=Ll()(Vl,"css-waEJudS"),k=a.label;a.customLabel&&(k=a.customLabel),(0,r.useEffect)((function(){k&&S(k)}),[k]),Ds({onStart:function(){return g(!1)}});var _=(0,r.useState)(!1),O=_[0],R=_[1],A=(0,r.useState)({x:0,y:0}),I=A[0],T=A[1];return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:M,title:"Route",children:(0,o.jsxs)("div",{className:c,children:[(0,o.jsx)("div",{className:"css-maWuBfR",children:b}),(0,o.jsxs)("div",{className:"css-qv2_9eg",children:[(0,o.jsx)("div",{className:nc,onClick:function(){a.collapsed=!a.collapsed,function(e,t){rl.forceExpandCollapseRoute=(new Date).getTime().toString(36),rl.expandingRouteId=e,t.collapsed?u(Ll()(tc,oc)):u(Ll()(tc))}(i,a)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"24",width:"24",name:"arrowSmallDown",children:(0,o.jsx)("path",{fill:"#0d6efd",d:"m12 17.3 7-5.86V8.82l-7 5.88-7-5.88v2.62l7 5.86Z"})})}),(0,o.jsx)("div",{className:"css-XxLKTdk",children:(0,o.jsx)("div",{className:Jl,children:(0,o.jsx)("button",{type:"button",className:"css-Lk7c4y6",onClick:function(e){e.preventDefault(),rl.actionMenuNodeId=i;var t=e.target.getBoundingClientRect();x({x:t.left+40,y:t.bottom-35}),g(!0)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"20",width:"20",color:"currentColor",name:"navMoreVert",children:(0,o.jsx)("path",{fill:"currentColor",d:"M12 14.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM12 21.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM12 7.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z"})})})})})]})]})}),m&&rl.actionMenuNodeId===i&&(0,o.jsx)(dc,{onClose:function(){g(!1)},onRenameNodeTitle:function(e){var t=rl.actionMenuNodeId;t&&T({x:0,y:-62}),rl.renamePopupRef=t,R(!0)},position:y,onManageNotes:function(){j(!0)}}),O&&rl.actionMenuNodeId&&(0,o.jsx)(fc,{initialName:null!==(n=null===(t=p(rl.actionMenuNodeId))||void 0===t?void 0:t.data.customLabel)&&void 0!==n?n:b,onRename:function(e){var t=rl.actionMenuNodeId;if(t){var n=p(t);n&&(n.data.customLabel=e,S(e))}R(!1)},onCancel:function(){R(!1)},position:I,setEventLabel:b,currentNodeId:rl.actionMenuNodeId}),C&&(0,o.jsx)(gc,{isOpen:C,onClose:function(){return j(!1)},onSave:function(e){E&&(E.data.customNotes=e,f(E.id,E))},currentNotes:(null==E?void 0:E.data.customNotes)||""}),(0,o.jsx)(ba,{className:ec,type:"target",position:co.Top,isConnectable:!1}),(0,o.jsx)(ba,{className:ec,type:"source",position:co.Bottom,isConnectable:!1})]})})),Sc={placeholder:sc,step:vc,router:yc,routerSwitch:wc,routerRoute:bc},Nc="css-qd8tAGl";var Cc=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};var jc={placeholder:function(e){var t=e.id,n=e.sourceX,r=e.sourceY,i=e.targetX,a=e.targetY,s=e.sourcePosition,l=e.targetPosition,c=e.style,u=e.markerEnd,d=fr({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:l})[0];return(0,o.jsx)("path",{id:t,style:c,className:"css-naorL5E",d,markerEnd:u})},step:function(e){var t=e.id,n=e.sourceX,r=e.sourceY,i=e.targetX,a=e.targetY,s=e.sourcePosition,l=e.targetPosition,c=e.style,u=e.markerEnd,d=function(e){var t=ta(),n=t.setEdges,o=t.setNodes,r=t.getNode,i=t.getEdge;return function(){var t=i(e);if(t){var a=r(t.target);if(a){var s=zl(),l={id:s,position:{x:a.position.x,y:a.position.y},data:{label:"Action Step"},type:"step"},c={id:"".concat(t.source,"->").concat(s),source:t.source,target:s,type:"step"},u={id:"".concat(s,"->").concat(t.target),source:s,target:t.target,type:"step"};n((function(t){return t.filter((function(t){return t.id!==e})).concat([c,u])})),o((function(e){var n=e.findIndex((function(e){return e.id===t.target})),o=e[n].data.stepNumber;return rl.nodeDeletedIndex=null,o&&(rl.nodeInsertedIndex="number"==typeof o?o:0),Cc(Cc(Cc([],e.slice(0,n),!0),[l],!1),e.slice(n,e.length),!0)})),rl.currentNodeId=s}}}}(t),p=fr({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:l}),f=p[0],h=p[1],m=p[2];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{id:t,style:c,className:Nc,d:f,markerEnd:u}),(0,o.jsxs)("g",{transform:"translate(".concat(h,", ").concat(m,")"),children:[(0,o.jsx)("rect",{onClick:d,x:-15,y:-15,width:30,ry:4,rx:4,height:30,className:"css-Hp4Enzc"}),(0,o.jsx)("text",{className:"css-BBrFc4y",y:11,x:-9,children:"+"})]})]})},router:function(e){var t=e.id,n=e.sourceX,r=e.sourceY,i=e.targetX,a=e.targetY,s=e.sourcePosition,l=e.targetPosition,c=e.style,u=e.markerEnd,d=fr({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:l,borderRadius:0})[0];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("path",{id:t,style:c,className:Nc,d,markerEnd:u})})}};const Ec=jc,Mc={appListSearchWrapper:"css-yV4FPBJ",searchIcon:"css-j23mtaC",searchIconActive:"css-i0m8EFS",appListSearchInput:"css-i87syuo",searchClearButton:"css-pGeER2q",appListBrowseLink:"css-eO1UUKX",appListModal:"css-x2Lk4Nk",appModalWrapper:"css-tr3ySpH",appListContainer:"css-MN5nHTM",appPickerContainer:"css-iKCjE5X",appListItems:"css-flpWUjV",appListTitle:"css-bg5BfaX",appListItem:"css-s608Ea7",appListItemIcon:"css-dddYQk3",appListItemLabel:"css-TBUq89x",settingsModalContainer:"css-xhma3R6",settingsModal:"css-VMUpL6e",settingsModalWrap:"css-fEhIgN5",settingsModalContent:"css-tfEq9qc",settingsModalHeader:"css-Y_xnNfD",settingsModalHeaderAppIcon:"css-effewlD",settingsModalHeaderAppIconImg:"css-rBBOMIu",settingsModalHeaderStepTitle:"css-dJqrJtD",settingsStepTitle:"css-ondwTbQ",settingsModalHeaderCloseButton:"css-eVzimSk",settingsModalCloseButtonIcon:"css-ZevFhC9",settingsModalTabs:"css-aUreTFR",tabNavigationButton:"css-nslUMZ0",active:"css-zwmqDEH",tabNavigationButtonTitle:"css-u615eFC",settingsModalBody:"css-Y2NBFRJ",fieldTypography:"css-QE4sAk5",settingsFieldWrap:"css-YljfTWK",settingsFieldLabel:"css-RgWEC1N",requiredField:"css-xI3saX0",settingsFieldsContainer:"css-FWUOJoN",stepAppContainer:"css-zi9QzC6",stepAppDisplay:"css-nWLliXP",stepAppIcon:"css-Xv3WGAS",stepAppIconImg:"css-n4FUcJH",stepAppLabel:"css-NGs3YA8",selectField:"css-kymOoEa",settingsModalFooterWrap:"css-ZJq7cjH",settingsModalFooter:"css-uBJl7oS",configureFieldsContainer:"css-daexgLj",formCheckInput:"css-KHGDVLV",fmCheckbox:"css-sD3O4ai",formGroup:"css-yagMiHw",fmInputTitle:"css-Tirhb7Y",inputTitle:"css-rPBDSnn",fmDynamicInputField:"css-UX4inQD",dynamicFieldButton:"css-oLvqoIe",dashiconsDatabase:"css-EMqtR0L",badge:"css-ssW1jyn",fmApiRequestParameters:"css-UCZhKaS",fmApiRequestParametersBody:"css-MWJ5qXy",checkboxWrapper:"css-wqX4n5j",triggerAppToFlowMatticIcons:"css-cabVRiw",appIcon:"css-lDc9lSP",appIconArrow:"css-H9rzaIx",fmResponseList:"css-omQh1SQ",responseKey:"css-JUEpis8",responseValue:"css-Y7FumZY",responseTabs:"css-sjzADgS",responseTabsTriggers:"css-rlDN_gs",keyText:"css-P9nvqCH",dynamicTagsModal:"css-wUXDl3m",dynamicTagsModalHeader:"css-pcEQfvh",dynamicTagsSearchWrapper:"css-pPFGGQ_",dynamicTagsSearchIcon:"css-SETTqom",modalHeadingText:"css-w0uZXVm",dynamicTags:"css-V3q8iFb",dynamicTagsInput:"css-TxKw9yE",dynamicTagsList:"css-y9r5_Ua",dynamicTag:"css-F0tL_ub",accordionEmptyTextWrap:"css-n6Z2ZYP",emptyResponseText:"css-GhhDibx",emptyResponseDescription:"css-oRIxEXr",dropdownPopup:"css-NZWlTgK",dropdownOption:"css-jqaZwHh",optionSelected:"css-rMIq08U",optionText:"css-v6qHIT3",responseListItems:"css-Lee6gOo",responseListItem:"css-sh0UoRP",activeResponse:"css-qXOcOyB",responseListItemLetter:"css-imJT_lc",responseListItemTime:"css-tAVxfj8",filterConditionsContainer:"css-qTQmhY3"};mc().setAppElement("#workflow-builder-root");const kc=function(e){var t=e.isOpen,n=e.onClose,i=(e.onSave,e.apps),a=e.onSelectApp,s=(0,r.useState)(""),l=s[0],c=s[1],u=(0,r.useState)(!1),d=u[0],p=u[1],f=Object.values(i.core||{}),h=Object.values(i.other||{}),m=f.concat(h),g=Object.values(m).filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})),v=function(e){rl.currentNodeId,a(e),rl.currentNodeId=null,c(""),n()};return(0,o.jsx)(mc(),{isOpen:t,onRequestClose:n,contentLabel:"Action App Modal",style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:7},content:{padding:"0px",borderRadius:"10px",width:"500px",height:"600px",margin:"auto",overflow:"hidden"}},children:(0,o.jsx)("div",{className:Mc.appListModal,children:(0,o.jsxs)("div",{className:Mc.appModalWrapper,children:[(0,o.jsxs)("div",{className:Mc.appListSearchWrapper,children:[(0,o.jsx)("div",{className:Ll()(Mc.searchIcon,"".concat(d?Mc.searchIconActive:"")),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"magnifyingGlass",children:(0,o.jsx)("path",{fill:"currentColor",d:"m5.134 17.452-2.843 2.842 1.415 1.415 2.842-2.843-1.414-1.414ZM13 3c-4.41 0-8 3.59-8 8 0 3.75 2.98 8 8 8 4.41 0 8-3.59 8-8s-3.59-8-8-8Zm0 14c-3.8 0-6-3.21-6-6 0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6Z"})})}),(0,o.jsx)("div",{className:Mc.appListSearchInput,children:(0,o.jsx)("form",{autoComplete:"false",children:(0,o.jsx)("input",{id:"app-picker-search-input",autoFocus:!0,"aria-label":"Search apps",placeholder:"Search available apps and tools...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",className:"css-1nre9iz",onChange:function(e){c(e.target.value)},onFocus:function(){p(!0)},onBlur:function(){p(!1)},value:l})})}),l&&(0,o.jsx)("div",{className:Ll()(Mc.searchClearButton),onClick:function(){c("")},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"18",width:"18",name:"formX",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.29 6.29 12 10.59l-4.29-4.3-1.42 1.42 4.3 4.29-4.3 4.29 1.42 1.42 4.29-4.3 4.29 4.3 1.42-1.42-4.3-4.29 4.3-4.29-1.42-1.42Z"})})}),(0,o.jsx)("div",{className:Mc.appListBrowseLink,children:(0,o.jsxs)("a",{href:"https://flowmattic.com/integrations",target:"_blank",children:[(0,o.jsx)("span",{children:"Browse All"}),(0,o.jsx)("span",{children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"14",width:"14",name:"arrowOffsite",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M5 3H3v18h18v-2H5V3Z"}),(0,o.jsx)("path",{fill:"currentColor",d:"m12 3-2 2h7.59l-8.3 8.29 1.42 1.42L19 6.41V14l2-2V3h-9Z"})]})})]})})]}),(0,o.jsxs)("div",{className:Mc.appListContainer,children:[l&&(0,o.jsx)("div",{className:Mc.appListItems,children:g.map((function(e,t){return(0,o.jsxs)("div",{className:Mc.appListItem,onClick:function(){return v(e)},children:[(0,o.jsx)("div",{className:Mc.appListItemIcon,children:(0,o.jsx)("img",{src:e.icon,alt:e.name,style:{width:"50px",height:"50px"}})}),(0,o.jsx)("div",{className:Mc.appListItemLabel,children:(0,o.jsx)("span",{children:e.name.replace(" by FlowMattic","")})})]},t)}))}),!l&&(0,o.jsxs)("div",{className:Mc.appPickerContainer,children:[(0,o.jsxs)("div",{className:Mc.appListItems,children:[(0,o.jsx)("div",{className:Mc.appListTitle,children:(0,o.jsx)("span",{children:"Installed Integrations"})}),h.map((function(e,t){return(0,o.jsxs)("div",{className:Mc.appListItem,onClick:function(){return v(e)},children:[(0,o.jsx)("div",{className:Mc.appListItemIcon,children:(0,o.jsx)("img",{src:e.icon,alt:e.name,style:{width:"50px",height:"50px"}})}),(0,o.jsx)("div",{className:Mc.appListItemLabel,children:(0,o.jsx)("span",{children:e.name.replace(" by FlowMattic","")})})]},t)}))]}),(0,o.jsxs)("div",{className:Mc.appListItems,children:[(0,o.jsx)("div",{className:Mc.appListTitle,children:(0,o.jsx)("span",{children:"FlowMattic built-in tools"})}),f.map((function(e,t){return(0,o.jsxs)("div",{className:Mc.appListItem,onClick:function(){return v(e)},children:[(0,o.jsx)("div",{className:Mc.appListItemIcon,children:(0,o.jsx)("img",{src:e.icon,alt:e.name,style:{width:"50px",height:"50px"}})}),(0,o.jsx)("div",{className:Mc.appListItemLabel,children:(0,o.jsx)("span",{children:e.name.replace(" by FlowMattic","")})})]},t)}))]})]})]})]})})})},_c=function(e){var t=e.isOpen,n=e.onClose,i=(e.onSave,e.apps),a=e.onSelectApp,s=(0,r.useState)(""),l=s[0],c=s[1],u=(0,r.useState)(!1),d=u[0],p=u[1],f=(0,r.useState)(null),h=(f[0],f[1],Object.values(i.core||{})),m=Object.values(i.other||{}),g=h.concat(m),v=Object.values(g).filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})),y=function(e){rl.currentNodeId,a(e),rl.currentNodeId=null,c(""),n()};return(0,o.jsx)(mc(),{isOpen:t,onRequestClose:n,contentLabel:"Action App Modal",style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:"7"},content:{padding:"0px",borderRadius:"10px",width:"500px",height:"600px",margin:"auto",overflow:"hidden"}},children:(0,o.jsx)("div",{className:Mc.appListModal,children:(0,o.jsxs)("div",{className:Mc.appModalWrapper,children:[(0,o.jsxs)("div",{className:Mc.appListSearchWrapper,children:[(0,o.jsx)("div",{className:Ll()(Mc.searchIcon,"".concat(d?Mc.searchIconActive:"")),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"magnifyingGlass",children:(0,o.jsx)("path",{fill:"currentColor",d:"m5.134 17.452-2.843 2.842 1.415 1.415 2.842-2.843-1.414-1.414ZM13 3c-4.41 0-8 3.59-8 8 0 3.75 2.98 8 8 8 4.41 0 8-3.59 8-8s-3.59-8-8-8Zm0 14c-3.8 0-6-3.21-6-6 0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6Z"})})}),(0,o.jsx)("div",{className:Mc.appListSearchInput,children:(0,o.jsx)("form",{autoComplete:"false",children:(0,o.jsx)("input",{id:"app-picker-search-input",autoFocus:!0,"aria-label":"Search apps",placeholder:"Search available apps and tools...",autoComplete:"none",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",className:"css-1nre9iz",role:"presentation",onChange:function(e){c(e.target.value)},onFocus:function(){p(!0)},onBlur:function(){p(!1)},value:l})})}),l&&(0,o.jsx)("div",{className:Ll()(Mc.searchClearButton),onClick:function(){c("")},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"18",width:"18",name:"formX",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.29 6.29 12 10.59l-4.29-4.3-1.42 1.42 4.3 4.29-4.3 4.29 1.42 1.42 4.29-4.3 4.29 4.3 1.42-1.42-4.3-4.29 4.3-4.29-1.42-1.42Z"})})}),(0,o.jsx)("div",{className:Mc.appListBrowseLink,children:(0,o.jsxs)("a",{href:"https://flowmattic.com/integrations",target:"_blank",children:[(0,o.jsx)("span",{children:"Browse All"}),(0,o.jsx)("span",{children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"14",width:"14",name:"arrowOffsite",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M5 3H3v18h18v-2H5V3Z"}),(0,o.jsx)("path",{fill:"currentColor",d:"m12 3-2 2h7.59l-8.3 8.29 1.42 1.42L19 6.41V14l2-2V3h-9Z"})]})})]})})]}),(0,o.jsxs)("div",{className:Mc.appListContainer,children:[l&&(0,o.jsx)("div",{className:Mc.appListItems,children:v.map((function(e,t){return(0,o.jsxs)("div",{className:Mc.appListItem,onClick:function(){return y(e)},children:[(0,o.jsx)("div",{className:Mc.appListItemIcon,children:(0,o.jsx)("img",{src:e.icon,alt:e.name,style:{width:"50px",height:"50px"}})}),(0,o.jsx)("div",{className:Mc.appListItemLabel,children:(0,o.jsx)("span",{children:e.name.replace(" by FlowMattic","")})})]},t)}))}),!l&&(0,o.jsxs)("div",{className:Mc.appPickerContainer,children:[(0,o.jsxs)("div",{className:Mc.appListItems,children:[(0,o.jsx)("div",{className:Mc.appListTitle,children:(0,o.jsx)("span",{children:"Installed Integrations"})}),m.map((function(e,t){return(0,o.jsxs)("div",{className:Mc.appListItem,onClick:function(){return y(e)},children:[(0,o.jsx)("div",{className:Mc.appListItemIcon,children:(0,o.jsx)("img",{src:e.icon,alt:e.name,style:{width:"50px",height:"50px"}})}),(0,o.jsx)("div",{className:Mc.appListItemLabel,children:(0,o.jsx)("span",{children:e.name.replace(" by FlowMattic","")})})]},t)}))]}),(0,o.jsxs)("div",{className:Mc.appListItems,children:[(0,o.jsx)("div",{className:Mc.appListTitle,children:(0,o.jsx)("span",{children:"FlowMatic built-in tools"})}),h.map((function(e,t){return(0,o.jsxs)("div",{className:Mc.appListItem,onClick:function(){return y(e)},children:[(0,o.jsx)("div",{className:Mc.appListItemIcon,children:(0,o.jsx)("img",{src:e.icon,alt:e.name,style:{width:"50px",height:"50px"}})}),(0,o.jsx)("div",{className:Mc.appListItemLabel,children:(0,o.jsx)("span",{children:e.name.replace(" by FlowMattic","")})})]},t)}))]})]})]})]})})})};var Oc=n(161),Rc=n(421),Ac=n.n(Rc),Ic=function(){return Ic=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ic.apply(this,arguments)},Tc=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};const Dc=function(e){var t=e.onSelect,n=e.onCancel,i=e.closeSettings,a=e.cursorPosition,s=e.inputFieldPosition,l=e.currentNodeId,c=e.currentInputLabel,u=e.inputField,d=(0,r.useState)(""),p=d[0],f=d[1],h=(0,r.useState)([]),m=h[0],g=h[1],v=(0,r.useState)([]),y=v[0],x=v[1],w=(0,r.useState)(""),b=w[0],S=w[1],N=ta(),C=N.getNodes,j=(N.setEdges,N.getNode),E=(N.updateNode,N.getEdges),M=Ts(C()),k=M[0],_=(M[1],M[2],(0,r.useState)({top:s.top,bottom:s.bottom})),O=_[0],R=_[1];(0,r.useEffect)((function(){var e=document.querySelector(".css-TxKw9yE");e&&!u.classList.contains("content-editor-input")&&e.focus(),A()}),[]),(0,r.useEffect)((function(){var e,t,n,o,r,i;S(c);var a=C(),u=j(l),d=null===(t=null===(e=null==u?void 0:u.data)||void 0===e?void 0:e.app)||void 0===t?void 0:t.name;R({top:s.top,bottom:s.bottom});var p=[],f=window.dynamicFieldOptions||{};if(f&&window.dynamicFieldOptionsGroup){var h={app:{name:d,icon:null===(o=null===(n=null==u?void 0:u.data)||void 0===n?void 0:n.app)||void 0===o?void 0:o.icon,fm_app:null===(i=null===(r=null==u?void 0:u.data)||void 0===r?void 0:r.app)||void 0===i?void 0:i.fm_app},title:window.dynamicFieldOptionsGroup,capturedData:f,stepNumber:0,tagType:"live_data"};p.push(h)}var m={};Object.entries(window.FMConfig.variables).map((function(e,t){var n=e[0],o=e[1].variable_value;m[n]=o}));var v={app:{name:"Variables",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE5LjkwNjEgMjFDMjEuMjQ2NCAxOC4yODg4IDIyIDE1LjIzMjkgMjIgMTJDMjIgOC43NjcxMSAyMS4yNDY0IDUuNzExMTYgMTkuOTA2MSAzTTQuMDkzOTMgM0MyLjc1MzYzIDUuNzExMTYgMiA4Ljc2NzExIDIgMTJDMiAxNS4yMzI5IDIuNzUzNjMgMTguMjg4OCA0LjA5MzkzIDIxTTE2LjU0ODYgOC42MjVIMTYuNDU5QzE1LjgwNTYgOC42MjUgMTUuMTg0OCA4LjkxMjAyIDE0Ljc1OTYgOS40MTA3Mkw5LjM4NDcxIDE1LjcxNDNDOC45NTk0OCAxNi4yMTMgOC4zMzg3MSAxNi41IDcuNjg1MyAxNi41SDcuNTk1NjNNOC43MTQ4MyA4LjYyNUgxMC4xMDg5QzEwLjYwODYgOC42MjUgMTEuMDQ3NyA4Ljk1Nzk3IDExLjE4NSA5LjQ0MDk0TDEyLjk1OTQgMTUuNjg0MUMxMy4wOTY3IDE2LjE2NyAxMy41MzU4IDE2LjUgMTQuMDM1NSAxNi41SDE1LjQyOTYiIHN0cm9rZT0iIzBkNmVmZCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=",fm_app:"flowmattic"},title:"FlowMattic Variables",capturedData:m,stepNumber:0,tagType:"variables"};function y(e,t,n,o){if(void 0===o&&(o=new Set),e===t)return[e];o.add(e);for(var r=0,i=n.filter((function(t){return t.source===e})).map((function(e){return e.target}));r<i.length;r++){var a=i[r];if(!o.has(a)){var s=y(a,t,n,o);if(s)return Tc([e],s,!0)}}return null}p.push(v),function(){var e,t,n,o,r,i,s,c,u,d,f,h,m,v=function(e){var t=e.find((function(e){var t;return 1===(null===(t=e.data)||void 0===t?void 0:t.stepNumber)}));return t?t.id:null}(a);if(v){var w=y(v,l,E());if(w){for(var b=0,S=a;b<S.length;b++){var N=S[b];if((!N.type||!["router","routerSwitch","routerRoute","placeholder"].includes(N.type))&&(null===(e=N.data)||void 0===e?void 0:e.app)&&w.includes(N.id)){if(N.id===l)break;var C=N.captureResponse?N.captureResponse:[];1===(null===(t=N.data)||void 0===t?void 0:t.stepNumber)&&N.responses&&void 0!==N.activeResponseIndex&&(C=(null===(n=N.responses.slice(-5)[N.activeResponseIndex])||void 0===n?void 0:n.response)||[]);var j={app:{name:(null===(r=null===(o=N.data)||void 0===o?void 0:o.app)||void 0===r?void 0:r.name)||"",icon:(null===(s=null===(i=N.data)||void 0===i?void 0:i.app)||void 0===s?void 0:s.icon)||"",fm_app:(null===(u=null===(c=N.data)||void 0===c?void 0:c.app)||void 0===u?void 0:u.fm_app)||""},title:String((null===(d=N.data)||void 0===d?void 0:d.customLabel)||(null===(f=N.data)||void 0===f?void 0:f.eventTitle)||(null===(h=N.data)||void 0===h?void 0:h.label)||""),capturedData:C,stepNumber:"number"==typeof(null===(m=N.data)||void 0===m?void 0:m.stepNumber)?N.data.stepNumber:0};p.push(j)}}g(p),x(p)}else console.warn("No path found from start node to current node.")}else console.error("No start node found.")}()}),[a,l,c]),(0,r.useEffect)((function(){if(""!==p){var e={},t=[];m.forEach((function(n,o){Object.entries(n.capturedData).filter((function(t){var n,o=t[0],r=t[1];if(o.toLowerCase().includes(p.toLowerCase())||String(r).toLowerCase().includes(p.toLowerCase()))return e=Ic(Ic({},e),((n={})[o]=r,n)),!0})),Object.keys(e).length&&(t.push({app:n.app,title:n.title,capturedData:e,stepNumber:n.stepNumber,tagType:n.tagType}),e={})})),Object.keys(t).length&&x(t)}else m.length>0&&x(m)}),[p]);var A=function(){var e=document.querySelector(".".concat(Mc.dynamicTagsModal));setTimeout((function(){e.getBoundingClientRect().height+s.autoTop>window.innerHeight-115?R({top:"auto",bottom:"20px"}):R({top:s.autoTop+"px",bottom:"auto"})}),10)};return(0,o.jsxs)("div",{className:Mc.dynamicTagsModal,style:{top:O.top,bottom:O.bottom},children:[(0,o.jsxs)("div",{className:Ll()(Mc.dynamicTagsModalHeader),children:[(0,o.jsxs)("div",{className:"w-100 d-flex justify-content-between",children:[(0,o.jsxs)("h3",{className:Mc.modalHeadingText,children:["Insert data for ",b]}),(0,o.jsx)("button",{className:Ll()("border-0 bg-transparent p-0",Mc.dynamicTagsModalClose),onClick:n,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"24",width:"24",name:"formX",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.29 6.29 12 10.59l-4.29-4.3-1.42 1.42 4.3 4.29-4.3 4.29 1.42 1.42 4.29-4.3 4.29 4.3 1.42-1.42-4.3-4.29 4.3-4.29-1.42-1.42Z"})})})]}),(0,o.jsx)("div",{className:"w-100",children:(0,o.jsxs)("div",{className:Ll()("d-flex mb-2 mt-2",Mc.dynamicTagsSearchWrapper),children:[(0,o.jsx)("div",{className:Ll()("d-flex",Mc.dynamicTagsSearchIcon),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"magnifyingGlass",children:(0,o.jsx)("path",{fill:"currentColor",d:"m5.134 17.452-2.843 2.842 1.415 1.415 2.842-2.843-1.414-1.414ZM13 3c-4.41 0-8 3.59-8 8 0 3.75 2.98 8 8 8 4.41 0 8-3.59 8-8s-3.59-8-8-8Zm0 14c-3.8 0-6-3.21-6-6 0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6Z"})})}),(0,o.jsx)("input",{type:"text",value:p,onChange:function(e){return f(e.target.value)},className:Ll()("ps-5 w-100",Mc.dynamicTagsInput),placeholder:"Search..."})]})})]}),(0,o.jsx)("div",{className:Ll()("pb-2 mt-2",Mc.dynamicTags),children:(0,o.jsx)("div",{className:Ll()("pb-2",Mc.dynamicTagsList),children:(0,o.jsx)("div",{className:"accordion w-100",children:y&&Object.entries(y).map((function(e){var r=e[0],a=e[1];return(0,o.jsxs)("div",{className:"accordion-item w-100",children:[(0,o.jsx)("div",{className:"accordion-header w-100",children:(0,o.jsxs)("div",{className:"accordion-button collapsed d-flex gap-2 w-100 p-2","data-toggle":"collapse","data-target":"#tag-".concat(r),onClick:function(){return A()},children:[(0,o.jsx)("span",{className:"accordion-icon",children:(0,o.jsx)("img",{src:a.app.icon,alt:a.app.name})}),(0,o.jsxs)("span",{className:"accordion-title d-flex gap-2",children:["variables"!==a.tagType&&"live_data"!==a.tagType&&(0,o.jsxs)("span",{className:"step-number",children:[a.stepNumber,"."]}),(0,o.jsx)("span",{className:"step-title",children:a.title})]})]})}),(0,o.jsx)("div",{className:"accordion-collapse collapse",id:"tag-".concat(r),children:(0,o.jsx)("div",{className:"accordion-body",children:(0,o.jsxs)("div",{className:Mc.fmResponseList,children:[a.capturedData&&Object.entries(a.capturedData).map((function(e){var n=e[0],r=e[1];return"workflow-trigger-events"!==n?(0,o.jsxs)("div",{className:Ll()("d-flex gap-2 accordion-text-wrap",Mc.fmResponseItem),onClick:function(){var e="variables"===a.tagType?"{{".concat(n,"}}"):"{".concat(a.app.fm_app).concat(a.stepNumber,".").concat(n,"}");"live_data"===a.tagType&&(e=n),t(e)},children:[(0,o.jsx)("div",{className:Mc.responseKey,children:(0,o.jsxs)("span",{className:Ll()("d-flex gap-2",Mc.keyText),children:[(0,o.jsx)("span",{className:"accordion-icon",style:{width:"16px"},children:(0,o.jsx)("img",{src:a.app.icon,alt:a.app.name})}),(0,o.jsx)("span",{className:"response-key-value",children:n})]})}),(0,o.jsx)("span",{className:Ll()("accordion-text",Mc.responseValue),children:"object"==typeof r?JSON.stringify(r):String(r)||""})]}):""})),"live_data"===a.tagType&&!Object.keys(a.capturedData).length&&(0,o.jsxs)("div",{className:Ll()("d-flex flex-column gap-2 p-3",Mc.accordionEmptyTextWrap,Mc.fmResponseItem),children:[(0,o.jsxs)("div",{className:Mc.triggerAppToFlowMatticIcons,children:[(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:window.FlowMatticIcon,alt:"FlowMattic",style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})}),(0,o.jsx)("div",{className:Mc.appIconArrow,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",color:"neutral700",name:"arrowBigRight",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.86 11H4v2h12.86l-5.04 6h2.62l5.86-7-5.86-7h-2.62l5.04 6Z"})})}),(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:a.app.icon,alt:a.app.name,style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})})]}),(0,o.jsx)("div",{className:Mc.emptyResponseText,children:"No data available"}),(0,o.jsx)("div",{className:Mc.emptyResponseDescription,children:"Seems like the data is not fetched yet. Please click on the refresh icon next to input field to fetch the data, and open this modal again to see the data."}),(0,o.jsx)("div",{className:Ll()("mt-2",Mc.emptyResponseButton),children:(0,o.jsx)("button",{className:Ll()("btn btn-sm btn-primary",Mc.dynamicTagsButton),onClick:function(){u.closest(".form-group").querySelector(".btn-refresh").click()},children:"Refresh Data"})})]}),a.capturedData&&0===a.capturedData.length&&(0,o.jsxs)("div",{className:Ll()("d-flex flex-column gap-2 p-3",Mc.accordionEmptyTextWrap,Mc.fmResponseItem),children:[(0,o.jsxs)("div",{className:Mc.triggerAppToFlowMatticIcons,children:[(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:window.FlowMatticIcon,alt:"FlowMattic",style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})}),(0,o.jsx)("div",{className:Mc.appIconArrow,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",color:"neutral700",name:"arrowBigRight",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.86 11H4v2h12.86l-5.04 6h2.62l5.86-7-5.86-7h-2.62l5.04 6Z"})})}),(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:a.app.icon,alt:a.app.name,style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})})]}),(0,o.jsx)("div",{className:Mc.emptyResponseText,children:"First, you need to complete this step"}),(0,o.jsxs)("div",{className:Mc.emptyResponseDescription,children:["Completing the step will allow you to use the data from ",(0,o.jsxs)("strong",{children:[a.stepNumber,". ",a.app.name]})," step response to map the data to the current step. Go complete this step & come back to have access to its data.",(0,o.jsxs)("a",{href:"https://support.flowmattic.com/kb/article/45/how-to-successfully-complete-an-action-step",target:"_blank",rel:"noreferrer",className:"ps-2",children:["Learn more ",(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16","aria-hidden":"true",focusable:"false",fill:"currentColor",children:(0,o.jsx)("path",{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})})]})]}),(0,o.jsx)("div",{className:Ll()("mt-2",Mc.emptyResponseButton),children:(0,o.jsx)("button",{className:Ll()("btn btn-sm btn-primary",Mc.dynamicTagsButton),onClick:function(){!function(e){n(),i();var t=k.find((function(t){var n;return(null===(n=t.data)||void 0===n?void 0:n.stepNumber)===e}));if(t){rl.currentNodeId=t.id,i();var o=document.querySelector('[data-stepnumber="'.concat(e,'"]'));setTimeout((function(){o&&o.click()}),10)}}(a.stepNumber),n()},children:"Complete Step"})})]})]})})})]})}))})})}),(0,o.jsx)("div",{className:Ll()("text-end",Mc.dynamicTagsFooter),children:(0,o.jsx)("button",{className:Ll()("btn btn-sm btn-outline-secondary",Mc.dynamicTagsButton),onClick:n,children:"Cancel"})})]})},Pc=function(e){var t=e.onSelect,n=e.closeDropdown,i=e.dropdownItems,a=e.dropdownPosition,s=e.currentSelectLabel,l=e.currentSelectValue,c=(0,r.useState)(""),u=c[0],d=c[1],p=(0,r.useState)([]),f=p[0],h=p[1],m=(0,r.useState)(""),g=m[0],v=m[1],y=(0,r.useState)({top:a.top,bottom:a.bottom}),x=y[0],w=y[1];(0,r.useEffect)((function(){var e=document.querySelector(".css-TxKw9yE");e&&e.focus(),d(""),h(i),v(s),b()}),[]),(0,r.useEffect)((function(){if(u){var e=[],t=[];Object.entries(i).filter((function(n){var o=n[0],r=n[1];"object"!=typeof r||"title"in r?r&&(r.title.toLowerCase().includes(u.toLowerCase())||r.description&&r.description.toLowerCase().includes(u.toLowerCase()))&&(e[o]=r):(Object.entries(r[0]).map((function(e){var n=e[0],o=e[1];(o.title.toLowerCase().includes(u.toLowerCase())||o.description.toLowerCase().includes(u.toLowerCase())||n.toLowerCase().includes(u.toLowerCase()))&&(t[n]=o)})),Object.keys(t).length>0&&(e[o]=[],e[o].push(t),t=[]))})),h(e),b()}else h(i)}),[u]);var b=function(){var e=document.querySelector(".".concat(Mc.dynamicTagsModal));setTimeout((function(){e.getBoundingClientRect().height+a.autoTop>window.innerHeight-115?w({top:"auto",bottom:"20px"}):w({top:a.autoTop+"px",bottom:"auto"})}),100)};return(0,o.jsxs)("div",{className:Ll()(Mc.dropdownPopup,Mc.dynamicTagsModal),style:{top:x.top,bottom:x.bottom},children:[(0,o.jsxs)("div",{className:Ll()(Mc.dynamicTagsModalHeader),children:[(0,o.jsxs)("div",{className:"w-100 d-flex justify-content-between",children:[(0,o.jsxs)("h3",{className:Mc.modalHeadingText,children:["Select value for ",g]}),(0,o.jsx)("button",{className:Ll()("border-0 bg-transparent p-0",Mc.dynamicTagsModalClose),onClick:n,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"24",width:"24",name:"formX",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.29 6.29 12 10.59l-4.29-4.3-1.42 1.42 4.3 4.29-4.3 4.29 1.42 1.42 4.29-4.3 4.29 4.3 1.42-1.42-4.3-4.29 4.3-4.29-1.42-1.42Z"})})})]}),(0,o.jsx)("div",{className:"w-100",children:(0,o.jsxs)("div",{className:Ll()("d-flex mb-2 mt-2",Mc.dynamicTagsSearchWrapper),children:[(0,o.jsx)("div",{className:Ll()("d-flex",Mc.dynamicTagsSearchIcon),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",name:"magnifyingGlass",children:(0,o.jsx)("path",{fill:"currentColor",d:"m5.134 17.452-2.843 2.842 1.415 1.415 2.842-2.843-1.414-1.414ZM13 3c-4.41 0-8 3.59-8 8 0 3.75 2.98 8 8 8 4.41 0 8-3.59 8-8s-3.59-8-8-8Zm0 14c-3.8 0-6-3.21-6-6 0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6Z"})})}),(0,o.jsx)("input",{type:"text",value:u,onChange:function(e){return d(e.target.value)},className:Ll()("ps-5 w-100",Mc.dynamicTagsInput),placeholder:"Search..."})]})})]}),(0,o.jsx)("div",{className:Ll()("pb-2 mt-2",Mc.dynamicTags),children:(0,o.jsx)("div",{className:Ll()("pb-2",Mc.dynamicTagsList),children:f&&Object.entries(f).map((function(e){var n,r,i=e[0],a=e[1];return"object"!=typeof a||"title"in a?(0,o.jsx)("div",{className:Ll()("w-100",Mc.dropdownOption),children:(0,o.jsxs)("div",{className:Ll()("d-flex flex-column w-100 gap-1 p-2",Mc.dropdownOption,l===i?Mc.optionSelected:""),onClick:function(){return t(i)},children:[(0,o.jsx)("div",{className:Mc.optionText,children:null===(n=a.title)||void 0===n?void 0:n.replace(/&amp;/g,"&").replace(/&#039;/g,"'")}),""!==a.description&&(0,o.jsx)("span",{className:Ll()("form-text m-0",Mc.optionSubText),children:null===(r=a.description)||void 0===r?void 0:r.replace(/&amp;/g,"&").replace(/&#039;/g,"'")})]})}):(0,o.jsxs)("div",{className:Ll()("d-flex flex-column w-100 gap-2 option-text-wrap",Mc.dropdownGroupOption),children:[(0,o.jsx)("div",{className:Ll()("text-muted fs-muted",Mc.optionText),children:i.replaceAll("-"," ").replaceAll("_"," ").toUpperCase()}),Object.entries(a[0]).map((function(e){var n,r,i=e[0],a=e[1];return(0,o.jsxs)("div",{className:Ll()("d-flex flex-column w-100 gap-1 p-2",Mc.dropdownOption,l===i?Mc.optionSelected:""),onClick:function(){return t(i)},children:[(0,o.jsx)("div",{className:Mc.optionText,children:null===(n=a.title)||void 0===n?void 0:n.replace(/&amp;/g,"&").replace(/&#039;/g,"'")}),a.description&&""!==a.description&&(0,o.jsx)("span",{className:Ll()("form-text m-0",Mc.optionSubText),children:null===(r=a.description)||void 0===r?void 0:r.replace(/&amp;/g,"&").replace(/&#039;/g,"'")})]})}))]})}))})}),(0,o.jsx)("div",{className:Ll()("text-end",Mc.dynamicTagsFooter),children:(0,o.jsx)("button",{className:Ll()("btn btn-sm btn-outline-secondary",Mc.dynamicTagsButton),onClick:n,children:"Cancel"})})]})},Lc=function(e){var t=e.responseData,n=e.headingText,i=e.modalPosition,a=e.onCancel,s=e.deleteResponse,l=(0,r.useState)({top:i.top,bottom:i.bottom}),c=l[0],u=l[1];(0,r.useEffect)((function(){d()}),[]);var d=function(){var e=document.querySelector(".".concat(Mc.dynamicTagsModal));setTimeout((function(){e.getBoundingClientRect().height+i.autoTop>window.innerHeight-115?u({top:"auto",bottom:"20px"}):u({top:i.autoTop+"px",bottom:"auto"})}),150)};return(0,o.jsxs)("div",{className:Ll()("response-data",Mc.dynamicTagsModal),style:{top:c.top,bottom:c.bottom},children:[(0,o.jsx)("div",{className:Ll()(Mc.dynamicTagsModalHeader),children:(0,o.jsxs)("div",{className:"w-100 d-flex justify-content-between align-items-center",children:[(0,o.jsx)("h3",{className:Mc.modalHeadingText,children:n}),(0,o.jsxs)("div",{className:Ll()("d-flex align-items-center gap-2"),children:[(0,o.jsxs)("button",{className:Ll()("border-1 border-primary bg-transparent copy-response text-primary d-flex align-items-center rounded",Mc.copyResponse),style:{padding:"2px 4px",fontSize:"12px"},onClick:function(){navigator.clipboard.writeText(JSON.stringify(t));var e=document.querySelector(".copy-response");e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="12" width="20" fill="currentColor" viewBox="0 0 448 512"><path d="M441 103c9.4 9.4 9.4 24.6 0 33.9L177 401c-9.4 9.4-24.6 9.4-33.9 0L7 265c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l119 119L407 103c9.4-9.4 24.6-9.4 33.9 0z"/></svg><span class="text-primary">Copied</span>',setTimeout((function(){e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="12" width="20" fill="currentColor" viewBox="0 0 448 512"><path d="M384 336l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L400 115.9 400 320c0 8.8-7.2 16-16 16zM192 384l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1L192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-32-48 0 0 32c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l32 0 0-48-32 0z"/></svg> <span class="text-primary">Copy</span>'}),2e3)},children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"20",fill:"currentColor",viewBox:"0 0 448 512",children:(0,o.jsx)("path",{d:"M384 336l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L400 115.9 400 320c0 8.8-7.2 16-16 16zM192 384l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1L192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-32-48 0 0 32c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l32 0 0-48-32 0z"})}),(0,o.jsx)("span",{className:"text-primary",children:"Copy"})]}),(0,o.jsx)("button",{className:Ll()("border-0 bg-transparent p-0",Mc.dynamicTagsModalClose),onClick:a,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"24",width:"24",name:"formX",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.29 6.29 12 10.59l-4.29-4.3-1.42 1.42 4.3 4.29-4.3 4.29 1.42 1.42 4.29-4.3 4.29 4.3 1.42-1.42-4.3-4.29 4.3-4.29-1.42-1.42Z"})})})]})]})}),(0,o.jsx)("div",{className:Ll()("pb-2 mt-2",Mc.dynamicTags),children:(0,o.jsx)("div",{className:Ll()("pb-2",Mc.dynamicTagsList),children:(0,o.jsx)("div",{className:Ll()("w-100",Mc.fmResponseList),children:t&&Object.entries(t).map((function(e){var t=e[0],n=e[1];return"workflow-trigger-events"!==t?(0,o.jsxs)("div",{className:Ll()("d-flex gap-2 w-100",Mc.fmResponseItem),children:[(0,o.jsx)("div",{className:Mc.responseKey,children:(0,o.jsx)("span",{className:Mc.keyText,children:t})}),(0,o.jsx)("span",{className:Mc.responseValue,children:"object"==typeof n?JSON.stringify(n):String(n)||""})]}):""}))})})}),(0,o.jsxs)("div",{className:Ll()("text-end",Mc.dynamicTagsFooter),children:[(0,o.jsx)("button",{className:Ll()("btn btn-sm btn-outline-secondary",Mc.dynamicTagsButton),onClick:a,children:"Cancel"}),(0,o.jsx)("button",{className:Ll()("btn btn-sm ms-2 btn-outline-danger",Mc.dynamicTagsButton),onClick:s,children:"Delete Response"})]})]})};var zc=function(){return zc=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},zc.apply(this,arguments)},Bc=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Hc={contain_text:"Contains (Text)",does_not_contain_text:"Does not contain (Text)",exactly_match:"Exactly matches (Text)",does_not_exactly_match:"Does not exactly match (Text)",is_in:"Is in (Text)",is_not_in:"Is not in (Text)",starts_with:"Starts with (Text)",does_not_start_with:"Does not start with (Text)",ends_with:"Ends with (Text)",does_not_end_with:"Does not end with (Text)",greater_than:"Greater than (Number)",less_than:"Less than (Number)",equal_to:"Equal to (Number)",after_date:"After (Date/time)",before_date:"Before (Date/time)",equal_date:"Equals (Date/time)",is_true:"Is true (Boolean)",is_false:"Is false (Boolean)",exists:"Exists",does_not_exists:"Does not exist",is_empty:"Is empty",is_not_empty:"Is not empty",is_blank:"Is blank",is_not_blank:"Is not blank",is_email_valid:"Is Valid Email Format",is_valid_json:"Is Valid JSON"};function Fc(e){var t=e.groupIndex,n=e.conditionIndex,i=e.condition,a=e.onRemove,s=e.onConditionChange,l=e.onDynamicButtonClick,c=e.openDynamicTagsPopup,u=i.key,d=void 0===u?"":u,p=i.condition,f=void 0===p?"":p,h=i.value,m=void 0===h?"":h,g=i.id,v=void 0===g?"":g,y=["exists","does_not_exists","is_true","is_false","is_empty","is_not_empty","is_blank","is_not_blank","is_email_valid","is_valid_json"].includes(f),x=(0,r.useState)(d),w=x[0],b=x[1],S=(0,r.useState)(f),N=S[0],C=S[1],j=(0,r.useState)(m),E=j[0],M=j[1],k=function(e,o){s(t,n,e,o)};return(0,o.jsx)("div",{className:"fm-filter-condition",children:(0,o.jsx)("div",{className:"fm-dynamic-input-wrap fm-filter-conditions p-2 border rounded d-flex w-100",children:(0,o.jsxs)("div",{className:"condition-wrap p-1 d-flex gap-3 w-100",children:[(0,o.jsxs)("div",{className:"condition-block w-100 d-flex flex-column gap-2",children:[(0,o.jsxs)("div",{className:"fm-dynamic-input-field",children:[(0,o.jsx)("input",{className:"fm-dynamic-inputs dynamic-field-input w-100 filter-condition-input step-condition-input",name:"filter-field-key",type:"text",autoComplete:"off",placeholder:"Choose field",value:w,onChange:function(e){return b(e.target.value)},onBlur:function(){return k("key",w)},id:"filter-field-key-"+v,onClick:function(e){c(e)}}),(0,o.jsx)("span",{className:"dynamic-field-button dashicons dashicons-database",title:"Replace with captured data",onClick:function(e){var t=e.target;l(t)}})]}),(0,o.jsxs)("div",{className:"fm-condition-input-field",children:[(0,o.jsx)("select",{className:"fm-filter-condition form-control w-100 filter-condition-input step-condition-input",name:"filter-field-condition",title:"Choose condition",value:N,onChange:function(e){return C(e.target.value)},onBlur:function(e){return k("condition",e.target.value)},children:Object.entries(Hc).map((function(e){var t=e[0],n=e[1];return(0,o.jsx)("option",{value:t,children:n},t)}))}),(0,o.jsx)("div",{className:"select-holder"})]}),(0,o.jsxs)("div",{className:"fm-dynamic-input-field filter-condition-value",style:{opacity:y?0:1},children:[(0,o.jsx)("textarea",{className:"fm-dynamic-inputs dynamic-field-input w-100 filter-condition-input step-condition-input",name:"filter-field-value",autoComplete:"off",placeholder:"Enter or select value",value:decodeURIComponent(E),onChange:function(e){return M(e.target.value)},onBlur:function(){return k("value",E)},disabled:y,id:"filter-field-value-"+v,onClick:function(e){return c(e)},children:decodeURIComponent(E)}),(0,o.jsx)("span",{className:"dynamic-field-button dashicons dashicons-database",title:"Replace with captured data",onClick:function(e){var t=e.target;l(t)}})]})]}),(0,o.jsx)("a",{href:"javascript:void(0);",className:"dynamic-input-remove btn-remove-condition",style:{width:40},title:"Remove condition",onClick:function(){return a(t,n)},children:(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#333333",xmlns:"http://www.w3.org/2000/svg","data-reactroot":"",children:[(0,o.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"1",stroke:"#333333",fill:"none",d:"M20 22H4C2.9 22 2 21.1 2 20V4C2 2.9 2.9 2 4 2H20C21.1 2 22 2.9 22 4V20C22 21.1 21.1 22 20 22Z"}),(0,o.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"1",stroke:"#333333",d:"M6 6L18 18"}),(0,o.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"1",stroke:"#333333",d:"M18 6L6 18"})]})})]})})})}function Vc(e){var t=e.onAddAnd,n=e.onAddOr;return(0,o.jsxs)("div",{className:"dynamic-input-add-conditions fm-flowmattic-filter-add-more d-flex gap-2 align-items-center mb-2",children:[(0,o.jsxs)("a",{href:"javascript:void(0);",className:"btn btn-sm btn-outline-success btn-add-and-condition",onClick:t,children:[(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M10.5 4.5C10.5 3.66772 11.1677 3 12 3C12.8323 3 13.5 3.66772 13.5 4.5V19.5C13.5 20.3323 12.8323 21 12 21C11.1677 21 10.5 20.3323 10.5 19.5V4.5Z","clip-rule":"evenodd","fill-rule":"evenodd"}),(0,o.jsx)("path",{d:"M3 12C3 11.1677 3.66772 10.5 4.5 10.5H19.5C20.3323 10.5 21 11.1677 21 12C21 12.8323 20.3323 13.5 19.5 13.5H4.5C3.66772 13.5 3 12.8323 3 12Z","clip-rule":"evenodd","fill-rule":"evenodd"})]}),"AND"]}),(0,o.jsxs)("a",{href:"javascript:void(0);",className:"btn btn-sm btn-outline-success btn-add-or-condition",onClick:n,children:[(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M10.5 4.5C10.5 3.66772 11.1677 3 12 3C12.8323 3 13.5 3.66772 13.5 4.5V19.5C13.5 20.3323 12.8323 21 12 21C11.1677 21 10.5 20.3323 10.5 19.5V4.5Z","clip-rule":"evenodd","fill-rule":"evenodd"}),(0,o.jsx)("path",{d:"M3 12C3 11.1677 3.66772 10.5 4.5 10.5H19.5C20.3323 10.5 21 11.1677 21 12C21 12.8323 20.3323 13.5 19.5 13.5H4.5C3.66772 13.5 3 12.8323 3 12Z","clip-rule":"evenodd","fill-rule":"evenodd"})]}),"OR"]})]})}function Zc(e){var t=e.settings,n=e.updateNodeConditions,i=e.openDynamicTagsPopup,a=e.openDynamicTagsPopupOnButton,s=ta(),l=(s.getNodes,s.getNode,s.getEdges,s.setNodes,s.updateNode,t||null),c=l||[[{key:"",condition:"",value:"",id:zl()}]];c=l&&Object.keys(l).length>0?Object.keys(l).sort((function(e,t){return parseInt(e)-parseInt(t)})).map((function(e){return l[e].map((function(e){return zc(zc({},e),{id:e.id||zl()})}))})):[[{key:"",condition:"",value:"",id:zl()}]];var u=(0,r.useState)(c),d=u[0],p=u[1];function f(e){var t={};return 0!==Object.keys(e).length&&e.forEach((function(e,n){t[n+1]=e.map((function(e){return{id:e.id,key:e.key,condition:e.condition,value:e.value.includes('"')?encodeURIComponent(e.value):e.value}}))})),t}var h=(0,r.useRef)(f(d));(0,r.useEffect)((function(){var e,t,o=f(d);e=o,t=h.current,JSON.stringify(e)!==JSON.stringify(t)&&(h.current=o,n(o))}),[d]);var m=function(e,t){p((function(n){var o=n.map((function(n,o){return o===e?n.filter((function(e,n){return n!==t})):n})).filter((function(e){return e.length>0}));return 0===o.length?[[{key:"",condition:"",value:"",id:zl()}]]:o}))},g=function(e,t,n,o){p((function(r){return r.map((function(r,i){return i===e?r.map((function(e,r){var i;return r===t?zc(zc({},e),((i={})[n]=o,i)):e})):r}))}))};return(0,o.jsx)("div",{className:"action-conditions-wrap d-flex flex-column gap-3",children:d.map((function(e,t){return(0,o.jsxs)(r.Fragment,{children:[e.map((function(e,n){return(0,o.jsx)(Fc,{groupIndex:t,conditionIndex:n,condition:e,onRemove:m,onConditionChange:g,onDynamicButtonClick:a,openDynamicTagsPopup:i},e.id)})),(0,o.jsx)(Vc,{onAddAnd:function(){return function(e){p((function(t){return t.map((function(t,n){return n===e?Bc(Bc([],t,!0),[{key:"",condition:"",value:"",id:zl()}],!1):t}))}))}(t)},onAddOr:function(){return function(e){p((function(t){var n=Bc([],t,!0);return n.splice(e+1,0,[{key:"",condition:"",value:"",id:zl()}]),n}))}(t)}}),t<d.length-1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("hr",{}),(0,o.jsx)("div",{className:"fm-or-condition-block justify-content-center mt-0 mb-0",children:(0,o.jsx)("span",{className:"form-text fw-bold",children:"Or continue if"})})]})]},t)}))})}var Wc=n(36),qc=n(794),$c=n.n(qc),Yc=function(){return Yc=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Yc.apply(this,arguments)};const Xc=function(e){var t,n=e.isOpen,i=e.nodeId,a=e.onClose,s=e.onSave,l=e.currentNode,c=e.onChangeApp,u=(0,r.useState)("setup-tab"),d=u[0],p=u[1],f=(0,r.useState)("action-data-in"),h=f[0],m=f[1],g=ta(),v=g.getNodes,y=g.getNode,x=(g.getEdges,g.setNodes),w=g.updateNode,b=((0,r.useState)(""),(0,r.useState)(null)),S=b[0],N=b[1],C=(0,r.useState)(0),j=C[0],E=C[1],M=(0,r.useState)({}),k=M[0],_=M[1],O=(0,r.useState)(!1),R=O[0],A=O[1],I=(0,r.useState)(""),T=I[0],D=I[1],P=(0,r.useState)(!1),L=P[0],z=P[1],B=(0,r.useState)(!1),H=B[0],F=B[1],V=(0,r.useState)({}),Z=V[0],W=V[1],q=(0,r.useState)([]),$=q[0],Y=q[1],X=(0,r.useState)(""),U=X[0],K=X[1],G=(0,r.useState)(null),J=G[0],Q=G[1],ee=(0,r.useState)(""),te=ee[0],ne=ee[1],oe=(0,r.useState)(!1),re=oe[0],ie=oe[1],ae=(0,r.useState)({}),se=ae[0],le=ae[1],ce=(0,r.useState)(""),ue=ce[0],de=ce[1],pe=(0,r.useState)(0),fe=pe[0],he=(pe[1],(0,r.useState)({})),me=he[0],ge=he[1],ve=(0,r.useState)(0),ye=ve[0],xe=ve[1],we=(0,r.useState)(null),be=we[0],Se=we[1],Ne=(0,r.useState)("json"),Ce=Ne[0],je=Ne[1],Ee=(0,r.useState)("No"),Me=Ee[0],ke=Ee[1],_e=(0,r.useState)("No"),Oe=_e[0],Re=_e[1],Ae=(0,r.useState)("No"),Ie=Ae[0],Te=Ae[1],De=(0,r.useState)(500),Pe=De[0],Le=De[1],ze=(0,r.useState)(585),Be=ze[0],He=ze[1];(0,r.useEffect)((function(){var e=localStorage.getItem("modalWidth"),t=localStorage.getItem("modalHeight");e&&t&&(Le(Number(e)),He(Number(t)))}),[]),(0,r.useEffect)((function(){localStorage.setItem("modalWidth",Pe.toString()),localStorage.setItem("modalHeight",Be.toString())}),[Pe,Be]),l.actionAppArgs||(l.actionAppArgs={}),l.settings||(l.settings={});var Fe=null==l?void 0:l.data,Ve=null==Fe?void 0:Fe.app;if(Ve.fm_app){var Ze=Fl(Ve.fm_app);Ve=Ze,Fe.app=Ze}var We=y(i);"router"===Ve.fm_app&&a(),rl.currentNodeId=i,Ve.key;var qe=(null==Fe?void 0:Fe.stepNumber)?null==Fe?void 0:Fe.stepNumber:1,$e=null==Fe?void 0:Fe.label,Ye=null==Fe?void 0:Fe.eventSlug,Xe=null==Ve?void 0:Ve.actions,Ue=null==Ve?void 0:Ve.triggers,Ke=void 0,Ge=Ye||$e,Je=1===qe?"trigger":"action";We&&"eventTitle"in We.data&&(Ge="string"==typeof We.data.eventTitle?We.data.eventTitle:Ge),Ke="action"===Je?Ht(Ve,Ye)?Ht(Ve,Ye):Ge:Ft(Ve,Ye)?Ft(Ve,Ye):Ge;var Qe=(0,r.useState)(Ke||Ge),et=Qe[0],tt=Qe[1],nt=(0,r.useState)(""),ot=nt[0],rt=nt[1],it=(0,r.useState)("Continue"),at=it[0],st=it[1],lt=(0,r.useState)("trigger"),ct=lt[0],ut=lt[1],dt=(0,r.useState)({disabled:!1}),pt=dt[0],ft=dt[1],ht=(0,r.useState)(!1),mt=ht[0],gt=ht[1],vt=(0,r.useState)(!1),yt=vt[0],xt=vt[1],wt=(0,r.useState)({}),bt=wt[0],St=wt[1],Nt=(0,r.useState)([]),Ct=Nt[0],jt=Nt[1],Et=(0,r.useState)({}),Mt=Et[0],kt=Et[1],_t=(0,r.useState)(""),Ot=_t[0],Rt=_t[1],At=(0,r.useState)(null),It=(At[0],At[1],(0,r.useRef)(null)),Tt=(0,r.useRef)(null),Dt=(0,r.useRef)(null),Pt=1===qe?Ue:Xe;function Lt(e,t){void 0===e&&(e=Tt.current),void 0===t&&(t=null);var n=document.querySelector("#temp-config-content");n||((n=document.createElement("div")).id="temp-config-content",n.style.display="none",n.className="d-none"),document.body.appendChild(n);var o=l.data.app.fm_app,r=window.FlowMatticWorkflow.UCWords(o).replaceAll(" ","_")+"View",i={model:be};if(!Fl(o).custom_app){var a=new window.FlowMatticWorkflow[r](i);a.$el=window.jQuery(document.querySelector("#temp-config-content")),a.$el.html(a.render().el),a.handleAPIChangeEvent&&a.handleAPIChangeEvent.call(a,t),a.generateDynamicFieldsHTML&&a.generateDynamicFieldsHTML.call(a,t,o)}var s=e.generateDynamicFieldsPopupReact.call(e,t);if(window.dynamicFieldOptions=void 0,window.dynamicFieldOptionsGroup="",s){var c=s,u=document.createElement("div");u.innerHTML=c;var d={},p=u.querySelector("optgroup");window.dynamicFieldOptionsGroup=(null==p?void 0:p.label)?p.label:"",u.querySelectorAll("option").forEach((function(e){e.value&&(d[e.value]=e.text)})),window.dynamicFieldOptions=d}}function zt(e){var t=document.querySelector(".tab-pane.show.active");tn();var n=l.data.app.fm_app,o=new window.FlowMatticWorkflow.Action;window.currentSelectAppEvent=e,Pt&&Pt[e]?o.set("action",e):o.set("action",""),o.set("isVisualWorkflowBuilder",!0),o.set("$el",window.jQuery(t)),o.set("el",t),o.set("application",n),o.set("stepID",zl()),o.set("eid",zl());var r,a=window.FlowMatticWorkflow.UCWords(n).replaceAll(" ","_")+"View",s="",c=0===v().findIndex((function(e){return e.id===i}))?"TriggerView":"ActionView",u="TriggerView"===c?"trigger":"action";o.set("type",u);var d=y(i);if(d)if("trigger"===u){var p="settings"in d?d.settings:{};if(p)for(var f=0,h=Object.entries(p);f<h.length;f++){var m=h[f],g=m[0],x=m[1];o.set(g,x)}}else{var w=d.actionAppArgs;if(void 0!==w){for(var b=0,S=Object.entries(w);b<S.length;b++){var N=S[b];g=N[0],x=N[1],o.set(g,x)}delete w.stepTitle,delete w.stepIndex,delete w.action,delete w.type,kt(w),o.set("actionAppArgs",w)}}o.attributes.action=e,Se(o);var C={model:o};if("ActionView"===c){if(window.FlowMatticWorkflow[a])r=new window.FlowMatticWorkflow[a](C),j=new window.FlowMatticWorkflow.ActionView(C),It.current=r,Tt.current=j,s=r.render().el.outerHTML;else{r=new window.FlowMatticWorkflow[c](C);var j=new window.FlowMatticWorkflow.ActionView(C);if(It.current=r,Tt.current=j,T=document.getElementById("flowmattic-custom-app-action-data-template")){var E=window.FlowMatticWorkflow.template(T.innerHTML),M={action:e,application:n,eid:zl(),actionAppArgs:d.actionAppArgs};try{s=E({appData:M})}catch(e){console.error("Error rendering the app template:",e)}}}ut("action")}else if(window.FlowMatticWorkflow[a]){r=new window.FlowMatticWorkflow[a](C),It.current=r;var k=new window.FlowMatticWorkflow.TriggerView(C);Tt.current=k,r.model.set("application",n),s=r.render().el.outerHTML;var _=document.querySelector("#temp-config-content");_||((_=document.createElement("div")).id="temp-config-content",_.style.display="none",_.className="d-none"),document.body.appendChild(_),r.$el=window.jQuery(document.querySelector("#temp-config-content")),r.$el.html(r.render().el),window.FlowMatticWorkflowEvents.trigger("appTriggerChanged",e),s=r.render().el.outerHTML;var O=!1;if(l&&e&&l.data.app.triggers[e]&&(O=!!l.data.app.triggers[e].api_polling),O){var R=k.setApplicationTrigger();s=R+s}var A=document.createElement("div");A.innerHTML=s;var I=A.querySelector(".fm-webhook-capture-button");I&&I.remove(),s=A.innerHTML,A.remove(),ut("trigger")}else{var T;if(T=document.getElementById("flowmattic-custom-webhook-app-data-template")){E=window.FlowMatticWorkflow.template(T.innerHTML),M={action:e,trigger:e,application:n,eid:zl()};try{s=E(M)}catch(e){console.error("Error rendering the trigger app template:",e)}}ut("trigger")}for(var D,P,L=0,z=Object.entries({"form-group":"css-yagMiHw","fm-input-title":"css-Tirhb7Y","input-title":"css-rPBDSnn","form-check-input":"css-KHGDVLV","fm-dynamic-input-field":"css-UX4inQD","dynamic-field-button":"css-oLvqoIe","dashicons-database":"css-EMqtR0L",badge:"css-ssW1jyn","fm-api-request-parameters-body":"css-MWJ5qXy","fm-api-request-parameters":"css-UCZhKaS","fm-api-request-headers":"css-UCZhKaS","fm-checkbox":"css-sD3O4ai"});L<z.length;L++){var B=z[L];g=B[0],x=B[1],s=s.replaceAll(g,g+" "+x)}D=s,(P=(new DOMParser).parseFromString(D,"text/html")).querySelectorAll('input[type="checkbox"]').forEach((function(e){var t=null;if(e.id&&(t=P.querySelector('label[for="'+CSS.escape(e.id)+'"]')),!t){var n=e.nextElementSibling;n&&"label"===n.tagName.toLowerCase()&&(t=n)}if(t){var o=P.createElement("div");o.className="css-wqX4n5j",e.parentNode&&e.parentNode.insertBefore(o,e),o.appendChild(e),o.appendChild(t)}})),s=P.body.innerHTML,s=window.FlowMatticWorkflow.destroySelectPicker(s);var H=document.createElement("span");H.className="dynamic-tags-button dynamic-field-button css-EMqtR0L css-oLvqoIe",H.innerHTML='<span class="border border-solid d-flex"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="18" width="18" name="formAdd"><path fill="currentColor" d="M13 19v-6h6v-2h-6V5h-2v6H5v2h6v6h2Z"></path></svg></span>';var F=(s=s.replaceAll(/(<span class="dynamic-field-button(.*?)<\/span>)/g,H.outerHTML)).match(/<select[\s\S]+?<\/select>/g);if(F&&F.forEach((function(e){var t=e.match(/select class="([^"]*)"/),n='<div class="select-holder-wrap w-100 '+(t&&t[1]?t[1].replace("form-control","").replace("w-100","").replace("form-select","").trim():"")+'">'+e+'<div data-field="select" class="select-holder"></div></div>';s=s.replace(e,n)})),"trigger"===u&&(s=(s=(s=(s=(s=(s=(s=(s=s.replace(/<div class="fm-form-capture-button"[\s\S]+?<\/div>/g,"")).replace(/<div class="fm-webhook-capture-data[\s\S]+?<\/div>/g,"")).replace(/<div class="fm-application-wordpress-data[\s\S]+?<\/div>/g,"")).replace(/<div class="flowmattic-wordpress-trigger-data[\s\S]+?<\/div>/g,"")).replace(/<div class="flowmattic-wordpress-form-data[\s\S]+?<\/div>/g,"")).replace(/<div class="(.*)">[\n\s\n]+<\/div>/g,"")).replace(/<div class="(.*)">[\n\s\n]+<\/div>/g,"")).replace(/<div>[\n\s\n]+<\/div>/g,"")),t){var V=t.querySelectorAll("[required]"),Z=!1;V.forEach((function(e){e.value||(Z=!0)})),ft({disabled:Z})}rt(s)}(0,r.useRef)(null),(null==Fe?void 0:Fe.customLabel)&&(Ke=Fe.customLabel),(0,r.useEffect)((function(){if(n&&"router"===(null==Fe?void 0:Fe.app.fm_app))return a(),void rt("");var e="setup-tab";We&&"parentType"in We&&"routerRoute"===We.parentType&&(e="configure-tab"),tt(Ke||Ge),p(e),tn(),st("test-tab"===e?"Save & Close":"Continue"),l.data.eventSlug?zt(l.data.eventSlug):rt("");var t=y(i);if(t&&"captureResponse"in t){var o=t.captureResponse;St(o),xt(!0)}t&&t.responses&&jt(t.responses),t&&"actionAppArgs"in t&&kt(t.actionAppArgs),t&&"activeResponseIndex"in t&&xe(t.activeResponseIndex),"action"===Je&&"filter"!==Ve.fm_app&&"iterator_storage"!==Ve.fm_app&&"iterator_end"!==Ve.fm_app&&(t&&t.actionAppArgs&&"conditional_execution"in t.actionAppArgs&&ke(t.actionAppArgs.conditional_execution),t&&t.actionAppArgs&&"ignore_errors"in t.actionAppArgs&&Re(t.actionAppArgs.ignore_errors)),"action"===Je&&"iterator_end"!==Ve.fm_app&&t&&t.skip_execution&&Te(t.skip_execution)}),[i,n,Fe]),(0,r.useEffect)((function(){ft({disabled:mt})}),[mt]),(0,r.useEffect)((function(){var e=Tt.current,t=It.current;if(t){var n=Dt.current;if(n){var o=[];t.$el=window.jQuery(document.querySelector("#configure-tab"));for(var r=function(e,r){var i=e.trim().split(" "),a=i[0],s=i.slice(1).join(" "),c=function(e){e.target&&e.target.matches(s)&&!Fl(l.data.app.fm_app).custom_app&&"function"==typeof t[r]&&t[r].call(t,e)};n.addEventListener(a,c),o.push({eventType:a,eventHandler:c})},i=0,a=Object.entries(t.events);i<a.length;i++){var s=a[i];r(s[0],s[1])}e&&(e.$el=window.jQuery(document.querySelector("#configure-tab")));for(var c=function(r,i){var a=r.trim().split(" "),s=a[0],c=a.slice(1).join(" "),u=function(n){if(n.target&&n.target.matches(c)&&!Fl(l.data.app.fm_app).custom_app&&"function"==typeof e[i]){"changeDynamicFields"===i&&n.target.addEventListener("blur",(function(){Rt(n.target)}));var o=i;if("generateDynamicFieldsPopup"===i){window.dynamicFieldOptions=void 0,window.dynamicFieldOptionsGroup="",t.model&&Se(t.model),Lt(e,n);var r=n.target;Bt(r)}else e[o].call(e,n)}};n.addEventListener(s,u),o.push({eventType:s,eventHandler:u})},u=0,d=Object.entries(null==e?void 0:e.events);u<d.length;u++){var p=d[u];c(p[0],p[1])}e&&e.updateActionDataDependencies&&"function"==typeof e.updateActionDataDependencies&&setTimeout((function(){e.updateActionDataDependencies()}),100);var f=function(e){var t=e.detail.target;Kt(t)},h=function(e){var t=e.target;Kt(t)};document.addEventListener("openDynamicTag",f);var m=document.querySelector("#configure-tab");if(m){var g=m.querySelectorAll(".dynamic-field-button");g&&g.forEach((function(e){e.addEventListener("click",h)}))}return function(){for(var e=0,t=o;e<t.length;e++){var r=t[e],i=r.eventType,a=r.eventHandler;n.removeEventListener(i,a)}It.current,document.removeEventListener("openDynamicTag",f);var s=document.querySelector("#configure-tab");if(s){var l=s.querySelectorAll(".dynamic-field-button");l&&l.forEach((function(e){e.removeEventListener("click",h)}))}}}}}),[ot]),(0,r.useEffect)((function(){if(Ot&&Ot.closest(".data-dynamic-fields")){var e=new Event("change");Ot.dispatchEvent(e)}}),[Ot]);var Bt=function(e){e&&(e.onkeyup=function(e){var t,n=e.target,o=n.selectionStart||0;if(!("/"!==n.value.charAt(o-1)&&"@"!==n.value.charAt(o-1)||1!==o&&" "!==n.value.charAt(o-2))){N(n),E(o);var r=n.getBoundingClientRect(),i={top:r.top,bottom:r.bottom,autoTop:r.top};r.bottom>window.innerHeight/2?(i.top="auto",i.bottom="20px"):(i.top=r.top+"px",i.bottom="auto"),_(i);var a=n.closest(".form-group"),s=a?null===(t=a.querySelector(".fm-input-title, .input-title"))||void 0===t?void 0:t.textContent:"",l=s?s.indexOf("Required"):-1;if(s&&l>-1&&(s=s.slice(0,l)),n.classList.contains("dynamic-field-input")){var c=n.closest("tr");if(c){var u=c.querySelector(".fm-col-key-input");u&&(s=u.value)}}D(s),window.dynamicFieldOptions=void 0,window.dynamicFieldOptionsGroup="",Lt(Tt.current,e),A(!0)}})};function Ht(e,t){if(e){var n=e.actions,o="Select event";if(n&&t){for(var r in n[Ye]&&"title"in n[Ye]&&(o=n[t].title),n){var i=n[r];"object"!=typeof i||"title"in i||Ye in i&&(o=i[Ye].title)}return o}}}function Ft(e,t){if(e){var n=e.triggers,o="Select event";if(n&&t){for(var r in n[Ye]&&"title"in n[Ye]&&(o=n[t].title),n){var i=n[r];"object"!=typeof i||"title"in i||Ye in i&&(o=i[Ye].title)}return o}}}var Vt=function(e){p(e),st("test-tab"===e?"Save & Close":"Continue")},Zt=function(e){m(e)},Wt=document.querySelector('[data-id="'.concat(i,'"] > div'));Wt&&setTimeout((function(){Wt.classList.add("node-selected")}),100);var qt=function(e){var t=document.getElementsByClassName("capture-spinner")[0];t.classList.add("d-none"),t.nextElementSibling.classList.remove("disabled"),St(e.webhook_capture);var n=Ct||[],o={letter:Bl(n.length),time:(new Date).toLocaleString(),response:e.webhook_capture};n.push(o),jt(n);var r=n.length-1;xe(r),l.captureResponse=e.webhook_capture,l.responses=Ct;var a=v().map((function(e){return e.id===i?Yc(Yc({},e),{data:Yc({},e.data),actionAppArgs:l.actionAppArgs,captureResponse:l.captureResponse,responses:l.responses,activeResponseIndex:ye}):e}));x(a),xt(!0)},$t=function(e){if(document.getElementsByClassName("capture-spinner")[0].classList.add("d-none"),e&&e.fm_raw_response){var t=e.fm_raw_response;delete e.fm_raw_response,e.fm_raw_response=t}St(e),l.captureResponse=e,l.responses=Ct;var n=v().map((function(t){return t.id===i?Yc(Yc({},t),{data:Yc({},t.data),settings:l.settings,actionAppArgs:l.actionAppArgs,captureResponse:e,responses:Ct}):t}));x(n),xt(!0),setTimeout((function(){m("action-data-out")}),10)},Yt=document.querySelector("#"+d);if(Yt){var Xt=Yt.querySelectorAll("input, select, textarea"),Ut=!1;Xt.forEach((function(e){window.jQuery(e).on("change",(function(){Xt.forEach((function(e){var t=e.getAttribute("data-field")||e.name,n=e.value;if("checkbox"===e.type&&(n=e.checked?n:""),"dynamic-field-key[]"===t||"dynamic-field-value[]"===t){var o=e.closest(".data-dynamic-fields"),r=o?o.getAttribute("data-field-name"):null;if(r&&o){var i,a=o.querySelectorAll('[name="dynamic-field-key[]"]'),s=o.querySelectorAll('[name="dynamic-field-value[]"]'),c=[],u={};c=Array.from(a).map((function(e){return e.value})),i=Array.from(s).map((function(e){return e.value})),c.forEach((function(e,t){e=""!==e?e:t,i[t]&&(u[e]=i[t])})),t=r,n=u}}"workflow-api-content-type"===t&&(t="content_type"),"add-parameters"===t&&(t="set_parameters"),"add-headers"===t&&(t="set_headers"),"workflow_api_connect"===t&&(t="connect_id"),"workflow-api-authentication-type"===t&&(t="authentication"),"auth-api-key"===t&&(t="auth_api_key"),"auth-api-secret"===t&&(t="auth_api_secret"),"auth-api-bearer-token"===t&&(t="auth_api_bearer_token"),l&&("trigger"===Je?l.settings[t]=n:"filter"!==l.data.app.fm_app&&(l.actionAppArgs[t]=n))})),"action"===ct&&kt(l.actionAppArgs);var t=v().map((function(e){if(e.id===i){var t=Yc(Yc({},e.actionAppArgs),l.actionAppArgs);return"action"===ct&&kt(t),Yc(Yc({},e),{data:Yc({},e.data),settings:l.settings,actionAppArgs:t,captureResponse:l.captureResponse,responses:l.responses})}return e}));x(t),e.hasAttribute("required")&&(Ut=!1,e.value?Xt.forEach((function(e){e.hasAttribute("required")&&(e.value||(Ut=!0))})):Ut=!0,Ut!==pt.disabled&&gt(Ut))}))}))}var Kt=function(e){var t,n,o=e.previousElementSibling,r=o.selectionStart||0,i=(null===(n=null===(t=o.closest(".form-group"))||void 0===t?void 0:t.querySelector(".fm-input-title, .input-title"))||void 0===n?void 0:n.textContent)||"",a=i?i.indexOf("Required"):-1;i&&a>-1&&(i=i.slice(0,a));var s=o.getBoundingClientRect(),l={top:s.top,bottom:s.bottom,autoTop:s.top};s.bottom>window.innerHeight/2?(l.top="auto",l.bottom="20px"):(l.top=s.top+"px",l.bottom="auto");var c={target:o,currentTarget:o};Lt(Tt.current,c),_(l),N(o),D(i),E(r),A(!0)},Gt=document.querySelector("#"+d);Gt&&!L&&Gt.querySelectorAll(".dynamic-field-input").forEach((function(e){Bt(e),z(!0)}));var Jt=function(e){if(e.target){var t=e.target.classList.contains("dynamic-field-button"),n=document.querySelector(".css-wUXDl3m");!n||n.contains(e.target)||t||(A(!1),document.removeEventListener("click",Jt))}};(0,r.useEffect)((function(){R&&document.addEventListener("click",Jt)}),[R]);var Qt=function(e){if(H){var t=e.target,n=t&&t.classList.contains("select-holder"),o=document.querySelector(".css-wUXDl3m");!o||o.contains(t)||n||tn()}},en=function(e){var t,n,o,r,i=e.target,a=window.jQuery(i).parent().find("select")[0],s=a.value;if(s!==te&&ne(s),!J||a!==J){var l=document.querySelector(".css-TxKw9yE");l&&l.focus();var c=a,u=(null===(n=null===(t=c.closest(".form-group"))||void 0===t?void 0:t.querySelector("h4"))||void 0===n?void 0:n.textContent)||(null===(r=null===(o=c.closest(".css-YljfTWK"))||void 0===o?void 0:o.querySelector(".css-QE4sAk5>span"))||void 0===r?void 0:r.textContent)||"",d=u?u.indexOf("Required"):-1;u&&d>-1&&(u=u.slice(0,d)),K(u);var p=i.getBoundingClientRect(),f={top:p.top,bottom:p.bottom,autoTop:p.top};if(p.bottom>window.innerHeight/2?(f.top="auto",f.bottom="20px"):(f.top=p.top+"px",f.bottom="auto"),W(f),"workflow-trigger-events"===c.getAttribute("name"))Y(Pt);else{var h={};c.querySelector("optgroup")?c.querySelectorAll("optgroup").forEach((function(e){var t=e.querySelectorAll("option"),n=[];t.forEach((function(e){var t=e.value,o={value:t,title:e.text,description:e.getAttribute("data-subtext")||"ID: "+t};n[t]=o})),h[e.label]=[],h[e.label].push(n)})):c.querySelectorAll("option").forEach((function(e){e.value&&(h[e.value]={value:e.value,title:e.text,description:e.getAttribute("data-subtext")||"ID: "+e.value})})),Y(h)}J||Q(a),H||F(!0)}},tn=function(){F(!1),Y([]),Q(null)};(0,r.useEffect)((function(){var e=document.querySelector("#"+d);return H&&document.addEventListener("click",Qt),e&&e.querySelectorAll(".select-holder").forEach((function(e){e.addEventListener("click",en,{once:!0})})),function(){document.removeEventListener("click",Qt),e&&e.querySelectorAll(".select-holder").forEach((function(e){e.removeEventListener("click",en)})),J&&J.removeEventListener("click",en)}}),[H,d,tn,en,J]);var nn=function(){ie(!1),le(null)},on=function(e){if(re&&e.target){var t=e.target.classList.contains("css-sh0UoRP"),n=document.querySelector(".response-data");!n||n.contains(e.target)||t||(nn(),document.removeEventListener("click",on))}};return(0,r.useEffect)((function(){if("action"===ct&&bt){var e=document.querySelector(".jsonView"),t=bt;if(void 0!==bt.fm_raw_response&&bt.fm_raw_response)try{t=JSON.parse(bt.fm_raw_response)}catch(e){var n=bt.fm_raw_response.replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\\\/g,"\\");try{t=JSON.parse(n)}catch(e){console.error("Error parsing stripped JSON:",e)}}var o=JSON.parse(JSON.stringify(t,null,2).replace(/</g,"&lt;").replace(/>/g,"&gt;")),r=Ac().create(o);e&&(e.innerHTML=""),Ac().render(r,e),Ac().expand(r)}}),[bt,yt]),(0,r.useEffect)((function(){var e,t;if("configure-tab"===d){var n=document.querySelector("#configure-tab");if(n){if(l.actionAppArgs=We.actionAppArgs||l.actionAppArgs,It.current&&We){It.current.model.set("actionAppArgs",We.actionAppArgs);var o="settings"in We?We.settings:{};if(o)for(var r=0,a=Object.entries(o);r<a.length;r++){var s=a[r],c=s[0],u=s[1];It.current.model.set(c,u)}if(null===(e=It.current)||void 0===e?void 0:e.events){for(var p=0,f=Object.entries(null===(t=It.current)||void 0===t?void 0:t.events);p<f.length;p++){var h=f[p],m=h[0],g=h[1],v=m.trim().split(" "),x=v[0],b=v.slice(1).join(" "),S=n.querySelector(b),C=S?S.value:"";if(S&&S.name,"change"===x&&""!==C){var j={target:S},M=It.current;M[g].call(M,j)}}var k=n.querySelectorAll(".bootstrap-select");k&&k.forEach((function(e){var t=e.parentElement,n=e.outerHTML.toString(),o=window.FlowMatticWorkflow.destroySelectPicker(n);if(t){var r=o?(new DOMParser).parseFromString(o,"text/html"):null;t.innerHTML=r?r.body.innerHTML:""}}))}}var O=n.querySelectorAll('[name="connect_id"], [name="trigger_connect_id"]');O&&O.forEach((function(e){e.onchange=function(e){var t,o,r=e.target;if(r.value,null===(t=It.current)||void 0===t?void 0:t.events)for(var i=0,a=Object.entries(null===(o=It.current)||void 0===o?void 0:o.events);i<a.length;i++){var s=a[i],l=s[0],c=s[1],u=l.trim().split(" "),d=(u[0],u.slice(1).join(" ")),p=n.querySelector(d),f=p?p.name:"";if("change"===l&&r.name===f){var h={target:r},m=It.current;m[c].call(m,h)}}}}))}}var R=function(e){var t=e.detail;t&&(l.filterConditions=t,l.actionAppArgs=t,kt(l.actionAppArgs),w(i,l))};document.addEventListener("fmUpdateFilterConditions",R);var I=function(e){var t=e.detail,n=t.attr,o=t.value;n&&o&&"captureResponse"!==n&&(l.settings[n]=o,We[n]=o)},T=function(e){var t=e.detail,n=t.attr,o=t.value;n&&o&&(l.actionAppArgs[n]=o,void 0===We.actionAppArgs&&(We.actionAppArgs={}),We.actionAppArgs[n]=o,w(i,l),kt(l.actionAppArgs))},P=document.querySelector('[contenteditable="true"]'),L=function(e){var t,n,o,r;if(P&&"@"===e.key){var i=null===(n=null===(t=P.closest(".form-group"))||void 0===t?void 0:t.querySelector(".fm-input-title"))||void 0===n?void 0:n.textContent,a=null===(o=window.getSelection())||void 0===o?void 0:o.getRangeAt(0),s=null===(r=P.closest(".form-group"))||void 0===r?void 0:r.querySelector(".content-editor-input"),l=P.getBoundingClientRect(),c={top:l.top,bottom:l.bottom,autoTop:l.top};l.bottom>window.innerHeight/2?(c.top="auto",c.bottom="20px"):(c.top=l.top+"px",c.bottom="auto"),_(c),E(a),N(s),D(i),A(!0)}},z=function(e){var t,n=null===(t=null==P?void 0:P.closest(".form-group"))||void 0===t?void 0:t.querySelector(".content-editor-input");n&&P&&(n.value=P.innerHTML,n.dispatchEvent(new Event("change",{bubbles:!0})))};null==P||P.addEventListener("blur",z),null==P||P.addEventListener("keyup",L),document.addEventListener("triggerAppDataUpdateSingleAttribute",I),document.addEventListener("actionAppDataUpdateSingleAttribute",T);var B=function(e){var t=e.detail;t&&(l.actionAppArgs=t.actionAppArgs||t)};if(document.addEventListener("updateActionAppArgs",B),"conditions-tab"===d){var H=y(i);H&&0===Object.keys(Mt).length&&(l.actionAppArgs=H.actionAppArgs,kt(H.actionAppArgs))}return function(){document.removeEventListener("fmUpdateFilterConditions",R),document.removeEventListener("triggerAppDataUpdateSingleAttribute",I),document.removeEventListener("actionAppDataUpdateSingleAttribute",T),document.removeEventListener("updateActionAppArgs",B),P&&(P.removeEventListener("keyup",L),P.removeEventListener("blur",z))}}),[d]),(0,r.useEffect)((function(){var e=y(i);if(e){var t=Mt;"ignore_errors"in t&&Oe!==t.ignore_errors&&(t.ignore_errors=Oe,e.ignore_errors=Oe),"skip_execution"in t&&Ie!==t.skip_execution&&(t.skip_execution=Ie,e.skip_execution=Ie),"conditional_execution"in t&&Me!==t.conditional_execution&&(t.conditional_execution=Me,e.conditional_execution=Me),"filterConditions"in e&&"filterConditions"in t&&e.filterConditions!==t.filterConditions&&(t.filterConditions=e.filterConditions),Object.keys(t).length>0&&kt(t)}}),[Oe,Me,Ie]),(0,o.jsxs)(mc(),{isOpen:n,onRequestClose:a,contentLabel:"Action App Modal",className:Mc.settingsModalContainer,style:{overlay:{backgroundColor:"transparent",position:"static"},content:{padding:"0px",right:"12px",top:"124px",left:"auto",borderWidth:"2px",borderStyle:"solid",borderRadius:"5px",borderColor:"#0d6efd",overflow:"hidden",maxWidth:"800px",maxHeight:"97%",minWidth:"375px",minHeight:"500px",boxSizing:"border-box"}},children:[(0,o.jsx)($c(),{axis:"both",handle:".modal-header",defaultPosition:{x:0,y:0},children:(0,o.jsx)("aside",{className:Mc.settingsModal,children:(0,o.jsx)(Wc.ResizableBox,{width:Pe,height:Be,axis:"both",minConstraints:[375,500],maxConstraints:[600,1200],onResizeStop:function(e,t){Le(t.size.width),He(t.size.height)},resizeHandles:["w","s"],style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:(0,o.jsx)("div",{className:Mc.settingsModalWrap,style:{width:"inherit",height:"inherit"},children:(0,o.jsxs)("div",{className:Mc.settingsModalContent,children:[(0,o.jsxs)("div",{className:Mc.settingsModalHeader,children:[(0,o.jsx)("div",{className:Mc.settingsModalHeaderAppIcon,children:(0,o.jsx)("span",{className:Mc.settingsModalHeaderAppIconImg,children:(0,o.jsx)("img",{src:Ve.icon,alt:Ve.name,style:{width:"20px",height:"20px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})})}),(0,o.jsxs)("div",{className:Mc.settingsModalHeaderStepTitle,children:[(0,o.jsxs)("strong",{children:[qe.toString(),"."]}),(0,o.jsx)("div",{className:Mc.settingsStepTitle,children:et})]}),(0,o.jsx)("div",{className:Mc.settingsModalHeaderCloseButton,children:(0,o.jsx)("div",{className:Mc.settingsModalCloseButtonIcon,children:(0,o.jsx)("button",{className:"border-0 bg-transparent p-0",onClick:a,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"24",width:"24",name:"formX",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.29 6.29 12 10.59l-4.29-4.3-1.42 1.42 4.3 4.29-4.3 4.29 1.42 1.42 4.29-4.3 4.29 4.3 1.42-1.42-4.3-4.29 4.3-4.29-1.42-1.42Z"})})})})})]}),(0,o.jsx)("div",{className:Mc.settingsModalTabs,children:(0,o.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,o.jsx)("button",{className:Ll()(Mc.tabNavigationButton,"bg-transparent ".concat("setup-tab"===d?Mc.active:""),We&&"parentType"in We&&"routerRoute"===We.parentType?"d-none":""),onClick:function(){return Vt("setup-tab")},children:(0,o.jsx)("span",{className:Mc.tabNavigationButtonTitle,children:"Setup"})}),(0,o.jsx)("div",{className:Ll()("nav-icon",We&&"parentType"in We&&"routerRoute"===We.parentType?"d-none":""),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M11.44 5H8.82l5.88 7-5.88 7h2.62l5.86-7-5.86-7Z"})})}),(0,o.jsx)("button",{className:Ll()(Mc.tabNavigationButton,"bg-transparent ".concat("configure-tab"===d?Mc.active:"")),onClick:function(){return Vt("configure-tab")},children:(0,o.jsx)("span",{className:Mc.tabNavigationButtonTitle,children:"Configure"})}),(0,o.jsx)("div",{className:"nav-icon",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M11.44 5H8.82l5.88 7-5.88 7h2.62l5.86-7-5.86-7Z"})})}),"action"===ct&&"filter"!==Ve.fm_app&&"iterator_storage"!==Ve.fm_app&&"iterator_end"!==Ve.fm_app&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:Ll()(Mc.tabNavigationButton,"bg-transparent ".concat("conditions-tab"===d?Mc.active:"")),onClick:function(){return Vt("conditions-tab")},children:(0,o.jsx)("span",{className:Mc.tabNavigationButtonTitle,children:"Conditions"})}),(0,o.jsx)("div",{className:"nav-icon",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M11.44 5H8.82l5.88 7-5.88 7h2.62l5.86-7-5.86-7Z"})})})]}),(0,o.jsx)("button",{className:Ll()(Mc.tabNavigationButton,"bg-transparent ".concat("test-tab"===d?Mc.active:"")),onClick:function(){return Vt("test-tab")},children:(0,o.jsx)("span",{className:Mc.tabNavigationButtonTitle,children:"Test"})})]})}),(0,o.jsx)("div",{className:Mc.settingsModalBody,children:(0,o.jsxs)("div",{className:"tab-content p-2",children:[(0,o.jsx)("div",{className:"tab-pane fade p-2 ".concat("setup-tab"===d?"show active":""),id:"setup-tab",children:(0,o.jsxs)("div",{className:Mc.settingsFieldsContainer,children:[(0,o.jsxs)("div",{className:Mc.settingsFieldWrap,children:[(0,o.jsxs)("div",{className:Ll()(Mc.settingsFieldLabel,Mc.fieldTypography),children:[(0,o.jsx)("span",{children:"App"})," ",(0,o.jsx)("span",{className:Mc.requiredField,children:"*"})]}),(0,o.jsxs)("div",{className:Mc.stepAppContainer,children:[(0,o.jsxs)("div",{className:Mc.stepAppDisplay,children:[(0,o.jsx)("div",{className:Mc.stepAppIcon,children:(0,o.jsx)("span",{className:Mc.stepAppIconImg,children:(0,o.jsx)("img",{src:Ve.icon,alt:Ve.name,style:{width:"18px",height:"18px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})})}),(0,o.jsx)("div",{className:Ll()(Mc.stepAppLabel,Mc.fieldTypography),children:(0,o.jsx)("span",{children:Ve.name})})]}),(0,o.jsx)("div",{className:Mc.appSelectButtonDisplay,children:(0,o.jsx)("button",{onClick:function(){tn(),c(i)},className:Ll()("btn btn-outline-primary btn-display-app-selector",Mc.fieldTypography),children:"Change"})})]})]}),(0,o.jsxs)("div",{className:Mc.settingsFieldWrap,children:[(0,o.jsxs)("div",{className:Ll()(Mc.settingsFieldLabel,Mc.fieldTypography),children:[(0,o.jsxs)("span",{children:[1===qe?"Trigger":"Action"," Event"]})," ",(0,o.jsx)("span",{className:Mc.requiredField,children:"*"})]}),(0,o.jsxs)("div",{className:Ll()(Mc.fieldDropdown,"step-event"),children:[(0,o.jsxs)("select",{name:"workflow-trigger-events",className:Ll()(Mc.selectField,"workflow-trigger-events w-100 mw-100"),title:"Choose an event","data-live-search":"true",onChange:function(e){var t=e.target.value,n=function(e,t,n){var o=1===qe?t:e;kt({}),l.actionAppArgs={},window.currentAppAction=n,zt(n);for(var r=0,i=Object.entries(o);r<i.length;r++){var a=i[r],s=a[0],c=a[1];if(c[0]&&c[0][n]){if(c[0][n]&&n in c[0])return c[0][n]}else if(s===n)return c}}(Xe,Ue,t);window.FlowMatticWorkflowEvents.trigger("setWorkflowTriggerv2",t),n&&function(e,t){if(l.data.eventSlug=e,i){var n=y(i);if(n){n.data.eventSlug=e,n.data.eventTitle=t.title,n.data.customLabel||tt(t.title);var o=v().map((function(t){return t.id===i?Yc(Yc({},t),{data:Yc(Yc({},t.data),{eventSlug:e})}):t}));x(o)}}}(t,n)},children:[(0,o.jsx)("option",{value:"",selected:void 0===Ye,children:"Choose option"}),Pt&&Object.entries(Pt).map((function(e){var t,n=e[0],r=e[1];if("object"!=typeof r||"title"in r){var i=r;return(0,o.jsx)("option",{value:n,selected:Ye===n,"data-subtext":i.description,children:i.title},n)}return(0,o.jsx)("optgroup",{label:(t=n,t.replace(/\b\w/g,(function(e){return e.toUpperCase()}))),"data-max-options":"1",children:Object.entries(r[0]).map((function(e){var t=e[0],n=e[1];return(0,o.jsx)("option",{value:t,selected:Ye===t,"data-subtext":n.description,children:n.title},t)}))},n)}))]}),(0,o.jsx)("div",{className:"select-holder"},"workflow-trigger-events")]})]})]})}),(0,o.jsx)("div",{className:"tab-pane fade ".concat("configure-tab"===d?"show active":""),id:"configure-tab",children:(0,o.jsxs)("div",{className:"fm-workflow-action-data p-2",children:[ot&&(0,o.jsx)("div",{ref:Dt,className:Mc.configureFieldsContainer,dangerouslySetInnerHTML:{__html:ot}}),!ot&&(0,o.jsx)("div",{className:Mc.configureFieldsContainer,children:(0,o.jsxs)("div",{className:"alert alert-primary",role:"alert",children:[(0,o.jsx)("strong",{children:"No configuration required"}),(0,o.jsxs)("p",{className:"form-text text-reset mb-0",children:["This ",ct," does not require any configuration. You can proceed to the test the step."]})]})})]})}),"filter"!==Ve.fm_app&&"iterator_storage"!==Ve.fm_app&&"iterator_end"!==Ve.fm_app&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{id:"conditions-tab",className:"tab-pane fade p-2 ".concat("conditions-tab"===d?"show active":""),children:(0,o.jsx)("div",{className:"fm-workflow-action-data p-2",children:(0,o.jsx)("div",{className:Ll()("flowmattic-step-conditions",Mc.filterConditionsContainer),children:(0,o.jsxs)("div",{className:"css-daexgLj",children:[(0,o.jsxs)("div",{className:"form-group css-yagMiHw dynamic-inputs action-conditional w-100",children:[(0,o.jsxs)("div",{className:"fm-input-wrap gap-3 mb-2",children:[(0,o.jsx)("h4",{className:"fm-input-title css-rPBDSnn css-Tirhb7Y",children:"Enable Conditional Execution"}),(0,o.jsxs)("div",{className:"form-check",children:[(0,o.jsx)("input",{id:"fm-checkbox-action-conditional",className:"fm-checkbox form-control fm-conditional-execution form-check-input bg-none css-KHGDVLV",name:"conditional_execution",type:"checkbox",value:"Yes",onChange:function(e){var t=e.target.checked;ke(t?"Yes":"No")},checked:"Yes"===Me}),(0,o.jsx)("label",{className:"form-check-label",htmlFor:"fm-checkbox-action-conditional",children:"Execute This Step Only if Conditions Meet"})]})]}),(0,o.jsx)("div",{className:Ll()("action-conditions-wrap fm-filter-conditions-body d-flex flex-column gap-3","Yes"===Me?"":"hidden"),children:"conditions-tab"===d&&(0,o.jsx)(Zc,{settings:(null===(t=y(i))||void 0===t?void 0:t.filterConditions)||{},updateNodeConditions:function(e){var t=y(i);t&&(t.filterConditions=e,t.actionAppArgs.filterConditions=e,kt(t.actionAppArgs),w(i,t))},openDynamicTagsPopup:Bt,openDynamicTagsPopupOnButton:Kt})})]}),(0,o.jsx)("div",{className:"form-group css-yagMiHw ignore-errors w-100",children:(0,o.jsxs)("div",{className:"fm-input-wrap gap-3 mb-2",children:[(0,o.jsx)("h4",{className:"fm-input-title css-rPBDSnn css-Tirhb7Y",children:"Ignore Errors"}),(0,o.jsxs)("div",{className:"form-check",children:[(0,o.jsx)("input",{id:"fm-checkbox-ignore-errors",className:"fm-checkbox form-control fm-ignore-errors form-check-input bg-none css-KHGDVLV",name:"ignore_errors",type:"checkbox",value:"Yes",onChange:function(e){var t=e.target.checked;Re(t?"Yes":"No")},checked:"Yes"===Oe}),(0,o.jsx)("label",{htmlFor:"fm-checkbox-ignore-errors",children:"Check to ignore the error responses. This will set the error status to success and prevent the error notification email as well."})]})]})}),"action"===ct&&"iterator_end"!==Ve.fm_app&&(0,o.jsx)("div",{className:"form-group css-yagMiHw ignore-errors w-100",children:(0,o.jsxs)("div",{className:"fm-input-wrap gap-3 mb-2",children:[(0,o.jsx)("h4",{className:"fm-input-title css-rPBDSnn css-Tirhb7Y",children:"Skip Execution"}),(0,o.jsxs)("div",{className:"form-check",children:[(0,o.jsx)("input",{id:"fm-checkbox-skip-execution",className:"fm-checkbox form-control fm-skip-execution form-check-input bg-none css-KHGDVLV",name:"skip_execution",type:"checkbox",value:"Yes",onChange:function(e){var t=e.target.checked;Te(t?"Yes":"No")},checked:"Yes"===Ie}),(0,o.jsx)("label",{htmlFor:"fm-checkbox-skip-execution",children:"Check to skip the execution of this step. This will prevent the step from executing."}),(0,o.jsx)("div",{className:"form-text text-muted",children:"This will not execute the step, but will continue the workflow execution."}),(0,o.jsx)("div",{className:"form-text text-muted",children:"If checked, any mapped data from this step will use the current response captured."})]})]})})]})})})})}),(0,o.jsxs)("div",{className:"tab-pane fade p-2 ".concat("test-tab"===d?"show active d-flex flex-column":""),id:"test-tab",children:["trigger"===ct&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:Mc.triggerAppToFlowMatticIcons,children:[(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:Ve.icon,alt:Ve.name,style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})}),(0,o.jsx)("div",{className:Mc.appIconArrow,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",color:"neutral700",name:"arrowBigRight",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.86 11H4v2h12.86l-5.04 6h2.62l5.86-7-5.86-7h-2.62l5.04 6Z"})})}),(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:window.FlowMatticIcon,alt:"FlowMattic",style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})})]}),(0,o.jsx)("strong",{children:"Test your trigger"}),(0,o.jsx)("p",{className:"form-text",children:"Send data to your workflow to confirm if your trigger is set up correctly."}),(0,o.jsxs)("div",{className:Ll()(Mc.responseTabs,Mc.responseTabsTriggers),children:[Ct&&Ct.length>0&&(0,o.jsxs)("div",{className:Mc.responseList,children:[(0,o.jsx)("strong",{children:"Responses"}),(0,o.jsx)("p",{className:"form-text",children:"Showing upto 5 most recent responses"}),(0,o.jsx)("ul",{className:Mc.responseListItems,children:Ct.slice(-5).map((function(e,t){return(0,o.jsxs)("li",{className:Ll()("ps-3",Mc.responseListItem,t===ye?Mc.activeResponse:""),onClick:function(n){!function(e,t,n,o){le(t),de(n),xe(o);var r=e.target.getBoundingClientRect(),i={top:r.top,bottom:r.bottom,autoTop:r.top};r.bottom>window.innerHeight/2?(i.top="auto",i.bottom="20px"):(i.top=r.top+"px",i.bottom="auto"),ge(i),ie(!0),document.addEventListener("click",on)}(n,e.response,"Response ".concat(t+1),t),xe(t)},children:[(0,o.jsxs)("div",{className:"d-flex flex-column",children:[(0,o.jsxs)("span",{className:Mc.responseListItemLetter,children:["Response ",t+1]}),(0,o.jsxs)("span",{className:Mc.responseListItemTime,children:["Recorded on: ",e.time]})]}),(0,o.jsx)("div",{className:"d-flex p-2",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M11.44 5H8.82l5.88 7-5.88 7h2.62l5.86-7-5.86-7Z"})})})]},t)}))}),(0,o.jsxs)("div",{className:"mt-3 d-flex gap-2 align-items-center",children:[(0,o.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(e){var t=e.target,n=window.jQuery(t).next(".statusUpdateIcon")[0];t.blur(),t.classList.add("disabled");var o=document.createElement("span");o.classList.add("dashicons","dashicons-saved","fs-4","text-success"),n.appendChild(o);var r=ye,a=null==Ct?void 0:Ct.slice(-5);l.captureResponse=a&&a[r]?a[r].response:l.captureResponse;var s=v().map((function(e){return e.id===i?Yc(Yc({},e),{data:Yc({},e.data),activeResponseIndex:ye,captureResponse:l.captureResponse}):e}));x(s),setTimeout((function(){o.remove(),t.classList.remove("disabled")}),1e3)},children:"Use selected response"}),(0,o.jsx)("span",{className:"statusUpdateIcon d-flex align-items-center text-success"})]})]}),"schedule"===l.data.app.fm_app&&(0,o.jsx)("div",{className:Mc.responseList,children:(0,o.jsxs)("div",{className:"alert alert-primary",role:"alert",children:[(0,o.jsx)("strong",{children:"Scheduled Trigger"}),(0,o.jsx)("p",{className:"form-text text-reset mb-0",children:"This trigger is scheduled to run at the specified time. Publish the workflow to start scheduling."})]})})]})]}),"action"===ct&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:Mc.triggerAppToFlowMatticIcons,children:[(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:window.FlowMatticIcon,alt:"FlowMattic",style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})}),(0,o.jsx)("div",{className:Mc.appIconArrow,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",height:"16",width:"16",color:"neutral700",name:"arrowBigRight",children:(0,o.jsx)("path",{fill:"#2D2E2E",d:"M16.86 11H4v2h12.86l-5.04 6h2.62l5.86-7-5.86-7h-2.62l5.04 6Z"})})}),(0,o.jsx)("div",{className:Mc.appIcon,children:(0,o.jsx)("img",{src:Ve.icon,alt:Ve.name,style:{width:"16px",height:"16px",borderRadius:"0px",objectFit:"contain",overflow:"hidden"}})})]}),(0,o.jsx)("strong",{children:"Test your action"}),(0,o.jsx)("p",{className:"form-text",children:"We will send the configured request to your app to test the action"}),"iterator"===l.data.app.fm_app&&(0,o.jsxs)("div",{className:"alert alert-primary",role:"alert",children:[(0,o.jsx)("strong",{children:"Iterator Action"}),(0,o.jsx)("p",{className:"form-text text-reset mb-0",children:"This action will iterate over the JSON data provided. In test response, you will get only the first item from the data."})]}),(0,o.jsxs)("div",{className:Mc.responseTabs,children:[(0,o.jsxs)("ul",{className:"nav nav-tabs border-0",children:[(0,o.jsx)("li",{className:"nav-item m-0",children:(0,o.jsx)("a",{className:"nav-link ".concat("action-data-in"===h?"active":""),href:"javascript:void(0);",onClick:function(){return Zt("action-data-in")},children:"Data in"})}),yt&&(0,o.jsx)("li",{className:"nav-item m-0",children:(0,o.jsx)("a",{className:"nav-link ".concat("action-data-out"===h?"active":""),href:"javascript:void(0);",onClick:function(){return Zt("action-data-out")},children:"Data out"})})]}),(0,o.jsxs)("div",{className:"tab-content border border-1",id:"actionResponses",children:[(0,o.jsx)("div",{className:"tab-pane fade p-2 mt-2 ".concat("action-data-in"===h?"show active":""),id:"action-data-in",role:"tabpanel","aria-labelledby":"action-data-in-tab",children:(0,o.jsx)("div",{className:Ll()("w-100",Mc.fmResponseList),children:Object.entries(Mt).map((function(e){var t=e[0],n=e[1];return["workflow-trigger-events","action","application","workflow_id","stepID","actionAppArgs","filter-field-key","filter-field-value","filter-field-condition"].includes(t)||""===t?"":(0,o.jsxs)("div",{className:Ll()("d-flex gap-2 w-100",Mc.fmResponseItem),children:[(0,o.jsx)("div",{className:Mc.responseKey,children:(0,o.jsx)("span",{className:Mc.keyText,children:t})}),(0,o.jsx)("span",{className:Mc.responseValue,children:"object"==typeof n?JSON.stringify(n):String(n)})]})}))})}),(0,o.jsxs)("div",{className:"tab-pane fade p-2 mt-2 ".concat("action-data-out"===h?"show active":""),id:"action-data-out",role:"tabpanel","aria-labelledby":"action-data-out-tab",children:[(0,o.jsxs)("div",{className:"responseViewButtons d-flex justify-content-end",children:[yt&&bt&&(0,o.jsxs)("button",{className:Ll()("px-2 me-2 border-1 border-primary bg-transparent copy-response text-primary d-flex align-items-center rounded",Mc.copyResponse),style:{fontSize:"12px"},onClick:function(){navigator.clipboard.writeText(JSON.stringify(bt));var e=document.querySelector(".copy-response");e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="12" width="20" fill="currentColor" viewBox="0 0 448 512"><path d="M441 103c9.4 9.4 9.4 24.6 0 33.9L177 401c-9.4 9.4-24.6 9.4-33.9 0L7 265c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l119 119L407 103c9.4-9.4 24.6-9.4 33.9 0z"/></svg><span class="text-primary">Copied</span>',setTimeout((function(){e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="12" width="20" fill="currentColor" viewBox="0 0 448 512"><path d="M384 336l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L400 115.9 400 320c0 8.8-7.2 16-16 16zM192 384l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1L192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-32-48 0 0 32c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l32 0 0-48-32 0z"/></svg> <span class="text-primary">Copy</span>'}),2e3)},children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"20",fill:"currentColor",viewBox:"0 0 448 512",children:(0,o.jsx)("path",{d:"M384 336l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L400 115.9 400 320c0 8.8-7.2 16-16 16zM192 384l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1L192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-32-48 0 0 32c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l32 0 0-48-32 0z"})}),(0,o.jsx)("span",{className:"text-primary",children:"Copy"})]}),(0,o.jsxs)("div",{className:"btn-group btn-group-sm",role:"group","aria-label":"Response view type",children:[(0,o.jsx)("input",{type:"radio",className:"btn-check",name:"responseViewType",id:"json",defaultChecked:"json"===Ce}),(0,o.jsx)("label",{className:"btn btn-outline-primary shadow-none",htmlFor:"json",onClick:function(){return je("json")},children:"JSON"}),(0,o.jsx)("input",{type:"radio",className:"btn-check",name:"responseViewType",id:"simple",defaultChecked:"simple"===Ce}),(0,o.jsx)("label",{className:"btn btn-outline-primary shadow-none",htmlFor:"simple",onClick:function(){return je("simple")},children:"Simple"})]})]}),(0,o.jsxs)("div",{className:Ll()("w-100",Mc.fmResponseList),children:[(0,o.jsx)("div",{className:"jsonView ".concat("json"===Ce?"":"d-none")}),yt&&(0,o.jsx)("div",{className:"simpleResponseView ".concat("simple"===Ce?"":"d-none"),children:bt&&Object.entries(bt).map((function(e){var t=e[0],n=e[1];return"workflow-trigger-events"!==t?(0,o.jsxs)("div",{className:Ll()("d-flex gap-2 w-100",Mc.fmResponseItem),children:[(0,o.jsx)("div",{className:Mc.responseKey,children:(0,o.jsx)("span",{className:Mc.keyText,children:t})}),(0,o.jsx)("span",{className:Mc.responseValue,children:"object"==typeof n?JSON.stringify(n):String(n)||""})]}):""}))})]})]})]})]})]})]})]})}),(0,o.jsx)("div",{className:Mc.settingsModalFooterWrap,children:(0,o.jsxs)("div",{className:Mc.settingsModalFooter,children:["trigger"===ct&&"test-tab"===d&&"schedule"!==l.data.app.fm_app&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-primary d-none capture-spinner ms-2",role:"status","aria-hidden":"true"}),(0,o.jsx)("button",{className:"btn btn-outline-success btn-sm me-3 ms-3",onClick:function(e){return function(e){document.getElementsByClassName("capture-spinner")[0].classList.remove("d-none"),s(),function(e,t){var n=setInterval((function(){window.jQuery.ajax({url:window.ajaxurl,type:"POST",data:{action:"flowmattic_capture_data",application:r,appAction:i,"webhook-id":o,workflow_auth_key:a,webhook_response:s,workflow_nonce:window.flowMatticAppConfig.workflow_nonce,capture:l},success:function(o){"pending"!==(o=JSON.parse(o)).status&&(clearInterval(n),c.text("Re-capture Response"),t(o)),"1"===o.capture&&("api_polling"!==e.application&&"rss_feed"!==e.application||(window.FlowMatticWorkflowEvents.trigger("capturePollingResponse",{detail:e.currentNode.settings}),document.addEventListener("pollingResponseReceived",(function(e){var o=e;clearInterval(n),c.text("Re-capture Response"),t(o.detail)}),{once:!0}))),l="0"}})}),2e3),o=e.workflowId,r=e.application,i=e.appAction,a=e.fmAuthKey,s=e.webhookCustomResponse,l="1",c=e.captureButton;if("email_parser"===e.application&&window.jQuery.ajax({url:window.ajaxurl,type:"POST",data:{action:"flowmattic_register_email_parser",application:r,app_action:i,workflow_id:o,workflow_nonce:window.flowMatticAppConfig.workflow_nonce},success:function(e){console.log(e)}}),"plugin_actions"===e.application){var u=window.jQuery("body").find(".plugin-action-hook").val();window.jQuery.ajax({url:window.ajaxurl,type:"POST",data:{action:"flowmattic_save_plugin_action_data",application:r,actionHook:u,workflow_id:o,workflow_nonce:window.flowMatticAppConfig.workflow_nonce},success:function(e){console.log(e)}})}c.addClass("disabled")}({workflowId:window.workflowId,application:l.data.app.fm_app,appAction:l.data.eventSlug,webhookCustomResponse:"",captureButton:window.jQuery(".fm-webhook-capture-button"),thisEl:window.jQuery(".fm-webhook-capture-button"),currentNode:l},qt),e.target.classList.add("disabled")}(e)},children:"Capture Response"})]}),"action"===ct&&"test-tab"===d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-primary d-none capture-spinner ms-2",role:"status","aria-hidden":"true"}),(0,o.jsx)("button",{className:"btn btn-outline-success btn-sm me-3 ms-3",onClick:function(){var e;document.getElementsByClassName("capture-spinner")[0].classList.remove("d-none");for(var t=y(i),n=[],o=0,r=v();o<r.length;o++){var a=r[o];if("captureResponse"in a&&"placeholder"!==a.type&&a.captureResponse){var s=((e={})[a.data.app.fm_app+a.data.stepNumber]=a.captureResponse,e);n.push(s)}}var c=l.actionAppArgs&&Object.keys(l.actionAppArgs).length>0?l.actionAppArgs:Mt;l.actionAppArgs&&Object.keys(l.actionAppArgs).length<=0&&(l.actionAppArgs=Mt);for(var u=0,d=Object.entries(Mt);u<d.length;u++){var p=d[u],f=p[0],h=p[1];f in c||(c[f]=h)}!function(e,t){var n=e.workflowId,o=e.application,r=e.appAction,i=e.actionButton,a=e.actionArgs,s=e.captureResponses;a.action=r,a.application=o,a.workflow_id=n,a.stepID=e.id;var l=a;if(a.actionAppArgs){for(var c in a.actionAppArgs)void 0!==a[c]&&null!==a[c]||(a[c]=a.actionAppArgs[c]);l=a}window.jQuery.ajax({url:window.ajaxurl,type:"POST",data:{action:"flowmattic_save_test_action_step",fields:l,actionAppArgs:l,settings:l,application:o,event:r,capturedResponses:s,workflow_id:n,workflow_nonce:window.flowMatticAppConfig.workflow_nonce},success:function(e){e=JSON.parse(e),t(e),i.removeClass("disabled")}})}({workflowId:window.workflowId,application:l.data.app.fm_app,appAction:t.data.eventSlug,actionArgs:c,actionButton:window.jQuery(".fm-action-test-button"),captureResponses:n},$t)},children:"Test Action"})]}),(0,o.jsx)("button",Yc({className:"btn btn-outline-primary btn-sm"},pt,{onClick:function(){var e="";"setup-tab"===d?(e="configure-tab",p("configure-tab")):"configure-tab"===d?"action"===ct&&"filter"!==Ve.fm_app&&"iterator_storage"!==Ve.fm_app&&"iterator_end"!==Ve.fm_app?(e="conditions-tab",p("conditions-tab"),st("Continue")):(e="test-tab",p("test-tab"),st("Save & Close")):"conditions-tab"===d?(e="test-tab",p("test-tab"),st("Save & Close")):"test-tab"===d&&(e="test-tab",s(),a());var t=document.querySelector("#"+e);if(t){var n=t.querySelectorAll("input, select, textarea"),o=!1;n.forEach((function(e){e.hasAttribute("required")&&(e.value||(o=!0))})),o!==pt.disabled&&gt(o)}},children:at}))]})})]})})})})}),R&&(0,o.jsx)(Dc,{onSelect:function(e){A(!1);var t=S;if(t&&t.classList.contains("step-condition-input")){var n=t.value,o=t.selectionStart||0,r=void 0,i=void 0;return o>0&&("/"===n.charAt(o-1)||"@"===n.charAt(o-1))?(r=n.substring(0,o-1)+e+n.substring(o),i=o-1+e.length):(r=n.substring(0,o)+e+n.substring(o),i=o+e.length),Oc.Simulate.change(t,{target:{value:r}}),t.selectionStart=i,t.selectionEnd=i,void t.focus()}if(t&&t.classList.contains("content-editor-input"))!function(e){var t=S,n=document.querySelector(".flowmattic-editor"),o=window.getSelection(),r=j;if(t&&(t.focus(),o)){var i=r;i.startOffset>0&&i.setStart(i.startContainer,i.startOffset-1);var a=document.createTextNode(e);i.deleteContents(),i.insertNode(a),i.setStartAfter(a),i.setEndAfter(a),o.removeAllRanges(),i.collapse(!1),o.addRange(i),window.jQuery(t).val(window.jQuery(n).html()).trigger("change"),window.jQuery(n).is(".flowmattic-editor")&&window.jQuery(n)[0].dispatchEvent(new Event("input",{bubbles:!0}))}}(e);else if(t){n=t.value,r=void 0,r=j>0&&("/"===n.charAt(j-1)||"@"===n.charAt(j-1))?n.substring(0,j-1)+e+n.substring(j):n.substring(0,j)+e+n.substring(j),t.value=r,t.focus();var a=new Event("change",{bubbles:!0});t.dispatchEvent(a)}},onCancel:function(){A(!1),document.removeEventListener("click",Jt)},closeSettings:a,cursorPosition:j,inputFieldPosition:k,currentNodeId:i,currentInputLabel:T,inputField:S}),H&&(0,o.jsx)(Pc,{onSelect:function(e){var t=J;if(t){t.value=e;var n=new Event("change",{bubbles:!0});t.dispatchEvent(n),t.classList.contains("filter-condition-input")&&(Oc.Simulate.change(t,{target:{value:e}}),Oc.Simulate.blur(t,{target:{value:e}}))}document.removeEventListener("click",Qt),tn()},closeDropdown:tn,dropdownItems:"setup-tab"===d?Pt:$,dropdownPosition:Z,currentSelectLabel:U,currentSelectValue:te}),re&&(0,o.jsx)(Lc,{onCancel:nn,responseData:se,headingText:ue,modalPosition:me,deleteResponse:function(){nn();var e=Ct.filter((function(e,t){return t!==fe}));jt(e),l.responses=e;var t=v().map((function(e){return e.id===i?Yc(Yc({},e),{data:Yc({},e.data),actionAppArgs:l.actionAppArgs,captureResponse:l.captureResponse,responses:l.responses}):e}));x(t),ye===fe&&xe(0)}})]})};var Uc=function(){return Uc=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Uc.apply(this,arguments)},Kc={account:"paid-pro",hideAttribution:!0},Gc={padding:.95,zoom:1,minZoom:.95},Jc=window.initialNodes,Qc=window.initialEdges;Jc.forEach((function(e,t){var n;if(e.type=e.nodeType?e.nodeType:e.type,"placeholder"!==e.type){if(e.parentType&&"routerRoute"===e.parentType&&"filter"===e.data.app.fm_app&&(e.data.customLabel="Route Conditions",e.data.eventTitle="Route Conditions"),e.type=e.type?e.type:"step",e.routerSwitch&&(e.type="routerSwitch"),"routerRoute"===e.type&&e.routeIndex&&(rl.lastRouteNumber&&rl.lastRouteNumber<e.routeIndex?rl.lastRouteNumber=e.routeIndex:rl.lastRouteNumber||(rl.lastRouteNumber=e.routeIndex)),null===(n=e.data.app)||void 0===n?void 0:n.fm_app){var o=Fl(e.data.app.fm_app);if(e.data.app=o,!e.data.eventTitle){var r=e.data.eventSlug||"",i=function(e,t,n){var o,r,i="",a=Fl(e);if("routerSwitch"===e)return"Router Switch";if("routerRoute"===e)return"Router Route";if("routerDefault"===e)return"Router Default";if(1===n){if(a.triggers&&a.triggers[t])i=a.triggers[t].title;else for(var s in a.triggers)if(a.triggers[s][t]){i=null===(o=a.triggers[s][t])||void 0===o?void 0:o.title;break}}else if(a&&a.actions[t])i=a.actions[t].title;else if(a)for(var s in a.actions)if(a.actions[s][t]){i=null===(r=a.actions[s][t])||void 0===r?void 0:r.title;break}return i}(e.data.app.fm_app,r,t+1);e.data.eventTitle=i}e.data.label||(e.data.label=e.data.eventTitle)}var a=e.data.app;null==a||a.fm_app}})),Jc.forEach((function(e){e.type||(e.type="step")})),Qc.forEach((function(e,t){"placeholder"!==e.type&&("path"===e.source||e.routerEdge?Qc[t].type="router":e.type=e.type?e.type:"step")}));var eu=function(e,t){var n=e.filter((function(e){return!t.find((function(t){return t.source===e.id}))})),o=[],r=n.map((function(e){var t=zl();return o.push(t),{id:"".concat(t),position:{x:e.position.x,y:e.position.y+150},type:"placeholder",data:{label:"+"},parentType:e.type,hidden:e.hidden}})),i=n.map((function(e){var t=zl(),n=o.shift();return{id:"".concat(t),source:e.id,target:"".concat(n),type:"placeholder"}}));return{updatedNodes:e.concat(r),updatedEdges:t.concat(i)}},tu=Jc.filter((function(e){return"placeholder"!==e.type})),nu=Qc.filter((function(e){return"placeholder"!==e.type})),ou=eu(tu,nu),ru=ou.updatedNodes,iu=ou.updatedEdges;function au(){var e,t,n,i,a,s,l,c,u=(0,r.useState)(null),d=(u[0],u[1],(0,r.useState)(null)),p=d[0],f=d[1],h=(0,r.useState)(!1),m=(h[0],h[1],(0,r.useState)(null)),g=m[0],v=m[1],y=ta(),x=y.getNodes,w=y.setNodes,b=y.getNode,S=y.setEdges,N=y.getEdges,C=(0,r.useState)({triggerApp:!1,actionApp:!1,settingsApp:!1}),j=C[0],E=C[1],M=ta(),k=M.setCenter,_=M.zoomTo,O=M.setViewport;(0,r.useEffect)((function(){var e=document.querySelector("#publishWorkflow");e&&(e.removeEventListener("change",R),e.addEventListener("change",R));var t=document.querySelector(".fm-save-workflow");t&&(t.removeEventListener("click",R),t.addEventListener("click",R)),setTimeout((function(){_(1)}),20),_(1)}),[w,S,O,_]);var R=function(){var e=document.querySelector(".fm-save-workflow"),t=e.innerHTML,n=document.createElement("span");n.className="spinner-border spinner-border-sm",n.setAttribute("role","status"),n.setAttribute("aria-hidden","true"),e.innerHTML=n.outerHTML;var o,r,i,a,s,l,c,u,d=function(){var e=x(),t=N(),n=new Map(e.map((function(e){return[e.id,e]}))),o=function(e){return"router"===e.type&&"number"==typeof e.data.stepNumber},r=function(e){return void 0!==e&&"routerRoute"===e.type},i=function(e){return void 0!==e&&"routerSwitch"===e.type},a=e.filter((function(e){var t;return"number"==typeof(null===(t=e.data)||void 0===t?void 0:t.stepNumber)})),s=e.filter((function(e){var t;return"number"!=typeof(null===(t=e.data)||void 0===t?void 0:t.stepNumber)}));e.forEach((function(t,n){if("routerRoute"===t.type&&void 0!==e[n+1]&&"routerRoute"===e[n+1].type){var o=e[n+1].id;t.data.nextRouteID=o}})),a.sort((function(e,t){return e.data.stepNumber-t.data.stepNumber}));var l=function(e){return t.filter((function(t){return t.source===e})).map((function(e){return n.get(e.target)}))};function c(e,t){var n;void 0===t&&(t=new Set);for(var o=[],r=0,i=l(e).filter((function(e){return void 0!==e}));r<i.length;r++){var a=i[r];t.has(a.id)||(t.add(a.id),"number"==typeof(null===(n=a.data)||void 0===n?void 0:n.stepNumber)&&o.push(a),o.push.apply(o,c(a.id,t)))}return o}for(var u=function(e,t,n){var a=l(e.id).find(i);if(a){n.has(a.id)||(t.push(a),n.add(a.id));for(var s=l(a.id).filter((function(e){return void 0!==e})),d=0,p=s.filter(r);d<p.length;d++){var f=p[d];n.has(f.id)||(t.push(f),n.add(f.id));var h=c(f.id);h.sort((function(e,t){return e.data.stepNumber-t.data.stepNumber}));for(var m=0,g=h;m<g.length;m++){var v=g[m];n.has(v.id)||(t.push(v),n.add(v.id),o(v)&&u(v,t,n))}}}},d=[],p=new Set,f=0,h=a;f<h.length;f++){var m=h[f];p.has(m.id)||(d.push(m),p.add(m.id),o(m)&&u(m,d,p))}for(var g=0,v=s;g<v.length;g++){var y=v[g];p.has(y.id)||(d.push(y),p.add(y.id))}var w=d.map((function(e){return Uc(Uc({},e),{application:e.data.app&&e.data.app.fm_app,stepID:e.id,action:e.data.eventSlug,type:1===e.data.stepNumber?"trigger":"placeholder"===e.type?"placeholder":"action",nodeType:e.type,settings:e.settings,captureResponse:e.captureResponse,responses:e.responses,data:Uc(Uc({},e.data),{app:{key:e.data.app&&e.data.app.fm_app,fm_app:e.data.app&&e.data.app.fm_app}})})})),b=new Set(d.map((function(e){return e.id}))),S=t.filter((function(e){return b.has(e.source)&&b.has(e.target)})).map((function(e){var t;return{id:e.id,source:e.source,target:e.target,type:e.type,nodeType:null===(t=d.find((function(t){return t.id===e.source})))||void 0===t?void 0:t.nodeType,data:e.data||{}}}));return{steps:w,edges:S}}(),p={name:"",folder:"",description:"",workflow_id:"",workflow_auth_key:"",status:"",user_email:"",webhook_queue:"",builder_version:""};o=window.jQuery("body").find(".workflow-input.workflow-name").val(),o=encodeURIComponent(o),i=window.jQuery("body").find(".sidebar-workflow-folder").val(),a=window.jQuery("body").find(".sidebar-workflow-description").val(),r=window.jQuery("body").find(".workflow-input.workflow-id").val(),c=window.jQuery("body").find(".workflow-input.workflow-auth-key").val(),l=window.jQuery("body").find(".workflow-input.workflow-manager").val(),u=window.jQuery("body").find("#sidebar-workflow-request-queue").val(),s=window.jQuery("body").find("#publishWorkflow").is(":checked")?"on":"off",p.name=o,p.folder=i,p.description=a,p.workflow_id=r,p.workflow_auth_key=c,p.status=s,p.user_email=l,p.webhook_queue=u,p.builder_version="v2";var f=btoa(JSON.stringify(p)),h=btoa(encodeURIComponent(JSON.stringify(d)));window.jQuery.ajax({url:window.ajaxurl,type:"POST",data:{action:"flowmattic_save_workflow",workflow:h,settings:f,workflow_nonce:window.flowMatticAppConfig.workflow_nonce},success:function(e){e=JSON.parse(e),window.Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0}).fire({icon:"success",title:"Workflow Saved Successfully"})},complete:function(){n.remove(),e.innerHTML=t}})};!function(){var e=(0,r.useRef)(!0),t=ci(Rl),n=ta(),o=n.getNodes,i=n.getNode,a=n.setNodes,s=n.setEdges,l=n.getEdges,c=n.fitView;ta().setCenter,(0,r.useEffect)((function(){var e,t,n=o(),r=l(),s=Al(n),c=Il(s,r);r.forEach((function(e){var t,n;"path"===(null===(t=i(e.source))||void 0===t?void 0:t.type)&&"router"===(null===(n=i(e.target))||void 0===n?void 0:n.type)&&(e.type="router")}));var u,d=Ol(c,r),p={},f={},h=0;if(rl.pastedNodeMapping){var m=rl.pastedNodeMapping,g=(u=new Set,d.forEach((function(e){var t;(null===(t=e.data)||void 0===t?void 0:t.app)&&e.data.app.fm_app&&u.add(e.data.app.fm_app)})),Array.from(u)),v=(d.filter((function(e){return e.data.stepNumber&&"placeholder"!==e.type&&"routerSwitch"!==e.type&&"routerRoute"!==e.type})).sort((function(e,t){return e.data.stepNumber-t.data.stepNumber})),d.filter((function(e){return m[e.id]})));if(v.length>0){var y=v.map((function(e){return e.data.stepNumber})).filter(Boolean).sort((function(e,t){return e-t})),x=(Math.min.apply(Math,y),v.length,Object.values(m).sort((function(e,t){return e-t})),!rl.beforeShiftMapping),w=rl.beforeShiftMapping&&!rl.nodeInsertedIndex;if(x){var b=Object.values(m),S=v.map((function(e){return e.data.stepNumber}));b.sort((function(e,t){return e-t})),S.sort((function(e,t){return e-t})),b.forEach((function(e,t){var n=S[t];e&&n&&g.forEach((function(t){p[t+e]=t+n}))}))}else if(w){b=Object.values(m);var N=v.map((function(e){return e.data.stepNumber}));b.sort((function(e,t){return e-t})),N.sort((function(e,t){return e-t})),b.forEach((function(e,t){var n=N[t];e&&n&&g.forEach((function(t){p[t+e]=t+n}))}))}else v.forEach((function(e){if(m[e.id]){var t=m[e.id],n=e.data.stepNumber;g.forEach((function(e){p[e+t]=e+n}))}}));rl.beforeShiftMapping&&Object.entries(rl.beforeShiftMapping).forEach((function(e){var t=e[0],n=e[1],o=d.find((function(e){return e.id===t}));if(o&&o.data.stepNumber){var r=o.data.stepNumber;g.forEach((function(e){f[e+n]=e+r}))}}))}}var C={};if(null!==rl.nodeInsertedIndex&&!rl.pastedNodeMapping){var j=rl.nodeInsertedIndex,E=rl.nodeInsertedCount||1;h=j;var M=new Set;d.forEach((function(e){var t;(null===(t=e.data)||void 0===t?void 0:t.app)&&e.data.app.fm_app&&M.add(e.data.app.fm_app)}));for(var k=function(t){var n=d[t];if("placeholder"!==n.type&&(null===(e=n.data)||void 0===e?void 0:e.app)){var o=n.data.stepNumber;Array.from(M).forEach((function(e){var t=e+o;o-E>0&&(C[e+(o-E)]=t)}))}},_=j;_<d.length;_++)k(_)}if(null!==rl.nodeDeletedIndex){var O=rl.nodeDeletedIndex,R=rl.nodeDeletedCount||1,A=new Set;d.forEach((function(e){var t;(null===(t=e.data)||void 0===t?void 0:t.app)&&e.data.app.fm_app&&A.add(e.data.app.fm_app)}));var I=function(e){var n=d[e];if("placeholder"!==n.type&&(null===(t=n.data)||void 0===t?void 0:t.app)){var o=n.data.stepNumber;Array.from(A).forEach((function(e){var t=e+o;C[e+(o+R)]=t}))}};for(_=O;_<d.length;_++)I(_)}return(Object.keys(p).length>0||Object.keys(f).length>0||Object.keys(C).length>0)&&d.forEach((function(e,t){if(e.actionAppArgs){var n=e.actionAppArgs,o=!1,r=e.data.stepNumber;if(rl.pastedNodeMapping?(rl.pastedNodeMapping[e.id]||rl.beforeShiftMapping&&rl.beforeShiftMapping[e.id])&&(o=!0):(rl.nodeInsertedIndex&&r>h||rl.nodeDeletedIndex&&r>=rl.nodeDeletedIndex)&&(o=!0),o){var i;i=rl.pastedNodeMapping&&rl.pastedNodeMapping[e.id]?p:rl.beforeShiftMapping&&rl.beforeShiftMapping[e.id]?f:C;for(var a=Object.entries(i).sort((function(e,t){var n=e[0],o=t[0],r=parseInt(n.replace(/\D+/g,""),10);return parseInt(o.replace(/\D+/g,""),10)-r})),s=0,l=Object.entries(n);s<l.length;s++){for(var c=l[s],u=c[0],m=c[1],g="object"==typeof m&&null!==m&&!Array.isArray(m),v=g?JSON.stringify(m):String(m),y=0,x=Object.entries(i);y<x.length;y++){var w=x[y],b=w[0],S=w[1];v.includes(b)}for(var N=0,j=a;N<j.length;N++){var E=j[N];b=E[0],S=E[1],v.includes(b)&&(v=v.replaceAll(b,S))}var M=v;if(g)try{M=JSON.parse(v)}catch(e){M=v}n[u]=M}e.actionAppArgs=n,d[t]=e}}})),rl.nodeInsertedIndex=null,rl.nodeInsertedCount=null,rl.nodeDeletedIndex=null,rl.nodeDeletedCount=null,rl.pastedNodeMapping=null,rl.beforeShiftMapping=null,a(d)}),[t,l,o,i,a,c,s,rl.forceLayoutUpdate]),(0,r.useEffect)((function(){var e=rl.expandingRouteId;if(e){var t=o(),n=l(),r=jl().id((function(e){return e.id})).parentId((function(e){var t;return null===(t=n.find((function(t){return t.target===e.id})))||void 0===t?void 0:t.source}))(t);r.descendants().forEach((function(t){t.id===e&&(t.data.data.expanded?(t.data.data.expanded=!1,t.children&&(t.children=Dl(t.children))):(t.data.data.expanded=!0,t.children&&(t.children=Tl(t.children))))}));var i=Ol(_l(r).descendants().map((function(e){var t=e.data;return kl(kl({},t),{position:{x:e.x,y:e.y}})})),n);rl.expandingRouteId="",a(i)}}),[rl.expandingRouteId,rl.forceExpandCollapseRoute]),(0,r.useEffect)((function(){e.current&&(c(),e.current=!1)}),[c])}();var A=function(){return E((function(e){return Uc(Uc({},e),{triggerApp:!0})}))},I=function(){return E((function(e){return Uc(Uc({},e),{actionApp:!0})}))},T=function(){return E((function(e){return Uc(Uc({},e),{settingsApp:!0})}))},D=function(){return E((function(e){return Uc(Uc({},e),{settingsApp:!1})}))},P=function(e){var t=rl.currentNodeId||(p?p.id:null),n=null;if(t&&(n=b(t)),n=n||p,rl.currentNodeId=null,n){var o=x(),r=o.map((function(n){return n.id===t?("object"==typeof e&&null!==e&&"fm_app"in e&&"router"===e.fm_app&&(n.type="router"),Uc(Uc({},n),{data:Uc(Uc({},n.data),{label:e.name,app:e}),actionAppArgs:{}})):n}));if(n.data.app=e,n.data.label=e.name,f(n),"router"===e.fm_app){n.type="router";var i=o.findIndex((function(e){return e.id===n.id})),a=n.data.stepNumber||0;rl.nodeInsertedIndex=a+2;var s=function(e,t,n){var o={id:"".concat(e.id,"-routerSwitch"),position:{x:0,y:0},type:"routerSwitch",data:{label:"+"},routerSwitch:!0},r=0,i=rl.lastRouteNumber;i&&(r=i+1);var a=Bl(r),s=Bl(r+1);rl.lastRouteNumber=r+1;var l=zl(),c={id:l,position:{x:0,y:0},type:"step",data:{label:"Route Conditions",app:Hl("filter"),eventSlug:"continue_if",eventTitle:"Route Conditions",customLabel:"Route Conditions"},parentType:"routerRoute"},u=zl(),d={id:u,position:{x:0,y:0},type:"step",data:{label:"Route Conditions",app:Hl("filter"),eventSlug:"continue_if",eventTitle:"Route Conditions",customLabel:"Route Conditions"},parentType:"routerRoute"},p={id:"".concat(e.id,"-routerRoute_")+a,position:{x:0,y:0},type:"routerRoute",data:{label:"Route "+a},routerRoute:!0,routeLetter:a,routeIndex:r},f={id:"".concat(e.id,"-routerRoute_")+s,position:{x:0,y:0},type:"routerRoute",data:{label:"Route "+s},routerRoute:!0,routeLetter:s,routeIndex:r+1};n.splice(t+1,0,o),n.splice(t+2,0,p),n.splice(t+3,0,c),n.splice(t+4,0,f),n.splice(t+5,0,d),w(n);var h={id:"".concat(e.id,"-routerSwitch"),source:e.id,target:"".concat(e.id,"-routerSwitch"),type:"router",routerEdge:!0},m={id:"".concat(e.id,"-routerRoute_")+a,source:"".concat(e.id,"-routerSwitch"),target:"".concat(e.id,"-routerRoute_")+a,type:"router",routerEdge:!0},g={id:"".concat(e.id,"-routerRoute_")+s,source:"".concat(e.id,"-routerSwitch"),target:"".concat(e.id,"-routerRoute_")+s,type:"router",routerEdge:!0},v={id:"".concat(l,"-routerRoute_")+a,source:"".concat(e.id,"-routerRoute_")+a,target:l,type:"router",routerEdge:!0},y={id:"".concat(u,"-routerRoute_")+s,source:"".concat(e.id,"-routerRoute_")+s,target:u,type:"router",routerEdge:!0},x=N(),b=x.find((function(t){return t.source===e.id}));b&&(b.source=l),x.splice(t+1,0,h),x.splice(t+2,0,m),x.splice(t+3,0,v),x.splice(t+4,0,g),x.splice(t+5,0,y);var S=x.filter((function(e){return"placeholder"!==e.type})),C=n.filter((function(e){return"placeholder"!==e.type})),j=eu(C,S),E=j.updatedNodes,M=j.updatedEdges;return w(E),M}(n,i,r);S(s)}else w(r);v(t),"router"===e.fm_app?D():T(),setTimeout((function(){if(n){var e=n.position,t=e.x,o=e.y;k(t+270,o+180,{zoom:1,duration:500})}}),100)}},L={data:{app:null!==(e=null==p?void 0:p.data.app)&&void 0!==e?e:"",label:null!==(t=null==p?void 0:p.data.label)&&void 0!==t?t:"",stepNumber:null!==(n=null==p?void 0:p.data.stepNumber)&&void 0!==n?n:0,eventSlug:null!==(i=null==p?void 0:p.data.eventSlug)&&void 0!==i?i:"",customLabel:null!==(a=null==p?void 0:p.data.customLabel)&&void 0!==a?a:"",customNotes:null!==(s=null==p?void 0:p.data.customNotes)&&void 0!==s?s:""}},z=!(!g||!(null===(c=null===(l=b(g))||void 0===l?void 0:l.data)||void 0===c?void 0:c.app)),B={core:window.triggerApps,other:window.otherTriggerApps},H={core:window.actionApps,other:window.otherActionApps};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(kc,{isOpen:j.triggerApp,onClose:function(){E((function(e){return Uc(Uc({},e),{triggerApp:!1,settingsApp:!1})})),setTimeout((function(){T()}))},onSave:R,apps:B,onSelectApp:P}),(0,o.jsx)(_c,{isOpen:j.actionApp,onClose:function(){return E((function(e){return Uc(Uc({},e),{actionApp:!1})}))},onSave:R,apps:H,onSelectApp:P}),j.settingsApp&&g&&z&&(0,o.jsx)(Xc,{isOpen:j.settingsApp,onClose:function(){D(),rl.currentNodeId=null;var e=document.querySelector(".node-selected");e&&e.classList.remove("node-selected")},nodeId:g,currentNode:L,onChangeApp:function(e){"1"===e?A():I()},onSave:function(){R()}})]}),(0,o.jsx)(Ks,{position:"top-left"}),(0,o.jsx)(Is,{defaultNodes:ru.map((function(e,t){return Uc(Uc({},e),{data:Uc({},e.data),style:Uc(Uc({},e.style),{transition:"all 150ms ease-in-out"})})})),defaultEdges:iu,proOptions:Kc,nodeTypes:Sc,onNodeClick:function(e,t){var n=t.id,o=t.data.app;if(!(e.target&&e.target.classList.contains("css-xKr4UCm")||e.target.classList.contains("css-NuZemgh"))&&(!e.target||["css-m_bc4KH","css-v4iyypc","css-W3GUDFS","css-HKbRkOT"].some((function(t){return e.target.classList.contains(t)})))){if(g!==n&&D(),"router"!==t.type&&D(),f(t),v(t.id),document.querySelectorAll(".node-selected").forEach((function(e){e.classList.remove("node-selected")})),"router"!==t.type&&"routerSwitch"!==t.type&&"routerRoute"!==t.type&&(o?setTimeout((function(){T()}),2):"1"===n?A():I()),"routerRoute"!==t.type&&"router"!==t.type){var r=document.querySelector('[data-id="'.concat(n,'"] > div'));r&&r.classList.add("node-selected")}rl.currentNodeId=n}},onEdgeClick:function(e,t){D();var n=document.querySelector(".node-selected");n&&n.classList.remove("node-selected"),f(null),I()},onPaneClick:function(e){var t,n=rl.currentNodeId;if(rl.expandingRouteId=null,n){if(t=document.querySelector(".node-selected")){var o=t.parentElement?t.parentElement.getAttribute("data-id"):null;if(o){var r=b(o);!r||"router"!==r.type&&"routerSwitch"!==r.type&&"routerRoute"!==r.type||t.classList.remove("node-selected")}}}else(t=document.querySelector(".node-selected"))&&t.classList.remove("node-selected")},edgeTypes:Ec,fitView:!0,fitViewOptions:Gc,nodesDraggable:!1,nodesConnectable:!1,zoomOnDoubleClick:!1,zoomOnScroll:!1,panOnScroll:!0,defaultViewport:{x:0,y:0,zoom:1},deleteKeyCode:null,minZoom:.5,maxZoom:1.5,onInit:function(e){setTimeout((function(){e.fitView({maxZoom:1})}),0)},children:(0,o.jsx)(Fs,{})})]})}i.createRoot(document.getElementById("workflow-builder-root")).render((0,o.jsx)(r.StrictMode,{children:(0,o.jsx)((function(){return(0,o.jsx)(_s,{children:(0,o.jsx)(au,{})})}),{})}))},63:(e,t,n)=>{"use strict";var o=n(540),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useState,a=o.useEffect,s=o.useLayoutEffect,l=o.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=i({inst:{value:n,getSnapshot:t}}),r=o[0].inst,u=o[1];return s((function(){r.value=n,r.getSnapshot=t,c(r)&&u({inst:r})}),[e,n,t]),a((function(){return c(r)&&u({inst:r}),e((function(){c(r)&&u({inst:r})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},940:(e,t,n)=>{"use strict";var o=n(540),r=n(888),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useSyncExternalStore,s=o.useRef,l=o.useEffect,c=o.useMemo,u=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=c((function(){function e(e){if(!l){if(l=!0,a=e,e=o(e),void 0!==r&&p.hasValue){var t=p.value;if(r(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var n=o(e);return void 0!==r&&r(t,n)?t:(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,o,r]);var f=a(e,d[0],d[1]);return l((function(){p.hasValue=!0,p.value=f}),[f]),u(f),f}},888:(e,t,n)=>{"use strict";e.exports=n(63)},242:(e,t,n)=>{"use strict";e.exports=n(940)},771:e=>{"use strict";e.exports=function(){}},942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,i]=e[u],s=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={856:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[a,s,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var u=l(o)}for(t&&t(n);c<a.length;c++)i=a[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self.webpackChunkflowmattic=self.webpackChunkflowmattic||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[411],(()=>o(127)));r=o.O(r)})();
//# sourceMappingURL=workflow.bundle.js.map